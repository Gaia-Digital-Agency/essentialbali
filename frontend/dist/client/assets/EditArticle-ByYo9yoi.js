var Po=Object.defineProperty;var $o=(r,t,e)=>t in r?Po(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var R=(r,t,e)=>$o(r,typeof t!="symbol"?t+"":t,e);import{r as B,M as Ln,Q as Ms,J as Nt,j as L,q as ql,S as Uo,G as Fo,e as Ho,i as ua,f as zo,L as Vo}from"./AdminApp-ChTaPRE2.js";import{e as Ko,b as Go,f as Wo,h as Zo,i as Yo}from"./article.service-DabQZ069.js";import{u as Xo}from"./useNavigationPrompt-B_4aje__.js";import{u as Il}from"./useModal-B0ZwIyJt.js";import{I as ar}from"./InputField-Btjg0xJq.js";import{M as Jo,A as cs}from"./FeaturedImage-C43VoFVu.js";import{M as ha}from"./index-BYKjDz3i.js";import{a as Qo,_ as _n,b as tc}from"./createSuper-CJDnspyc.js";import{_ as ec,a as on,h as nc,b as us,u as rc,c as sc,S as Zs}from"./react-select.esm-BAaERCas.js";import{B as As}from"./Button-BkWwhKN1.js";import{C as Ys}from"./ComponentCard-BXAeiW9m.js";import{S as Dr}from"./Select-BrOugipn.js";import{S as da}from"./Switch-CqfvGdqv.js";import{g as ic}from"./tags.service-F0XCpcCN.js";import{t as fa}from"./slugify-CPdjgS2J.js";import{T as ac}from"./TextArea-XtACzk4h.js";import{r as lc,a as oc,b as cc,c as uc,s as Ts,u as hc,d as Dt,e as dc,f as fc,g as Ui,o as Rl,h as pc,i as gc,j as mc,k as bc,l as yc,m as vc,n as Ec,p as wc,D as hs,q as pa,t as xc,v as Ac,w as Xs,x as Tc,T as Nc,y as Sc,z as _c,P as Cc,A as ga,B as Lc,C as Oc,I as qc,E as Ic,_ as ma,F as Rc,G as kc,H as Mc,J as Dc,S as ba,K as jc,L as Bc,M as Pc,O as $c,N as Uc,Q as Fc,R as Hc,U as zc,V as Vc}from"./useCustomizedInput-NRK8BT_l.js";import{P as At}from"./index-C9kMmtqa.js";import"./media.service-DnMGUgve.js";import"./MediaForm-fju4iPXC.js";import"./index-BVEKCKPu.js";import"./PageBreadCrumb-DPyHZSFF.js";import"./PageMeta-B5tbE7tJ.js";import"./Alert-Cd3KaBGt.js";import"./useTimedMessage-D8LL_2fq.js";import"./Badge-CwbRsx9y.js";import"./createLucideIcon-BRWjyiVq.js";import"./index-Cop0DkR9.js";const Kc=r=>B.createElement("svg",{className:"size-5",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",...r},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.6501 11.9996C3.6501 7.38803 7.38852 3.64961 12.0001 3.64961C16.6117 3.64961 20.3501 7.38803 20.3501 11.9996C20.3501 16.6112 16.6117 20.3496 12.0001 20.3496C7.38852 20.3496 3.6501 16.6112 3.6501 11.9996ZM12.0001 1.84961C6.39441 1.84961 1.8501 6.39392 1.8501 11.9996C1.8501 17.6053 6.39441 22.1496 12.0001 22.1496C17.6058 22.1496 22.1501 17.6053 22.1501 11.9996C22.1501 6.39392 17.6058 1.84961 12.0001 1.84961ZM10.9992 7.52468C10.9992 8.07697 11.4469 8.52468 11.9992 8.52468H12.0002C12.5525 8.52468 13.0002 8.07697 13.0002 7.52468C13.0002 6.9724 12.5525 6.52468 12.0002 6.52468H11.9992C11.4469 6.52468 10.9992 6.9724 10.9992 7.52468ZM12.0002 17.371C11.586 17.371 11.2502 17.0352 11.2502 16.621V10.9445C11.2502 10.5303 11.586 10.1945 12.0002 10.1945C12.4144 10.1945 12.7502 10.5303 12.7502 10.9445V16.621C12.7502 17.0352 12.4144 17.371 12.0002 17.371Z",fill:"#0BA5EC"}));var kl=typeof global=="object"&&global&&global.Object===Object&&global,Gc=typeof self=="object"&&self&&self.Object===Object&&self,Xe=kl||Gc||Function("return this")(),In=Xe.Symbol,Ml=Object.prototype,Wc=Ml.hasOwnProperty,Zc=Ml.toString,jr=In?In.toStringTag:void 0;function Yc(r){var t=Wc.call(r,jr),e=r[jr];try{r[jr]=void 0;var n=!0}catch{}var s=Zc.call(r);return n&&(t?r[jr]=e:delete r[jr]),s}var Xc=Object.prototype,Jc=Xc.toString;function Qc(r){return Jc.call(r)}var tu="[object Null]",eu="[object Undefined]",ya=In?In.toStringTag:void 0;function wr(r){return r==null?r===void 0?eu:tu:ya&&ya in Object(r)?Yc(r):Qc(r)}function hn(r){return r!=null&&typeof r=="object"}var zn=Array.isArray;function Rn(r){var t=typeof r;return r!=null&&(t=="object"||t=="function")}function Dl(r){return r}var nu="[object AsyncFunction]",ru="[object Function]",su="[object GeneratorFunction]",iu="[object Proxy]";function Fi(r){if(!Rn(r))return!1;var t=wr(r);return t==ru||t==su||t==nu||t==iu}var Js=Xe["__core-js_shared__"],va=(function(){var r=/[^.]+$/.exec(Js&&Js.keys&&Js.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function au(r){return!!va&&va in r}var lu=Function.prototype,ou=lu.toString;function Gn(r){if(r!=null){try{return ou.call(r)}catch{}try{return r+""}catch{}}return""}var cu=/[\\^$.*+?()[\]{}|]/g,uu=/^\[object .+?Constructor\]$/,hu=Function.prototype,du=Object.prototype,fu=hu.toString,pu=du.hasOwnProperty,gu=RegExp("^"+fu.call(pu).replace(cu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function mu(r){if(!Rn(r)||au(r))return!1;var t=Fi(r)?gu:uu;return t.test(Gn(r))}function bu(r,t){return r==null?void 0:r[t]}function Wn(r,t){var e=bu(r,t);return mu(e)?e:void 0}var mi=Wn(Xe,"WeakMap"),Ea=Object.create,yu=(function(){function r(){}return function(t){if(!Rn(t))return{};if(Ea)return Ea(t);r.prototype=t;var e=new r;return r.prototype=void 0,e}})();function vu(r,t,e){switch(e.length){case 0:return r.call(t);case 1:return r.call(t,e[0]);case 2:return r.call(t,e[0],e[1]);case 3:return r.call(t,e[0],e[1],e[2])}return r.apply(t,e)}function Eu(r,t){var e=-1,n=r.length;for(t||(t=Array(n));++e<n;)t[e]=r[e];return t}var wu=800,xu=16,Au=Date.now;function Tu(r){var t=0,e=0;return function(){var n=Au(),s=xu-(n-e);if(e=n,s>0){if(++t>=wu)return arguments[0]}else t=0;return r.apply(void 0,arguments)}}function Nu(r){return function(){return r}}var qs=(function(){try{var r=Wn(Object,"defineProperty");return r({},"",{}),r}catch{}})(),Su=qs?function(r,t){return qs(r,"toString",{configurable:!0,enumerable:!1,value:Nu(t),writable:!0})}:Dl,_u=Tu(Su);function Cu(r,t){for(var e=-1,n=r==null?0:r.length;++e<n&&t(r[e],e,r)!==!1;);return r}var Lu=9007199254740991,Ou=/^(?:0|[1-9]\d*)$/;function jl(r,t){var e=typeof r;return t=t??Lu,!!t&&(e=="number"||e!="symbol"&&Ou.test(r))&&r>-1&&r%1==0&&r<t}function Hi(r,t,e){t=="__proto__"&&qs?qs(r,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):r[t]=e}function Qr(r,t){return r===t||r!==r&&t!==t}var qu=Object.prototype,Iu=qu.hasOwnProperty;function Bl(r,t,e){var n=r[t];(!(Iu.call(r,t)&&Qr(n,e))||e===void 0&&!(t in r))&&Hi(r,t,e)}function Ru(r,t,e,n){var s=!e;e||(e={});for(var i=-1,l=t.length;++i<l;){var o=t[i],c=void 0;c===void 0&&(c=r[o]),s?Hi(e,o,c):Bl(e,o,c)}return e}var wa=Math.max;function ku(r,t,e){return t=wa(t===void 0?r.length-1:t,0),function(){for(var n=arguments,s=-1,i=wa(n.length-t,0),l=Array(i);++s<i;)l[s]=n[t+s];s=-1;for(var o=Array(t+1);++s<t;)o[s]=n[s];return o[t]=e(l),vu(r,this,o)}}function Mu(r,t){return _u(ku(r,t,Dl),r+"")}var Du=9007199254740991;function Pl(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Du}function Ds(r){return r!=null&&Pl(r.length)&&!Fi(r)}function ju(r,t,e){if(!Rn(e))return!1;var n=typeof t;return(n=="number"?Ds(e)&&jl(t,e.length):n=="string"&&t in e)?Qr(e[t],r):!1}function Bu(r){return Mu(function(t,e){var n=-1,s=e.length,i=s>1?e[s-1]:void 0,l=s>2?e[2]:void 0;for(i=r.length>3&&typeof i=="function"?(s--,i):void 0,l&&ju(e[0],e[1],l)&&(i=s<3?void 0:i,s=1),t=Object(t);++n<s;){var o=e[n];o&&r(t,o,n,i)}return t})}var Pu=Object.prototype;function zi(r){var t=r&&r.constructor,e=typeof t=="function"&&t.prototype||Pu;return r===e}function $u(r,t){for(var e=-1,n=Array(r);++e<r;)n[e]=t(e);return n}var Uu="[object Arguments]";function xa(r){return hn(r)&&wr(r)==Uu}var $l=Object.prototype,Fu=$l.hasOwnProperty,Hu=$l.propertyIsEnumerable,bi=xa((function(){return arguments})())?xa:function(r){return hn(r)&&Fu.call(r,"callee")&&!Hu.call(r,"callee")};function zu(){return!1}var Ul=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Aa=Ul&&typeof module=="object"&&module&&!module.nodeType&&module,Vu=Aa&&Aa.exports===Ul,Ta=Vu?Xe.Buffer:void 0,Ku=Ta?Ta.isBuffer:void 0,Kr=Ku||zu,Gu="[object Arguments]",Wu="[object Array]",Zu="[object Boolean]",Yu="[object Date]",Xu="[object Error]",Ju="[object Function]",Qu="[object Map]",th="[object Number]",eh="[object Object]",nh="[object RegExp]",rh="[object Set]",sh="[object String]",ih="[object WeakMap]",ah="[object ArrayBuffer]",lh="[object DataView]",oh="[object Float32Array]",ch="[object Float64Array]",uh="[object Int8Array]",hh="[object Int16Array]",dh="[object Int32Array]",fh="[object Uint8Array]",ph="[object Uint8ClampedArray]",gh="[object Uint16Array]",mh="[object Uint32Array]",_t={};_t[oh]=_t[ch]=_t[uh]=_t[hh]=_t[dh]=_t[fh]=_t[ph]=_t[gh]=_t[mh]=!0;_t[Gu]=_t[Wu]=_t[ah]=_t[Zu]=_t[lh]=_t[Yu]=_t[Xu]=_t[Ju]=_t[Qu]=_t[th]=_t[eh]=_t[nh]=_t[rh]=_t[sh]=_t[ih]=!1;function bh(r){return hn(r)&&Pl(r.length)&&!!_t[wr(r)]}function Vi(r){return function(t){return r(t)}}var Fl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fr=Fl&&typeof module=="object"&&module&&!module.nodeType&&module,yh=Fr&&Fr.exports===Fl,Qs=yh&&kl.process,mr=(function(){try{var r=Fr&&Fr.require&&Fr.require("util").types;return r||Qs&&Qs.binding&&Qs.binding("util")}catch{}})(),Na=mr&&mr.isTypedArray,Ki=Na?Vi(Na):bh,vh=Object.prototype,Eh=vh.hasOwnProperty;function Hl(r,t){var e=zn(r),n=!e&&bi(r),s=!e&&!n&&Kr(r),i=!e&&!n&&!s&&Ki(r),l=e||n||s||i,o=l?$u(r.length,String):[],c=o.length;for(var h in r)(t||Eh.call(r,h))&&!(l&&(h=="length"||s&&(h=="offset"||h=="parent")||i&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||jl(h,c)))&&o.push(h);return o}function zl(r,t){return function(e){return r(t(e))}}var wh=zl(Object.keys,Object),xh=Object.prototype,Ah=xh.hasOwnProperty;function Th(r){if(!zi(r))return wh(r);var t=[];for(var e in Object(r))Ah.call(r,e)&&e!="constructor"&&t.push(e);return t}function Nh(r){return Ds(r)?Hl(r):Th(r)}function Sh(r){var t=[];if(r!=null)for(var e in Object(r))t.push(e);return t}var _h=Object.prototype,Ch=_h.hasOwnProperty;function Lh(r){if(!Rn(r))return Sh(r);var t=zi(r),e=[];for(var n in r)n=="constructor"&&(t||!Ch.call(r,n))||e.push(n);return e}function Vl(r){return Ds(r)?Hl(r,!0):Lh(r)}var Gr=Wn(Object,"create");function Oh(){this.__data__=Gr?Gr(null):{},this.size=0}function qh(r){var t=this.has(r)&&delete this.__data__[r];return this.size-=t?1:0,t}var Ih="__lodash_hash_undefined__",Rh=Object.prototype,kh=Rh.hasOwnProperty;function Mh(r){var t=this.__data__;if(Gr){var e=t[r];return e===Ih?void 0:e}return kh.call(t,r)?t[r]:void 0}var Dh=Object.prototype,jh=Dh.hasOwnProperty;function Bh(r){var t=this.__data__;return Gr?t[r]!==void 0:jh.call(t,r)}var Ph="__lodash_hash_undefined__";function $h(r,t){var e=this.__data__;return this.size+=this.has(r)?0:1,e[r]=Gr&&t===void 0?Ph:t,this}function Vn(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Vn.prototype.clear=Oh;Vn.prototype.delete=qh;Vn.prototype.get=Mh;Vn.prototype.has=Bh;Vn.prototype.set=$h;function Uh(){this.__data__=[],this.size=0}function js(r,t){for(var e=r.length;e--;)if(Qr(r[e][0],t))return e;return-1}var Fh=Array.prototype,Hh=Fh.splice;function zh(r){var t=this.__data__,e=js(t,r);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():Hh.call(t,e,1),--this.size,!0}function Vh(r){var t=this.__data__,e=js(t,r);return e<0?void 0:t[e][1]}function Kh(r){return js(this.__data__,r)>-1}function Gh(r,t){var e=this.__data__,n=js(e,r);return n<0?(++this.size,e.push([r,t])):e[n][1]=t,this}function pn(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}pn.prototype.clear=Uh;pn.prototype.delete=zh;pn.prototype.get=Vh;pn.prototype.has=Kh;pn.prototype.set=Gh;var Wr=Wn(Xe,"Map");function Wh(){this.size=0,this.__data__={hash:new Vn,map:new(Wr||pn),string:new Vn}}function Zh(r){var t=typeof r;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?r!=="__proto__":r===null}function Bs(r,t){var e=r.__data__;return Zh(t)?e[typeof t=="string"?"string":"hash"]:e.map}function Yh(r){var t=Bs(this,r).delete(r);return this.size-=t?1:0,t}function Xh(r){return Bs(this,r).get(r)}function Jh(r){return Bs(this,r).has(r)}function Qh(r,t){var e=Bs(this,r),n=e.size;return e.set(r,t),this.size+=e.size==n?0:1,this}function Zn(r){var t=-1,e=r==null?0:r.length;for(this.clear();++t<e;){var n=r[t];this.set(n[0],n[1])}}Zn.prototype.clear=Wh;Zn.prototype.delete=Yh;Zn.prototype.get=Xh;Zn.prototype.has=Jh;Zn.prototype.set=Qh;function td(r,t){for(var e=-1,n=t.length,s=r.length;++e<n;)r[s+e]=t[e];return r}var Kl=zl(Object.getPrototypeOf,Object),ed="[object Object]",nd=Function.prototype,rd=Object.prototype,Gl=nd.toString,sd=rd.hasOwnProperty,id=Gl.call(Object);function ad(r){if(!hn(r)||wr(r)!=ed)return!1;var t=Kl(r);if(t===null)return!0;var e=sd.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Gl.call(e)==id}function ld(){this.__data__=new pn,this.size=0}function od(r){var t=this.__data__,e=t.delete(r);return this.size=t.size,e}function cd(r){return this.__data__.get(r)}function ud(r){return this.__data__.has(r)}var hd=200;function dd(r,t){var e=this.__data__;if(e instanceof pn){var n=e.__data__;if(!Wr||n.length<hd-1)return n.push([r,t]),this.size=++e.size,this;e=this.__data__=new Zn(n)}return e.set(r,t),this.size=e.size,this}function We(r){var t=this.__data__=new pn(r);this.size=t.size}We.prototype.clear=ld;We.prototype.delete=od;We.prototype.get=cd;We.prototype.has=ud;We.prototype.set=dd;var Wl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sa=Wl&&typeof module=="object"&&module&&!module.nodeType&&module,fd=Sa&&Sa.exports===Wl,_a=fd?Xe.Buffer:void 0,Ca=_a?_a.allocUnsafe:void 0;function Zl(r,t){if(t)return r.slice();var e=r.length,n=Ca?Ca(e):new r.constructor(e);return r.copy(n),n}function pd(r,t){for(var e=-1,n=r==null?0:r.length,s=0,i=[];++e<n;){var l=r[e];t(l,e,r)&&(i[s++]=l)}return i}function gd(){return[]}var md=Object.prototype,bd=md.propertyIsEnumerable,La=Object.getOwnPropertySymbols,yd=La?function(r){return r==null?[]:(r=Object(r),pd(La(r),function(t){return bd.call(r,t)}))}:gd;function vd(r,t,e){var n=t(r);return zn(r)?n:td(n,e(r))}function yi(r){return vd(r,Nh,yd)}var vi=Wn(Xe,"DataView"),Ei=Wn(Xe,"Promise"),wi=Wn(Xe,"Set"),Oa="[object Map]",Ed="[object Object]",qa="[object Promise]",Ia="[object Set]",Ra="[object WeakMap]",ka="[object DataView]",wd=Gn(vi),xd=Gn(Wr),Ad=Gn(Ei),Td=Gn(wi),Nd=Gn(mi),qe=wr;(vi&&qe(new vi(new ArrayBuffer(1)))!=ka||Wr&&qe(new Wr)!=Oa||Ei&&qe(Ei.resolve())!=qa||wi&&qe(new wi)!=Ia||mi&&qe(new mi)!=Ra)&&(qe=function(r){var t=wr(r),e=t==Ed?r.constructor:void 0,n=e?Gn(e):"";if(n)switch(n){case wd:return ka;case xd:return Oa;case Ad:return qa;case Td:return Ia;case Nd:return Ra}return t});var Sd=Object.prototype,_d=Sd.hasOwnProperty;function Cd(r){var t=r.length,e=new r.constructor(t);return t&&typeof r[0]=="string"&&_d.call(r,"index")&&(e.index=r.index,e.input=r.input),e}var Is=Xe.Uint8Array;function Gi(r){var t=new r.constructor(r.byteLength);return new Is(t).set(new Is(r)),t}function Ld(r,t){var e=Gi(r.buffer);return new r.constructor(e,r.byteOffset,r.byteLength)}var Od=/\w*$/;function qd(r){var t=new r.constructor(r.source,Od.exec(r));return t.lastIndex=r.lastIndex,t}var Ma=In?In.prototype:void 0,Da=Ma?Ma.valueOf:void 0;function Id(r){return Da?Object(Da.call(r)):{}}function Yl(r,t){var e=t?Gi(r.buffer):r.buffer;return new r.constructor(e,r.byteOffset,r.length)}var Rd="[object Boolean]",kd="[object Date]",Md="[object Map]",Dd="[object Number]",jd="[object RegExp]",Bd="[object Set]",Pd="[object String]",$d="[object Symbol]",Ud="[object ArrayBuffer]",Fd="[object DataView]",Hd="[object Float32Array]",zd="[object Float64Array]",Vd="[object Int8Array]",Kd="[object Int16Array]",Gd="[object Int32Array]",Wd="[object Uint8Array]",Zd="[object Uint8ClampedArray]",Yd="[object Uint16Array]",Xd="[object Uint32Array]";function Jd(r,t,e){var n=r.constructor;switch(t){case Ud:return Gi(r);case Rd:case kd:return new n(+r);case Fd:return Ld(r);case Hd:case zd:case Vd:case Kd:case Gd:case Wd:case Zd:case Yd:case Xd:return Yl(r,e);case Md:return new n;case Dd:case Pd:return new n(r);case jd:return qd(r);case Bd:return new n;case $d:return Id(r)}}function Xl(r){return typeof r.constructor=="function"&&!zi(r)?yu(Kl(r)):{}}var Qd="[object Map]";function tf(r){return hn(r)&&qe(r)==Qd}var ja=mr&&mr.isMap,ef=ja?Vi(ja):tf,nf="[object Set]";function rf(r){return hn(r)&&qe(r)==nf}var Ba=mr&&mr.isSet,sf=Ba?Vi(Ba):rf,af=1,Jl="[object Arguments]",lf="[object Array]",of="[object Boolean]",cf="[object Date]",uf="[object Error]",Ql="[object Function]",hf="[object GeneratorFunction]",df="[object Map]",ff="[object Number]",to="[object Object]",pf="[object RegExp]",gf="[object Set]",mf="[object String]",bf="[object Symbol]",yf="[object WeakMap]",vf="[object ArrayBuffer]",Ef="[object DataView]",wf="[object Float32Array]",xf="[object Float64Array]",Af="[object Int8Array]",Tf="[object Int16Array]",Nf="[object Int32Array]",Sf="[object Uint8Array]",_f="[object Uint8ClampedArray]",Cf="[object Uint16Array]",Lf="[object Uint32Array]",Tt={};Tt[Jl]=Tt[lf]=Tt[vf]=Tt[Ef]=Tt[of]=Tt[cf]=Tt[wf]=Tt[xf]=Tt[Af]=Tt[Tf]=Tt[Nf]=Tt[df]=Tt[ff]=Tt[to]=Tt[pf]=Tt[gf]=Tt[mf]=Tt[bf]=Tt[Sf]=Tt[_f]=Tt[Cf]=Tt[Lf]=!0;Tt[uf]=Tt[Ql]=Tt[yf]=!1;function Ns(r,t,e,n,s,i){var l,o=t&af;if(l!==void 0)return l;if(!Rn(r))return r;var c=zn(r);if(c)l=Cd(r);else{var h=qe(r),p=h==Ql||h==hf;if(Kr(r))return Zl(r,o);if(h==to||h==Jl||p&&!s)l=p?{}:Xl(r);else{if(!Tt[h])return s?r:{};l=Jd(r,h,o)}}i||(i=new We);var b=i.get(r);if(b)return b;i.set(r,l),sf(r)?r.forEach(function(y){l.add(Ns(y,t,e,y,r,i))}):ef(r)&&r.forEach(function(y,w){l.set(w,Ns(y,t,e,w,r,i))});var d=yi,m=c?void 0:d(r);return Cu(m||r,function(y,w){m&&(w=y,y=r[w]),Bl(l,w,Ns(y,t,e,w,r,i))}),l}var Of=1,qf=4;function fr(r){return Ns(r,Of|qf)}var If="__lodash_hash_undefined__";function Rf(r){return this.__data__.set(r,If),this}function kf(r){return this.__data__.has(r)}function Rs(r){var t=-1,e=r==null?0:r.length;for(this.__data__=new Zn;++t<e;)this.add(r[t])}Rs.prototype.add=Rs.prototype.push=Rf;Rs.prototype.has=kf;function Mf(r,t){for(var e=-1,n=r==null?0:r.length;++e<n;)if(t(r[e],e,r))return!0;return!1}function Df(r,t){return r.has(t)}var jf=1,Bf=2;function eo(r,t,e,n,s,i){var l=e&jf,o=r.length,c=t.length;if(o!=c&&!(l&&c>o))return!1;var h=i.get(r),p=i.get(t);if(h&&p)return h==t&&p==r;var b=-1,d=!0,m=e&Bf?new Rs:void 0;for(i.set(r,t),i.set(t,r);++b<o;){var y=r[b],w=t[b];if(n)var A=l?n(w,y,b,t,r,i):n(y,w,b,r,t,i);if(A!==void 0){if(A)continue;d=!1;break}if(m){if(!Mf(t,function(_,O){if(!Df(m,O)&&(y===_||s(y,_,e,n,i)))return m.push(O)})){d=!1;break}}else if(!(y===w||s(y,w,e,n,i))){d=!1;break}}return i.delete(r),i.delete(t),d}function Pf(r){var t=-1,e=Array(r.size);return r.forEach(function(n,s){e[++t]=[s,n]}),e}function $f(r){var t=-1,e=Array(r.size);return r.forEach(function(n){e[++t]=n}),e}var Uf=1,Ff=2,Hf="[object Boolean]",zf="[object Date]",Vf="[object Error]",Kf="[object Map]",Gf="[object Number]",Wf="[object RegExp]",Zf="[object Set]",Yf="[object String]",Xf="[object Symbol]",Jf="[object ArrayBuffer]",Qf="[object DataView]",Pa=In?In.prototype:void 0,ti=Pa?Pa.valueOf:void 0;function tp(r,t,e,n,s,i,l){switch(e){case Qf:if(r.byteLength!=t.byteLength||r.byteOffset!=t.byteOffset)return!1;r=r.buffer,t=t.buffer;case Jf:return!(r.byteLength!=t.byteLength||!i(new Is(r),new Is(t)));case Hf:case zf:case Gf:return Qr(+r,+t);case Vf:return r.name==t.name&&r.message==t.message;case Wf:case Yf:return r==t+"";case Kf:var o=Pf;case Zf:var c=n&Uf;if(o||(o=$f),r.size!=t.size&&!c)return!1;var h=l.get(r);if(h)return h==t;n|=Ff,l.set(r,t);var p=eo(o(r),o(t),n,s,i,l);return l.delete(r),p;case Xf:if(ti)return ti.call(r)==ti.call(t)}return!1}var ep=1,np=Object.prototype,rp=np.hasOwnProperty;function sp(r,t,e,n,s,i){var l=e&ep,o=yi(r),c=o.length,h=yi(t),p=h.length;if(c!=p&&!l)return!1;for(var b=c;b--;){var d=o[b];if(!(l?d in t:rp.call(t,d)))return!1}var m=i.get(r),y=i.get(t);if(m&&y)return m==t&&y==r;var w=!0;i.set(r,t),i.set(t,r);for(var A=l;++b<c;){d=o[b];var _=r[d],O=t[d];if(n)var M=l?n(O,_,d,t,r,i):n(_,O,d,r,t,i);if(!(M===void 0?_===O||s(_,O,e,n,i):M)){w=!1;break}A||(A=d=="constructor")}if(w&&!A){var z=r.constructor,U=t.constructor;z!=U&&"constructor"in r&&"constructor"in t&&!(typeof z=="function"&&z instanceof z&&typeof U=="function"&&U instanceof U)&&(w=!1)}return i.delete(r),i.delete(t),w}var ip=1,$a="[object Arguments]",Ua="[object Array]",ds="[object Object]",ap=Object.prototype,Fa=ap.hasOwnProperty;function lp(r,t,e,n,s,i){var l=zn(r),o=zn(t),c=l?Ua:qe(r),h=o?Ua:qe(t);c=c==$a?ds:c,h=h==$a?ds:h;var p=c==ds,b=h==ds,d=c==h;if(d&&Kr(r)){if(!Kr(t))return!1;l=!0,p=!1}if(d&&!p)return i||(i=new We),l||Ki(r)?eo(r,t,e,n,s,i):tp(r,t,c,e,n,s,i);if(!(e&ip)){var m=p&&Fa.call(r,"__wrapped__"),y=b&&Fa.call(t,"__wrapped__");if(m||y){var w=m?r.value():r,A=y?t.value():t;return i||(i=new We),s(w,A,e,n,i)}}return d?(i||(i=new We),sp(r,t,e,n,s,i)):!1}function no(r,t,e,n,s){return r===t?!0:r==null||t==null||!hn(r)&&!hn(t)?r!==r&&t!==t:lp(r,t,e,n,no,s)}function op(r){return function(t,e,n){for(var s=-1,i=Object(t),l=n(t),o=l.length;o--;){var c=l[++s];if(e(i[c],c,i)===!1)break}return t}}var cp=op();function xi(r,t,e){(e!==void 0&&!Qr(r[t],e)||e===void 0&&!(t in r))&&Hi(r,t,e)}function up(r){return hn(r)&&Ds(r)}function Ai(r,t){if(!(t==="constructor"&&typeof r[t]=="function")&&t!="__proto__")return r[t]}function hp(r){return Ru(r,Vl(r))}function dp(r,t,e,n,s,i,l){var o=Ai(r,e),c=Ai(t,e),h=l.get(c);if(h){xi(r,e,h);return}var p=i?i(o,c,e+"",r,t,l):void 0,b=p===void 0;if(b){var d=zn(c),m=!d&&Kr(c),y=!d&&!m&&Ki(c);p=c,d||m||y?zn(o)?p=o:up(o)?p=Eu(o):m?(b=!1,p=Zl(c,!0)):y?(b=!1,p=Yl(c,!0)):p=[]:ad(c)||bi(c)?(p=o,bi(o)?p=hp(o):(!Rn(o)||Fi(o))&&(p=Xl(c))):b=!1}b&&(l.set(c,p),s(p,c,n,i,l),l.delete(c)),xi(r,e,p)}function ro(r,t,e,n,s){r!==t&&cp(t,function(i,l){if(s||(s=new We),Rn(i))dp(r,t,l,e,ro,n,s);else{var o=n?n(Ai(r,l),i,l+"",r,t,s):void 0;o===void 0&&(o=i),xi(r,l,o)}},Vl)}function Cn(r,t){return no(r,t)}var qn=Bu(function(r,t,e){ro(r,t,e)}),V=(r=>(r[r.TYPE=3]="TYPE",r[r.LEVEL=12]="LEVEL",r[r.ATTRIBUTE=13]="ATTRIBUTE",r[r.BLOT=14]="BLOT",r[r.INLINE=7]="INLINE",r[r.BLOCK=11]="BLOCK",r[r.BLOCK_BLOT=10]="BLOCK_BLOT",r[r.INLINE_BLOT=6]="INLINE_BLOT",r[r.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",r[r.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",r[r.ANY=15]="ANY",r))(V||{});class Ye{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const s=V.TYPE&V.ATTRIBUTE;this.scope=n.scope!=null?n.scope&V.LEVEL|s:V.ATTRIBUTE,n.whitelist!=null&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map(e=>e.name)}add(t,e){return this.canAdd(t,e)?(t.setAttribute(this.keyName,e),!0):!1}canAdd(t,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class pr extends Error{constructor(t){t="[Parchment] "+t,super(t),this.message=t,this.name=this.constructor.name}}const so=class Ti{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(t==null)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(t,e,n){const s=this.query(e);if(s==null)throw new pr(`Unable to create ${e} blot`);const i=s,l=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:i.create(n),o=new i(t,l,n);return Ti.blots.set(o.domNode,o),o}find(t,e=!1){return Ti.find(t,e)}query(t,e=V.ANY){let n;return typeof t=="string"?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:typeof t=="number"?t&V.LEVEL&V.BLOCK?n=this.types.block:t&V.LEVEL&V.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some(s=>(n=this.classes[s],!!n)),n=n||this.tags[t.tagName]),n==null?null:"scope"in n&&e&V.LEVEL&n.scope&&e&V.TYPE&n.scope?n:null}register(...t){return t.map(e=>{const n="blotName"in e,s="attrName"in e;if(!n&&!s)throw new pr("Invalid definition");if(n&&e.blotName==="abstract")throw new pr("Cannot register abstract class");const i=n?e.blotName:s?e.attrName:void 0;return this.types[i]=e,s?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):n&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(l=>l.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(l=>{(this.tags[l]==null||e.className==null)&&(this.tags[l]=e)}))),e})}};so.blots=new WeakMap;let br=so;function Ha(r,t){return(r.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${t}-`)===0)}class fp extends Ye{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(t,e){return this.canAdd(t,e)?(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0):!1}remove(t){Ha(t,this.keyName).forEach(e=>{t.classList.remove(e)}),t.classList.length===0&&t.removeAttribute("class")}value(t){const e=(Ha(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}}const De=fp;function ei(r){const t=r.split("-"),e=t.slice(1).map(n=>n[0].toUpperCase()+n.slice(1)).join("");return t[0]+e}class pp extends Ye{static keys(t){return(t.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(t,e){return this.canAdd(t,e)?(t.style[ei(this.keyName)]=e,!0):!1}remove(t){t.style[ei(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[ei(this.keyName)];return this.canAdd(t,e)?e:""}}const kn=pp;class gp{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(t.value(this.domNode)!=null?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=br.find(this.domNode);if(t==null)return;const e=Ye.keys(this.domNode),n=De.keys(this.domNode),s=kn.keys(this.domNode);e.concat(n).concat(s).forEach(i=>{const l=t.scroll.query(i,V.ATTRIBUTE);l instanceof Ye&&(this.attributes[l.attrName]=l)})}copy(t){Object.keys(this.attributes).forEach(e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)})}move(t){this.copy(t),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t),{})}}const Ps=gp,io=class{constructor(t,e){this.scroll=t,this.domNode=e,br.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(this.tagName==null)throw new pr("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?(typeof t=="string"?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):typeof t=="number"&&(n=t),typeof n=="number"?e=document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?e=document.createElement(n):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){this.parent!=null&&this.parent.removeChild(this),br.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,s){const i=this.isolate(t,e);if(this.scroll.query(n,V.BLOT)!=null&&s)i.wrap(n,s);else if(this.scroll.query(n,V.ATTRIBUTE)!=null){const l=this.scroll.create(this.statics.scope);i.wrap(l),l.format(n,s)}}insertAt(t,e,n){const s=n==null?this.scroll.create("text",e):this.scroll.create(e,n),i=this.split(t);this.parent.insertBefore(s,i||void 0)}isolate(t,e){const n=this.split(t);if(n==null)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return this.parent==null||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return this.parent!=null&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return t===0?this:this.next}update(t,e){}wrap(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;if(this.parent!=null&&this.parent.insertBefore(n,this.next||void 0),typeof n.appendChild!="function")throw new pr(`Cannot wrap ${t}`);return n.appendChild(this),n}};io.blotName="abstract";let ao=io;const lo=class extends ao{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};lo.scope=V.INLINE_BLOT;let mp=lo;const Wt=mp;class bp{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),s=0;for(;n;){if(n===t)return s;s+=1,n=e()}return-1}insertBefore(t,e){t!=null&&(this.remove(t),t.next=e,e!=null?(t.prev=e.prev,e.prev!=null&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):this.tail!=null?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;n!=null;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(t.prev!=null&&(t.prev.next=t.next),t.next!=null&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return t!=null&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let s=n();for(;s;){const i=s.length();if(t<i||e&&t===i&&(s.next==null||s.next.length()!==0))return[s,t];t-=i,s=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[s,i]=this.find(t);let l=t-i;const o=this.iterator(s);let c=o();for(;c&&l<t+e;){const h=c.length();t>l?n(c,t-l,Math.min(e,l+h-t)):n(c,0,Math.min(h,t+e-l)),l+=h,c=o()}}map(t){return this.reduce((e,n)=>(e.push(t(n)),e),[])}reduce(t,e){const n=this.iterator();let s=n();for(;s;)e=t(e,s),s=n();return e}}function za(r,t){const e=t.find(r);if(e)return e;try{return t.create(r)}catch{const n=t.create(V.INLINE);return Array.from(r.childNodes).forEach(s=>{n.domNode.appendChild(s)}),r.parentNode&&r.parentNode.replaceChild(n.domNode,r),n.attach(),n}}const oo=class Sn extends ao{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach(t=>{t.attach()})}attachUI(t){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=t,Sn.uiClass&&this.uiNode.classList.add(Sn.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new bp,Array.from(this.domNode.childNodes).filter(t=>t!==this.uiNode).reverse().forEach(t=>{try{const e=za(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof pr)return;throw e}})}deleteAt(t,e){if(t===0&&e===this.length())return this.remove();this.children.forEachAt(t,e,(n,s,i)=>{n.deleteAt(s,i)})}descendant(t,e=0){const[n,s]=this.children.find(e);return t.blotName==null&&t(n)||t.blotName!=null&&n instanceof t?[n,s]:n instanceof Sn?n.descendant(t,s):[null,-1]}descendants(t,e=0,n=Number.MAX_VALUE){let s=[],i=n;return this.children.forEachAt(e,n,(l,o,c)=>{(t.blotName==null&&t(l)||t.blotName!=null&&l instanceof t)&&s.push(l),l instanceof Sn&&(s=s.concat(l.descendants(t,o,i))),i-=c}),s}detach(){this.children.forEach(t=>{t.detach()}),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach(e=>{t||this.statics.allowedChildren.some(n=>e instanceof n)||(e.statics.scope===V.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof Sn?e.unwrap():e.remove())})}formatAt(t,e,n,s){this.children.forEachAt(t,e,(i,l,o)=>{i.formatAt(l,o,n,s)})}insertAt(t,e,n){const[s,i]=this.children.find(t);if(s)s.insertAt(i,e,n);else{const l=n==null?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(l)}}insertBefore(t,e){t.parent!=null&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,e!=null&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce((t,e)=>t+e.length(),0)}moveChildren(t,e){this.children.forEach(n=>{t.insertBefore(n,e)})}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(t,e=!1){const[n,s]=this.children.find(t,e),i=[[this,t]];return n instanceof Sn?i.concat(n.path(s,e)):(n!=null&&i.push([n,s]),i)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const n=typeof t=="string"?this.scroll.create(t,e):t;return n instanceof Sn&&this.moveChildren(n),super.replaceWith(n)}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(s,i,l)=>{const o=s.split(i,e);o!=null&&n.appendChild(o)}),n}splitAfter(t){const e=this.clone();for(;t.next!=null;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],s=[];t.forEach(i=>{i.target===this.domNode&&i.type==="childList"&&(n.push(...i.addedNodes),s.push(...i.removedNodes))}),s.forEach(i=>{if(i.parentNode!=null&&i.tagName!=="IFRAME"&&document.body.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const l=this.scroll.find(i);l!=null&&(l.domNode.parentNode==null||l.domNode.parentNode===this.domNode)&&l.detach()}),n.filter(i=>i.parentNode===this.domNode&&i!==this.uiNode).sort((i,l)=>i===l?0:i.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(i=>{let l=null;i.nextSibling!=null&&(l=this.scroll.find(i.nextSibling));const o=za(i,this.scroll);(o.next!==l||o.next==null)&&(o.parent!=null&&o.parent.removeChild(this),this.insertBefore(o,l||void 0))}),this.enforceAllowedChildren()}};oo.uiClass="";let yp=oo;const Re=yp;function vp(r,t){if(Object.keys(r).length!==Object.keys(t).length)return!1;for(const e in r)if(r[e]!==t[e])return!1;return!0}const lr=class or extends Re{static create(t){return super.create(t)}static formats(t,e){const n=e.query(or.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ps(this.domNode)}format(t,e){if(t===this.statics.blotName&&!e)this.children.forEach(n=>{n instanceof or||(n=n.wrap(or.blotName,!0)),this.attributes.copy(n)}),this.unwrap();else{const n=this.scroll.query(t,V.INLINE);if(n==null)return;n instanceof Ye?this.attributes.attribute(n,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.formats()[n]!=null||this.scroll.query(n,V.ATTRIBUTE)?this.isolate(t,e).format(n,s):super.formatAt(t,e,n,s)}optimize(t){super.optimize(t);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const n=this.next;n instanceof or&&n.prev===this&&vp(e,n.formats())&&(n.moveChildren(this),n.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}wrap(t,e){const n=super.wrap(t,e);return n instanceof or&&this.attributes.move(n),n}};lr.allowedChildren=[lr,Wt],lr.blotName="inline",lr.scope=V.INLINE_BLOT,lr.tagName="SPAN";let Ep=lr;const Wi=Ep,cr=class Ni extends Re{static create(t){return super.create(t)}static formats(t,e){const n=e.query(Ni.blotName);if(!(n!=null&&t.tagName===n.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new Ps(this.domNode)}format(t,e){const n=this.scroll.query(t,V.BLOCK);n!=null&&(n instanceof Ye?this.attributes.attribute(n,e):t===this.statics.blotName&&!e?this.replaceWith(Ni.blotName):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,s){this.scroll.query(n,V.BLOCK)!=null?this.format(n,s):super.formatAt(t,e,n,s)}insertAt(t,e,n){if(n==null||this.scroll.query(e,V.INLINE)!=null)super.insertAt(t,e,n);else{const s=this.split(t);if(s!=null){const i=this.scroll.create(e,n);s.parent.insertBefore(i,s)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some(n=>n.target===this.domNode&&n.type==="attributes")&&this.attributes.build()}};cr.blotName="block",cr.scope=V.BLOCK_BLOT,cr.tagName="P",cr.allowedChildren=[Wi,cr,Wt];let wp=cr;const Zr=wp,Si=class extends Re{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Si.blotName="container",Si.scope=V.BLOCK_BLOT;let xp=Si;const $s=xp;class Ap extends Wt{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,s){t===0&&e===this.length()?this.format(n,s):super.formatAt(t,e,n,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const de=Ap,Tp={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Np=100,ur=class extends Re{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver(n=>{this.update(n)}),this.observer.observe(this.domNode,Tp),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=V.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),t===0&&e===this.length()?this.children.forEach(n=>{n.remove()}):super.deleteAt(t,e)}formatAt(t,e,n,s){this.update(),super.formatAt(t,e,n,s)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());const i=(c,h=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(n.has(c.domNode)||n.set(c.domNode,[]),h&&i(c.parent))},l=c=>{n.has(c.domNode)&&(c instanceof Re&&c.children.forEach(l),n.delete(c.domNode),c.optimize(e))};let o=t;for(let c=0;o.length>0;c+=1){if(c>=Np)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach(h=>{const p=this.find(h.target,!0);p!=null&&(p.domNode===h.target&&(h.type==="childList"?(i(this.find(h.previousSibling,!1)),Array.from(h.addedNodes).forEach(b=>{const d=this.find(b,!1);i(d,!1),d instanceof Re&&d.children.forEach(m=>{i(m,!1)})})):h.type==="attributes"&&i(p.prev)),i(p))}),this.children.forEach(l),o=Array.from(this.observer.takeRecords()),s=o.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map(s=>{const i=this.find(s.target,!0);return i==null?null:n.has(i.domNode)?(n.get(i.domNode).push(s),null):(n.set(i.domNode,[s]),i)}).forEach(s=>{s!=null&&s!==this&&n.has(s.domNode)&&s.update(n.get(s.domNode)||[],e)}),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};ur.blotName="scroll",ur.defaultChild=Zr,ur.allowedChildren=[Zr,$s],ur.scope=V.BLOCK_BLOT,ur.tagName="DIV";let Sp=ur;const Zi=Sp,_i=class co extends Wt{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){n==null?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof co&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(t===0)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some(n=>n.type==="characterData"&&n.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};_i.blotName="text",_i.scope=V.INLINE_BLOT;let _p=_i;const ks=_p,Cp=Object.freeze(Object.defineProperty({__proto__:null,Attributor:Ye,AttributorStore:Ps,BlockBlot:Zr,ClassAttributor:De,ContainerBlot:$s,EmbedBlot:de,InlineBlot:Wi,LeafBlot:Wt,ParentBlot:Re,Registry:br,Scope:V,ScrollBlot:Zi,StyleAttributor:kn,TextBlot:ks},Symbol.toStringTag,{value:"Module"}));var fs={exports:{}},ni,Va;function Lp(){if(Va)return ni;Va=1;var r=-1,t=1,e=0;function n(f,C,v,I,N){if(f===C)return f?[[e,f]]:[];if(v!=null){var S=St(f,C,v);if(S)return S}var q=o(f,C),j=f.substring(0,q);f=f.substring(q),C=C.substring(q),q=h(f,C);var D=f.substring(f.length-q);f=f.substring(0,f.length-q),C=C.substring(0,C.length-q);var k=s(f,C);return j&&k.unshift([e,j]),D&&k.push([e,D]),O(k,N),I&&b(k),k}function s(f,C){var v;if(!f)return[[t,C]];if(!C)return[[r,f]];var I=f.length>C.length?f:C,N=f.length>C.length?C:f,S=I.indexOf(N);if(S!==-1)return v=[[t,I.substring(0,S)],[e,N],[t,I.substring(S+N.length)]],f.length>C.length&&(v[0][0]=v[2][0]=r),v;if(N.length===1)return[[r,f],[t,C]];var q=p(f,C);if(q){var j=q[0],D=q[1],k=q[2],X=q[3],W=q[4],et=n(j,k),nt=n(D,X);return et.concat([[e,W]],nt)}return i(f,C)}function i(f,C){for(var v=f.length,I=C.length,N=Math.ceil((v+I)/2),S=N,q=2*N,j=new Array(q),D=new Array(q),k=0;k<q;k++)j[k]=-1,D[k]=-1;j[S+1]=0,D[S+1]=0;for(var X=v-I,W=X%2!==0,et=0,nt=0,P=0,ht=0,pt=0;pt<N;pt++){for(var Q=-pt+et;Q<=pt-nt;Q+=2){var ct=S+Q,lt;Q===-pt||Q!==pt&&j[ct-1]<j[ct+1]?lt=j[ct+1]:lt=j[ct-1]+1;for(var tt=lt-Q;lt<v&&tt<I&&f.charAt(lt)===C.charAt(tt);)lt++,tt++;if(j[ct]=lt,lt>v)nt+=2;else if(tt>I)et+=2;else if(W){var it=S+X-Q;if(it>=0&&it<q&&D[it]!==-1){var at=v-D[it];if(lt>=at)return l(f,C,lt,tt)}}}for(var Et=-pt+P;Et<=pt-ht;Et+=2){var it=S+Et,at;Et===-pt||Et!==pt&&D[it-1]<D[it+1]?at=D[it+1]:at=D[it-1]+1;for(var xt=at-Et;at<v&&xt<I&&f.charAt(v-at-1)===C.charAt(I-xt-1);)at++,xt++;if(D[it]=at,at>v)ht+=2;else if(xt>I)P+=2;else if(!W){var ct=S+X-Et;if(ct>=0&&ct<q&&j[ct]!==-1){var lt=j[ct],tt=S+lt-ct;if(at=v-at,lt>=at)return l(f,C,lt,tt)}}}}return[[r,f],[t,C]]}function l(f,C,v,I){var N=f.substring(0,v),S=C.substring(0,I),q=f.substring(v),j=C.substring(I),D=n(N,S),k=n(q,j);return D.concat(k)}function o(f,C){if(!f||!C||f.charAt(0)!==C.charAt(0))return 0;for(var v=0,I=Math.min(f.length,C.length),N=I,S=0;v<N;)f.substring(S,N)==C.substring(S,N)?(v=N,S=v):I=N,N=Math.floor((I-v)/2+v);return M(f.charCodeAt(N-1))&&N--,N}function c(f,C){var v=f.length,I=C.length;if(v==0||I==0)return 0;v>I?f=f.substring(v-I):v<I&&(C=C.substring(0,v));var N=Math.min(v,I);if(f==C)return N;for(var S=0,q=1;;){var j=f.substring(N-q),D=C.indexOf(j);if(D==-1)return S;q+=D,(D==0||f.substring(N-q)==C.substring(0,q))&&(S=q,q++)}}function h(f,C){if(!f||!C||f.slice(-1)!==C.slice(-1))return 0;for(var v=0,I=Math.min(f.length,C.length),N=I,S=0;v<N;)f.substring(f.length-N,f.length-S)==C.substring(C.length-N,C.length-S)?(v=N,S=v):I=N,N=Math.floor((I-v)/2+v);return z(f.charCodeAt(f.length-N))&&N--,N}function p(f,C){var v=f.length>C.length?f:C,I=f.length>C.length?C:f;if(v.length<4||I.length*2<v.length)return null;function N(nt,P,ht){for(var pt=nt.substring(ht,ht+Math.floor(nt.length/4)),Q=-1,ct="",lt,tt,it,at;(Q=P.indexOf(pt,Q+1))!==-1;){var Et=o(nt.substring(ht),P.substring(Q)),xt=h(nt.substring(0,ht),P.substring(0,Q));ct.length<xt+Et&&(ct=P.substring(Q-xt,Q)+P.substring(Q,Q+Et),lt=nt.substring(0,ht-xt),tt=nt.substring(ht+Et),it=P.substring(0,Q-xt),at=P.substring(Q+Et))}return ct.length*2>=nt.length?[lt,tt,it,at,ct]:null}var S=N(v,I,Math.ceil(v.length/4)),q=N(v,I,Math.ceil(v.length/2)),j;if(!S&&!q)return null;q?S?j=S[4].length>q[4].length?S:q:j=q:j=S;var D,k,X,W;f.length>C.length?(D=j[0],k=j[1],X=j[2],W=j[3]):(X=j[0],W=j[1],D=j[2],k=j[3]);var et=j[4];return[D,k,X,W,et]}function b(f){for(var C=!1,v=[],I=0,N=null,S=0,q=0,j=0,D=0,k=0;S<f.length;)f[S][0]==e?(v[I++]=S,q=D,j=k,D=0,k=0,N=f[S][1]):(f[S][0]==t?D+=f[S][1].length:k+=f[S][1].length,N&&N.length<=Math.max(q,j)&&N.length<=Math.max(D,k)&&(f.splice(v[I-1],0,[r,N]),f[v[I-1]+1][0]=t,I--,I--,S=I>0?v[I-1]:-1,q=0,j=0,D=0,k=0,N=null,C=!0)),S++;for(C&&O(f),_(f),S=1;S<f.length;){if(f[S-1][0]==r&&f[S][0]==t){var X=f[S-1][1],W=f[S][1],et=c(X,W),nt=c(W,X);et>=nt?(et>=X.length/2||et>=W.length/2)&&(f.splice(S,0,[e,W.substring(0,et)]),f[S-1][1]=X.substring(0,X.length-et),f[S+1][1]=W.substring(et),S++):(nt>=X.length/2||nt>=W.length/2)&&(f.splice(S,0,[e,X.substring(0,nt)]),f[S-1][0]=t,f[S-1][1]=W.substring(0,W.length-nt),f[S+1][0]=r,f[S+1][1]=X.substring(nt),S++),S++}S++}}var d=/[^a-zA-Z0-9]/,m=/\s/,y=/[\r\n]/,w=/\n\r?\n$/,A=/^\r?\n\r?\n/;function _(f){function C(nt,P){if(!nt||!P)return 6;var ht=nt.charAt(nt.length-1),pt=P.charAt(0),Q=ht.match(d),ct=pt.match(d),lt=Q&&ht.match(m),tt=ct&&pt.match(m),it=lt&&ht.match(y),at=tt&&pt.match(y),Et=it&&nt.match(w),xt=at&&P.match(A);return Et||xt?5:it||at?4:Q&&!lt&&tt?3:lt||tt?2:Q||ct?1:0}for(var v=1;v<f.length-1;){if(f[v-1][0]==e&&f[v+1][0]==e){var I=f[v-1][1],N=f[v][1],S=f[v+1][1],q=h(I,N);if(q){var j=N.substring(N.length-q);I=I.substring(0,I.length-q),N=j+N.substring(0,N.length-q),S=j+S}for(var D=I,k=N,X=S,W=C(I,N)+C(N,S);N.charAt(0)===S.charAt(0);){I+=N.charAt(0),N=N.substring(1)+S.charAt(0),S=S.substring(1);var et=C(I,N)+C(N,S);et>=W&&(W=et,D=I,k=N,X=S)}f[v-1][1]!=D&&(D?f[v-1][1]=D:(f.splice(v-1,1),v--),f[v][1]=k,X?f[v+1][1]=X:(f.splice(v+1,1),v--))}v++}}function O(f,C){f.push([e,""]);for(var v=0,I=0,N=0,S="",q="",j;v<f.length;){if(v<f.length-1&&!f[v][1]){f.splice(v,1);continue}switch(f[v][0]){case t:N++,q+=f[v][1],v++;break;case r:I++,S+=f[v][1],v++;break;case e:var D=v-N-I-1;if(C){if(D>=0&&ot(f[D][1])){var k=f[D][1].slice(-1);if(f[D][1]=f[D][1].slice(0,-1),S=k+S,q=k+q,!f[D][1]){f.splice(D,1),v--;var X=D-1;f[X]&&f[X][0]===t&&(N++,q=f[X][1]+q,X--),f[X]&&f[X][0]===r&&(I++,S=f[X][1]+S,X--),D=X}}if(U(f[v][1])){var k=f[v][1].charAt(0);f[v][1]=f[v][1].slice(1),S+=k,q+=k}}if(v<f.length-1&&!f[v][1]){f.splice(v,1);break}if(S.length>0||q.length>0){S.length>0&&q.length>0&&(j=o(q,S),j!==0&&(D>=0?f[D][1]+=q.substring(0,j):(f.splice(0,0,[e,q.substring(0,j)]),v++),q=q.substring(j),S=S.substring(j)),j=h(q,S),j!==0&&(f[v][1]=q.substring(q.length-j)+f[v][1],q=q.substring(0,q.length-j),S=S.substring(0,S.length-j)));var W=N+I;S.length===0&&q.length===0?(f.splice(v-W,W),v=v-W):S.length===0?(f.splice(v-W,W,[t,q]),v=v-W+1):q.length===0?(f.splice(v-W,W,[r,S]),v=v-W+1):(f.splice(v-W,W,[r,S],[t,q]),v=v-W+2)}v!==0&&f[v-1][0]===e?(f[v-1][1]+=f[v][1],f.splice(v,1)):v++,N=0,I=0,S="",q="";break}}f[f.length-1][1]===""&&f.pop();var et=!1;for(v=1;v<f.length-1;)f[v-1][0]===e&&f[v+1][0]===e&&(f[v][1].substring(f[v][1].length-f[v-1][1].length)===f[v-1][1]?(f[v][1]=f[v-1][1]+f[v][1].substring(0,f[v][1].length-f[v-1][1].length),f[v+1][1]=f[v-1][1]+f[v+1][1],f.splice(v-1,1),et=!0):f[v][1].substring(0,f[v+1][1].length)==f[v+1][1]&&(f[v-1][1]+=f[v+1][1],f[v][1]=f[v][1].substring(f[v+1][1].length)+f[v+1][1],f.splice(v+1,1),et=!0)),v++;et&&O(f,C)}function M(f){return f>=55296&&f<=56319}function z(f){return f>=56320&&f<=57343}function U(f){return z(f.charCodeAt(0))}function ot(f){return M(f.charCodeAt(f.length-1))}function mt(f){for(var C=[],v=0;v<f.length;v++)f[v][1].length>0&&C.push(f[v]);return C}function bt(f,C,v,I){return ot(f)||U(I)?null:mt([[e,f],[r,C],[t,v],[e,I]])}function St(f,C,v){var I=typeof v=="number"?{index:v,length:0}:v.oldRange,N=typeof v=="number"?null:v.newRange,S=f.length,q=C.length;if(I.length===0&&(N===null||N.length===0)){var j=I.index,D=f.slice(0,j),k=f.slice(j),X=N?N.index:null;t:{var W=j+q-S;if(X!==null&&X!==W||W<0||W>q)break t;var et=C.slice(0,W),nt=C.slice(W);if(nt!==k)break t;var P=Math.min(j,W),ht=D.slice(0,P),pt=et.slice(0,P);if(ht!==pt)break t;var Q=D.slice(P),ct=et.slice(P);return bt(ht,Q,ct,k)}t:{if(X!==null&&X!==j)break t;var lt=j,et=C.slice(0,lt),nt=C.slice(lt);if(et!==D)break t;var tt=Math.min(S-lt,q-lt),it=k.slice(k.length-tt),at=nt.slice(nt.length-tt);if(it!==at)break t;var Q=k.slice(0,k.length-tt),ct=nt.slice(0,nt.length-tt);return bt(D,Q,ct,it)}}if(I.length>0&&N&&N.length===0)t:{var ht=f.slice(0,I.index),it=f.slice(I.index+I.length),P=ht.length,tt=it.length;if(q<P+tt)break t;var pt=C.slice(0,P),at=C.slice(q-tt);if(ht!==pt||it!==at)break t;var Q=f.slice(P,S-tt),ct=C.slice(P,q-tt);return bt(ht,Q,ct,it)}return null}function Ct(f,C,v,I){return n(f,C,v,I,!0)}return Ct.INSERT=t,Ct.DELETE=r,Ct.EQUAL=e,ni=Ct,ni}var Pr={exports:{}};Pr.exports;var Ka;function uo(){return Ka||(Ka=1,(function(r,t){var e=200,n="__lodash_hash_undefined__",s=9007199254740991,i="[object Arguments]",l="[object Array]",o="[object Boolean]",c="[object Date]",h="[object Error]",p="[object Function]",b="[object GeneratorFunction]",d="[object Map]",m="[object Number]",y="[object Object]",w="[object Promise]",A="[object RegExp]",_="[object Set]",O="[object String]",M="[object Symbol]",z="[object WeakMap]",U="[object ArrayBuffer]",ot="[object DataView]",mt="[object Float32Array]",bt="[object Float64Array]",St="[object Int8Array]",Ct="[object Int16Array]",f="[object Int32Array]",C="[object Uint8Array]",v="[object Uint8ClampedArray]",I="[object Uint16Array]",N="[object Uint32Array]",S=/[\\^$.*+?()[\]{}|]/g,q=/\w*$/,j=/^\[object .+?Constructor\]$/,D=/^(?:0|[1-9]\d*)$/,k={};k[i]=k[l]=k[U]=k[ot]=k[o]=k[c]=k[mt]=k[bt]=k[St]=k[Ct]=k[f]=k[d]=k[m]=k[y]=k[A]=k[_]=k[O]=k[M]=k[C]=k[v]=k[I]=k[N]=!0,k[h]=k[p]=k[z]=!1;var X=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,W=typeof self=="object"&&self&&self.Object===Object&&self,et=X||W||Function("return this")(),nt=t&&!t.nodeType&&t,P=nt&&!0&&r&&!r.nodeType&&r,ht=P&&P.exports===nt;function pt(a,u){return a.set(u[0],u[1]),a}function Q(a,u){return a.add(u),a}function ct(a,u){for(var g=-1,x=a?a.length:0;++g<x&&u(a[g],g,a)!==!1;);return a}function lt(a,u){for(var g=-1,x=u.length,st=a.length;++g<x;)a[st+g]=u[g];return a}function tt(a,u,g,x){for(var st=-1,G=a?a.length:0;++st<G;)g=u(g,a[st],st,a);return g}function it(a,u){for(var g=-1,x=Array(a);++g<a;)x[g]=u(g);return x}function at(a,u){return a==null?void 0:a[u]}function Et(a){var u=!1;if(a!=null&&typeof a.toString!="function")try{u=!!(a+"")}catch{}return u}function xt(a){var u=-1,g=Array(a.size);return a.forEach(function(x,st){g[++u]=[st,x]}),g}function Yt(a,u){return function(g){return a(u(g))}}function Mt(a){var u=-1,g=Array(a.size);return a.forEach(function(x){g[++u]=x}),g}var wt=Array.prototype,te=Function.prototype,Lt=Object.prototype,ie=et["__core-js_shared__"],ee=(function(){var a=/[^.]+$/.exec(ie&&ie.keys&&ie.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})(),Pe=te.toString,Ft=Lt.hasOwnProperty,$e=Lt.toString,Mn=RegExp("^"+Pe.call(Ft).replace(S,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ae=ht?et.Buffer:void 0,Ue=et.Symbol,Je=et.Uint8Array,jt=Yt(Object.getPrototypeOf,Object),mn=Object.create,bn=Lt.propertyIsEnumerable,Dn=wt.splice,Qe=Object.getOwnPropertySymbols,Xt=ae?ae.isBuffer:void 0,fe=Yt(Object.keys,Object),ne=ue(et,"DataView"),Ae=ue(et,"Map"),Bt=ue(et,"Promise"),Te=ue(et,"Set"),Jt=ue(et,"WeakMap"),le=ue(Object,"create"),Ne=dt(ne),Ht=dt(Ae),Se=dt(Bt),Pt=dt(Te),Fe=dt(Jt),E=Ue?Ue.prototype:void 0,K=E?E.valueOf:void 0;function yt(a){var u=-1,g=a?a.length:0;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function Z(){this.__data__=le?le(null):{}}function rt(a){return this.has(a)&&delete this.__data__[a]}function oe(a){var u=this.__data__;if(le){var g=u[a];return g===n?void 0:g}return Ft.call(u,a)?u[a]:void 0}function ce(a){var u=this.__data__;return le?u[a]!==void 0:Ft.call(u,a)}function He(a,u){var g=this.__data__;return g[a]=le&&u===void 0?n:u,this}yt.prototype.clear=Z,yt.prototype.delete=rt,yt.prototype.get=oe,yt.prototype.has=ce,yt.prototype.set=He;function qt(a){var u=-1,g=a?a.length:0;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function pe(){this.__data__=[]}function yn(a){var u=this.__data__,g=wn(u,a);if(g<0)return!1;var x=u.length-1;return g==x?u.pop():Dn.call(u,g,1),!0}function ze(a){var u=this.__data__,g=wn(u,a);return g<0?void 0:u[g][1]}function Ve(a){return wn(this.__data__,a)>-1}function vn(a,u){var g=this.__data__,x=wn(g,a);return x<0?g.push([a,u]):g[x][1]=u,this}qt.prototype.clear=pe,qt.prototype.delete=yn,qt.prototype.get=ze,qt.prototype.has=Ve,qt.prototype.set=vn;function Y(a){var u=-1,g=a?a.length:0;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function $t(){this.__data__={hash:new yt,map:new(Ae||qt),string:new yt}}function tn(a){return an(this,a).delete(a)}function en(a){return an(this,a).get(a)}function jn(a){return an(this,a).has(a)}function Qn(a,u){return an(this,a).set(a,u),this}Y.prototype.clear=$t,Y.prototype.delete=tn,Y.prototype.get=en,Y.prototype.has=jn,Y.prototype.set=Qn;function zt(a){this.__data__=new qt(a)}function xr(){this.__data__=new qt}function En(a){return this.__data__.delete(a)}function Ar(a){return this.__data__.get(a)}function tr(a){return this.__data__.has(a)}function _e(a,u){var g=this.__data__;if(g instanceof qt){var x=g.__data__;if(!Ae||x.length<e-1)return x.push([a,u]),this;g=this.__data__=new Y(x)}return g.set(a,u),this}zt.prototype.clear=xr,zt.prototype.delete=En,zt.prototype.get=Ar,zt.prototype.has=tr,zt.prototype.set=_e;function nn(a,u){var g=Fn(a)||ye(a)?it(a.length,String):[],x=g.length,st=!!x;for(var G in a)Ft.call(a,G)&&!(st&&(G=="length"||Rr(G,x)))&&g.push(G);return g}function Bn(a,u,g){var x=a[u];(!(Ft.call(a,u)&&he(x,g))||g===void 0&&!(u in a))&&(a[u]=g)}function wn(a,u){for(var g=a.length;g--;)if(he(a[g][0],u))return g;return-1}function ge(a,u){return a&&Un(u,Mr(u),a)}function Pn(a,u,g,x,st,G,gt){var ft;if(x&&(ft=G?x(a,st,G,gt):x(a)),ft!==void 0)return ft;if(!Ke(a))return a;var It=Fn(a);if(It){if(ft=An(a),!u)return Or(a,ft)}else{var vt=Ce(a),Vt=vt==p||vt==b;if(ss(a))return rn(a,u);if(vt==y||vt==i||Vt&&!G){if(Et(a))return G?a:{};if(ft=be(Vt?{}:a),!u)return qr(a,ge(ft,a))}else{if(!k[vt])return G?a:{};ft=Ir(a,vt,Pn,u)}}gt||(gt=new zt);var re=gt.get(a);if(re)return re;if(gt.set(a,ft),!It)var Rt=g?sr(a):Mr(a);return ct(Rt||a,function(Kt,Ut){Rt&&(Ut=Kt,Kt=a[Ut]),Bn(ft,Ut,Pn(Kt,u,g,x,Ut,a,gt))}),ft}function er(a){return Ke(a)?mn(a):{}}function Tr(a,u,g){var x=u(a);return Fn(a)?x:lt(x,g(a))}function Nr(a){return $e.call(a)}function Sr(a){if(!Ke(a)||F(a))return!1;var u=kr(a)||Et(a)?Mn:j;return u.test(dt(a))}function _r(a){if(!J(a))return fe(a);var u=[];for(var g in Object(a))Ft.call(a,g)&&g!="constructor"&&u.push(g);return u}function rn(a,u){if(u)return a.slice();var g=new a.constructor(a.length);return a.copy(g),g}function xn(a){var u=new a.constructor(a.byteLength);return new Je(u).set(new Je(a)),u}function sn(a,u){var g=u?xn(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.byteLength)}function nr(a,u,g){var x=u?g(xt(a),!0):xt(a);return tt(x,pt,new a.constructor)}function $n(a){var u=new a.constructor(a.source,q.exec(a));return u.lastIndex=a.lastIndex,u}function rr(a,u,g){var x=u?g(Mt(a),!0):Mt(a);return tt(x,Q,new a.constructor)}function Cr(a){return K?Object(K.call(a)):{}}function Lr(a,u){var g=u?xn(a.buffer):a.buffer;return new a.constructor(g,a.byteOffset,a.length)}function Or(a,u){var g=-1,x=a.length;for(u||(u=Array(x));++g<x;)u[g]=a[g];return u}function Un(a,u,g,x){g||(g={});for(var st=-1,G=u.length;++st<G;){var gt=u[st],ft=void 0;Bn(g,gt,ft===void 0?a[gt]:ft)}return g}function qr(a,u){return Un(a,me(a),u)}function sr(a){return Tr(a,Mr,me)}function an(a,u){var g=a.__data__;return ir(u)?g[typeof u=="string"?"string":"hash"]:g.map}function ue(a,u){var g=at(a,u);return Sr(g)?g:void 0}var me=Qe?Yt(Qe,Object):Gs,Ce=Nr;(ne&&Ce(new ne(new ArrayBuffer(1)))!=ot||Ae&&Ce(new Ae)!=d||Bt&&Ce(Bt.resolve())!=w||Te&&Ce(new Te)!=_||Jt&&Ce(new Jt)!=z)&&(Ce=function(a){var u=$e.call(a),g=u==y?a.constructor:void 0,x=g?dt(g):void 0;if(x)switch(x){case Ne:return ot;case Ht:return d;case Se:return w;case Pt:return _;case Fe:return z}return u});function An(a){var u=a.length,g=a.constructor(u);return u&&typeof a[0]=="string"&&Ft.call(a,"index")&&(g.index=a.index,g.input=a.input),g}function be(a){return typeof a.constructor=="function"&&!J(a)?er(jt(a)):{}}function Ir(a,u,g,x){var st=a.constructor;switch(u){case U:return xn(a);case o:case c:return new st(+a);case ot:return sn(a,x);case mt:case bt:case St:case Ct:case f:case C:case v:case I:case N:return Lr(a,x);case d:return nr(a,x,g);case m:case O:return new st(a);case A:return $n(a);case _:return rr(a,x,g);case M:return Cr(a)}}function Rr(a,u){return u=u??s,!!u&&(typeof a=="number"||D.test(a))&&a>-1&&a%1==0&&a<u}function ir(a){var u=typeof a;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?a!=="__proto__":a===null}function F(a){return!!ee&&ee in a}function J(a){var u=a&&a.constructor,g=typeof u=="function"&&u.prototype||Lt;return a===g}function dt(a){if(a!=null){try{return Pe.call(a)}catch{}try{return a+""}catch{}}return""}function Ot(a){return Pn(a,!0,!0)}function he(a,u){return a===u||a!==a&&u!==u}function ye(a){return Ks(a)&&Ft.call(a,"callee")&&(!bn.call(a,"callee")||$e.call(a)==i)}var Fn=Array.isArray;function Tn(a){return a!=null&&is(a.length)&&!kr(a)}function Ks(a){return as(a)&&Tn(a)}var ss=Xt||Ws;function kr(a){var u=Ke(a)?$e.call(a):"";return u==p||u==b}function is(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=s}function Ke(a){var u=typeof a;return!!a&&(u=="object"||u=="function")}function as(a){return!!a&&typeof a=="object"}function Mr(a){return Tn(a)?nn(a):_r(a)}function Gs(){return[]}function Ws(){return!1}r.exports=Ot})(Pr,Pr.exports)),Pr.exports}var $r={exports:{}};$r.exports;var Ga;function ho(){return Ga||(Ga=1,(function(r,t){var e=200,n="__lodash_hash_undefined__",s=1,i=2,l=9007199254740991,o="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",b="[object Date]",d="[object Error]",m="[object Function]",y="[object GeneratorFunction]",w="[object Map]",A="[object Number]",_="[object Null]",O="[object Object]",M="[object Promise]",z="[object Proxy]",U="[object RegExp]",ot="[object Set]",mt="[object String]",bt="[object Symbol]",St="[object Undefined]",Ct="[object WeakMap]",f="[object ArrayBuffer]",C="[object DataView]",v="[object Float32Array]",I="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",q="[object Int32Array]",j="[object Uint8Array]",D="[object Uint8ClampedArray]",k="[object Uint16Array]",X="[object Uint32Array]",W=/[\\^$.*+?()[\]{}|]/g,et=/^\[object .+?Constructor\]$/,nt=/^(?:0|[1-9]\d*)$/,P={};P[v]=P[I]=P[N]=P[S]=P[q]=P[j]=P[D]=P[k]=P[X]=!0,P[o]=P[c]=P[f]=P[p]=P[C]=P[b]=P[d]=P[m]=P[w]=P[A]=P[O]=P[U]=P[ot]=P[mt]=P[Ct]=!1;var ht=typeof Ln=="object"&&Ln&&Ln.Object===Object&&Ln,pt=typeof self=="object"&&self&&self.Object===Object&&self,Q=ht||pt||Function("return this")(),ct=t&&!t.nodeType&&t,lt=ct&&!0&&r&&!r.nodeType&&r,tt=lt&&lt.exports===ct,it=tt&&ht.process,at=(function(){try{return it&&it.binding&&it.binding("util")}catch{}})(),Et=at&&at.isTypedArray;function xt(a,u){for(var g=-1,x=a==null?0:a.length,st=0,G=[];++g<x;){var gt=a[g];u(gt,g,a)&&(G[st++]=gt)}return G}function Yt(a,u){for(var g=-1,x=u.length,st=a.length;++g<x;)a[st+g]=u[g];return a}function Mt(a,u){for(var g=-1,x=a==null?0:a.length;++g<x;)if(u(a[g],g,a))return!0;return!1}function wt(a,u){for(var g=-1,x=Array(a);++g<a;)x[g]=u(g);return x}function te(a){return function(u){return a(u)}}function Lt(a,u){return a.has(u)}function ie(a,u){return a==null?void 0:a[u]}function ee(a){var u=-1,g=Array(a.size);return a.forEach(function(x,st){g[++u]=[st,x]}),g}function Pe(a,u){return function(g){return a(u(g))}}function Ft(a){var u=-1,g=Array(a.size);return a.forEach(function(x){g[++u]=x}),g}var $e=Array.prototype,Mn=Function.prototype,ae=Object.prototype,Ue=Q["__core-js_shared__"],Je=Mn.toString,jt=ae.hasOwnProperty,mn=(function(){var a=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})(),bn=ae.toString,Dn=RegExp("^"+Je.call(jt).replace(W,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qe=tt?Q.Buffer:void 0,Xt=Q.Symbol,fe=Q.Uint8Array,ne=ae.propertyIsEnumerable,Ae=$e.splice,Bt=Xt?Xt.toStringTag:void 0,Te=Object.getOwnPropertySymbols,Jt=Qe?Qe.isBuffer:void 0,le=Pe(Object.keys,Object),Ne=me(Q,"DataView"),Ht=me(Q,"Map"),Se=me(Q,"Promise"),Pt=me(Q,"Set"),Fe=me(Q,"WeakMap"),E=me(Object,"create"),K=dt(Ne),yt=dt(Ht),Z=dt(Se),rt=dt(Pt),oe=dt(Fe),ce=Xt?Xt.prototype:void 0,He=ce?ce.valueOf:void 0;function qt(a){var u=-1,g=a==null?0:a.length;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function pe(){this.__data__=E?E(null):{},this.size=0}function yn(a){var u=this.has(a)&&delete this.__data__[a];return this.size-=u?1:0,u}function ze(a){var u=this.__data__;if(E){var g=u[a];return g===n?void 0:g}return jt.call(u,a)?u[a]:void 0}function Ve(a){var u=this.__data__;return E?u[a]!==void 0:jt.call(u,a)}function vn(a,u){var g=this.__data__;return this.size+=this.has(a)?0:1,g[a]=E&&u===void 0?n:u,this}qt.prototype.clear=pe,qt.prototype.delete=yn,qt.prototype.get=ze,qt.prototype.has=Ve,qt.prototype.set=vn;function Y(a){var u=-1,g=a==null?0:a.length;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function $t(){this.__data__=[],this.size=0}function tn(a){var u=this.__data__,g=rn(u,a);if(g<0)return!1;var x=u.length-1;return g==x?u.pop():Ae.call(u,g,1),--this.size,!0}function en(a){var u=this.__data__,g=rn(u,a);return g<0?void 0:u[g][1]}function jn(a){return rn(this.__data__,a)>-1}function Qn(a,u){var g=this.__data__,x=rn(g,a);return x<0?(++this.size,g.push([a,u])):g[x][1]=u,this}Y.prototype.clear=$t,Y.prototype.delete=tn,Y.prototype.get=en,Y.prototype.has=jn,Y.prototype.set=Qn;function zt(a){var u=-1,g=a==null?0:a.length;for(this.clear();++u<g;){var x=a[u];this.set(x[0],x[1])}}function xr(){this.size=0,this.__data__={hash:new qt,map:new(Ht||Y),string:new qt}}function En(a){var u=ue(this,a).delete(a);return this.size-=u?1:0,u}function Ar(a){return ue(this,a).get(a)}function tr(a){return ue(this,a).has(a)}function _e(a,u){var g=ue(this,a),x=g.size;return g.set(a,u),this.size+=g.size==x?0:1,this}zt.prototype.clear=xr,zt.prototype.delete=En,zt.prototype.get=Ar,zt.prototype.has=tr,zt.prototype.set=_e;function nn(a){var u=-1,g=a==null?0:a.length;for(this.__data__=new zt;++u<g;)this.add(a[u])}function Bn(a){return this.__data__.set(a,n),this}function wn(a){return this.__data__.has(a)}nn.prototype.add=nn.prototype.push=Bn,nn.prototype.has=wn;function ge(a){var u=this.__data__=new Y(a);this.size=u.size}function Pn(){this.__data__=new Y,this.size=0}function er(a){var u=this.__data__,g=u.delete(a);return this.size=u.size,g}function Tr(a){return this.__data__.get(a)}function Nr(a){return this.__data__.has(a)}function Sr(a,u){var g=this.__data__;if(g instanceof Y){var x=g.__data__;if(!Ht||x.length<e-1)return x.push([a,u]),this.size=++g.size,this;g=this.__data__=new zt(x)}return g.set(a,u),this.size=g.size,this}ge.prototype.clear=Pn,ge.prototype.delete=er,ge.prototype.get=Tr,ge.prototype.has=Nr,ge.prototype.set=Sr;function _r(a,u){var g=ye(a),x=!g&&he(a),st=!g&&!x&&Tn(a),G=!g&&!x&&!st&&as(a),gt=g||x||st||G,ft=gt?wt(a.length,String):[],It=ft.length;for(var vt in a)jt.call(a,vt)&&!(gt&&(vt=="length"||st&&(vt=="offset"||vt=="parent")||G&&(vt=="buffer"||vt=="byteLength"||vt=="byteOffset")||Ir(vt,It)))&&ft.push(vt);return ft}function rn(a,u){for(var g=a.length;g--;)if(Ot(a[g][0],u))return g;return-1}function xn(a,u,g){var x=u(a);return ye(a)?x:Yt(x,g(a))}function sn(a){return a==null?a===void 0?St:_:Bt&&Bt in Object(a)?Ce(a):J(a)}function nr(a){return Ke(a)&&sn(a)==o}function $n(a,u,g,x,st){return a===u?!0:a==null||u==null||!Ke(a)&&!Ke(u)?a!==a&&u!==u:rr(a,u,g,x,$n,st)}function rr(a,u,g,x,st,G){var gt=ye(a),ft=ye(u),It=gt?c:be(a),vt=ft?c:be(u);It=It==o?O:It,vt=vt==o?O:vt;var Vt=It==O,re=vt==O,Rt=It==vt;if(Rt&&Tn(a)){if(!Tn(u))return!1;gt=!0,Vt=!1}if(Rt&&!Vt)return G||(G=new ge),gt||as(a)?Un(a,u,g,x,st,G):qr(a,u,It,g,x,st,G);if(!(g&s)){var Kt=Vt&&jt.call(a,"__wrapped__"),Ut=re&&jt.call(u,"__wrapped__");if(Kt||Ut){var Nn=Kt?a.value():a,ln=Ut?u.value():u;return G||(G=new ge),st(Nn,ln,g,x,G)}}return Rt?(G||(G=new ge),sr(a,u,g,x,st,G)):!1}function Cr(a){if(!is(a)||ir(a))return!1;var u=ss(a)?Dn:et;return u.test(dt(a))}function Lr(a){return Ke(a)&&kr(a.length)&&!!P[sn(a)]}function Or(a){if(!F(a))return le(a);var u=[];for(var g in Object(a))jt.call(a,g)&&g!="constructor"&&u.push(g);return u}function Un(a,u,g,x,st,G){var gt=g&s,ft=a.length,It=u.length;if(ft!=It&&!(gt&&It>ft))return!1;var vt=G.get(a);if(vt&&G.get(u))return vt==u;var Vt=-1,re=!0,Rt=g&i?new nn:void 0;for(G.set(a,u),G.set(u,a);++Vt<ft;){var Kt=a[Vt],Ut=u[Vt];if(x)var Nn=gt?x(Ut,Kt,Vt,u,a,G):x(Kt,Ut,Vt,a,u,G);if(Nn!==void 0){if(Nn)continue;re=!1;break}if(Rt){if(!Mt(u,function(ln,Hn){if(!Lt(Rt,Hn)&&(Kt===ln||st(Kt,ln,g,x,G)))return Rt.push(Hn)})){re=!1;break}}else if(!(Kt===Ut||st(Kt,Ut,g,x,G))){re=!1;break}}return G.delete(a),G.delete(u),re}function qr(a,u,g,x,st,G,gt){switch(g){case C:if(a.byteLength!=u.byteLength||a.byteOffset!=u.byteOffset)return!1;a=a.buffer,u=u.buffer;case f:return!(a.byteLength!=u.byteLength||!G(new fe(a),new fe(u)));case p:case b:case A:return Ot(+a,+u);case d:return a.name==u.name&&a.message==u.message;case U:case mt:return a==u+"";case w:var ft=ee;case ot:var It=x&s;if(ft||(ft=Ft),a.size!=u.size&&!It)return!1;var vt=gt.get(a);if(vt)return vt==u;x|=i,gt.set(a,u);var Vt=Un(ft(a),ft(u),x,st,G,gt);return gt.delete(a),Vt;case bt:if(He)return He.call(a)==He.call(u)}return!1}function sr(a,u,g,x,st,G){var gt=g&s,ft=an(a),It=ft.length,vt=an(u),Vt=vt.length;if(It!=Vt&&!gt)return!1;for(var re=It;re--;){var Rt=ft[re];if(!(gt?Rt in u:jt.call(u,Rt)))return!1}var Kt=G.get(a);if(Kt&&G.get(u))return Kt==u;var Ut=!0;G.set(a,u),G.set(u,a);for(var Nn=gt;++re<It;){Rt=ft[re];var ln=a[Rt],Hn=u[Rt];if(x)var ca=gt?x(Hn,ln,Rt,u,a,G):x(ln,Hn,Rt,a,u,G);if(!(ca===void 0?ln===Hn||st(ln,Hn,g,x,G):ca)){Ut=!1;break}Nn||(Nn=Rt=="constructor")}if(Ut&&!Nn){var ls=a.constructor,os=u.constructor;ls!=os&&"constructor"in a&&"constructor"in u&&!(typeof ls=="function"&&ls instanceof ls&&typeof os=="function"&&os instanceof os)&&(Ut=!1)}return G.delete(a),G.delete(u),Ut}function an(a){return xn(a,Mr,An)}function ue(a,u){var g=a.__data__;return Rr(u)?g[typeof u=="string"?"string":"hash"]:g.map}function me(a,u){var g=ie(a,u);return Cr(g)?g:void 0}function Ce(a){var u=jt.call(a,Bt),g=a[Bt];try{a[Bt]=void 0;var x=!0}catch{}var st=bn.call(a);return x&&(u?a[Bt]=g:delete a[Bt]),st}var An=Te?function(a){return a==null?[]:(a=Object(a),xt(Te(a),function(u){return ne.call(a,u)}))}:Gs,be=sn;(Ne&&be(new Ne(new ArrayBuffer(1)))!=C||Ht&&be(new Ht)!=w||Se&&be(Se.resolve())!=M||Pt&&be(new Pt)!=ot||Fe&&be(new Fe)!=Ct)&&(be=function(a){var u=sn(a),g=u==O?a.constructor:void 0,x=g?dt(g):"";if(x)switch(x){case K:return C;case yt:return w;case Z:return M;case rt:return ot;case oe:return Ct}return u});function Ir(a,u){return u=u??l,!!u&&(typeof a=="number"||nt.test(a))&&a>-1&&a%1==0&&a<u}function Rr(a){var u=typeof a;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?a!=="__proto__":a===null}function ir(a){return!!mn&&mn in a}function F(a){var u=a&&a.constructor,g=typeof u=="function"&&u.prototype||ae;return a===g}function J(a){return bn.call(a)}function dt(a){if(a!=null){try{return Je.call(a)}catch{}try{return a+""}catch{}}return""}function Ot(a,u){return a===u||a!==a&&u!==u}var he=nr((function(){return arguments})())?nr:function(a){return Ke(a)&&jt.call(a,"callee")&&!ne.call(a,"callee")},ye=Array.isArray;function Fn(a){return a!=null&&kr(a.length)&&!ss(a)}var Tn=Jt||Ws;function Ks(a,u){return $n(a,u)}function ss(a){if(!is(a))return!1;var u=sn(a);return u==m||u==y||u==h||u==z}function kr(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=l}function is(a){var u=typeof a;return a!=null&&(u=="object"||u=="function")}function Ke(a){return a!=null&&typeof a=="object"}var as=Et?te(Et):Lr;function Mr(a){return Fn(a)?_r(a):Or(a)}function Gs(){return[]}function Ws(){return!1}r.exports=Ks})($r,$r.exports)),$r.exports}var ps={},Wa;function Op(){if(Wa)return ps;Wa=1,Object.defineProperty(ps,"__esModule",{value:!0});const r=uo(),t=ho();var e;return(function(n){function s(c={},h={},p=!1){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});let b=r(h);p||(b=Object.keys(b).reduce((d,m)=>(b[m]!=null&&(d[m]=b[m]),d),{}));for(const d in c)c[d]!==void 0&&h[d]===void 0&&(b[d]=c[d]);return Object.keys(b).length>0?b:void 0}n.compose=s;function i(c={},h={}){typeof c!="object"&&(c={}),typeof h!="object"&&(h={});const p=Object.keys(c).concat(Object.keys(h)).reduce((b,d)=>(t(c[d],h[d])||(b[d]=h[d]===void 0?null:h[d]),b),{});return Object.keys(p).length>0?p:void 0}n.diff=i;function l(c={},h={}){c=c||{};const p=Object.keys(h).reduce((b,d)=>(h[d]!==c[d]&&c[d]!==void 0&&(b[d]=h[d]),b),{});return Object.keys(c).reduce((b,d)=>(c[d]!==h[d]&&h[d]===void 0&&(b[d]=null),b),p)}n.invert=l;function o(c,h,p=!1){if(typeof c!="object")return h;if(typeof h!="object")return;if(!p)return h;const b=Object.keys(h).reduce((d,m)=>(c[m]===void 0&&(d[m]=h[m]),d),{});return Object.keys(b).length>0?b:void 0}n.transform=o})(e||(e={})),ps.default=e,ps}var gs={},Za;function fo(){if(Za)return gs;Za=1,Object.defineProperty(gs,"__esModule",{value:!0});var r;return(function(t){function e(n){return typeof n.delete=="number"?n.delete:typeof n.retain=="number"?n.retain:typeof n.retain=="object"&&n.retain!==null?1:typeof n.insert=="string"?n.insert.length:1}t.length=e})(r||(r={})),gs.default=r,gs}var ms={},Ya;function qp(){if(Ya)return ms;Ya=1,Object.defineProperty(ms,"__esModule",{value:!0});const r=fo();class t{constructor(n){this.ops=n,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(n){n||(n=1/0);const s=this.ops[this.index];if(s){const i=this.offset,l=r.default.length(s);if(n>=l-i?(n=l-i,this.index+=1,this.offset=0):this.offset+=n,typeof s.delete=="number")return{delete:n};{const o={};return s.attributes&&(o.attributes=s.attributes),typeof s.retain=="number"?o.retain=n:typeof s.retain=="object"&&s.retain!==null?o.retain=s.retain:typeof s.insert=="string"?o.insert=s.insert.substr(i,n):o.insert=s.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const n=this.ops[this.index];return n?typeof n.delete=="number"?"delete":typeof n.retain=="number"||typeof n.retain=="object"&&n.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const n=this.offset,s=this.index,i=this.next(),l=this.ops.slice(this.index);return this.offset=n,this.index=s,[i].concat(l)}}else return[]}}return ms.default=t,ms}var Xa;function Ip(){return Xa||(Xa=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const e=Lp(),n=uo(),s=ho(),i=Op();t.AttributeMap=i.default;const l=fo();t.Op=l.default;const o=qp();t.OpIterator=o.default;const c="\0",h=(b,d)=>{if(typeof b!="object"||b===null)throw new Error(`cannot retain a ${typeof b}`);if(typeof d!="object"||d===null)throw new Error(`cannot retain a ${typeof d}`);const m=Object.keys(b)[0];if(!m||m!==Object.keys(d)[0])throw new Error(`embed types not matched: ${m} != ${Object.keys(d)[0]}`);return[m,b[m],d[m]]};class p{constructor(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]}static registerEmbed(d,m){this.handlers[d]=m}static unregisterEmbed(d){delete this.handlers[d]}static getHandler(d){const m=this.handlers[d];if(!m)throw new Error(`no handlers for embed type "${d}"`);return m}insert(d,m){const y={};return typeof d=="string"&&d.length===0?this:(y.insert=d,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y))}delete(d){return d<=0?this:this.push({delete:d})}retain(d,m){if(typeof d=="number"&&d<=0)return this;const y={retain:d};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(y.attributes=m),this.push(y)}push(d){let m=this.ops.length,y=this.ops[m-1];if(d=n(d),typeof y=="object"){if(typeof d.delete=="number"&&typeof y.delete=="number")return this.ops[m-1]={delete:y.delete+d.delete},this;if(typeof y.delete=="number"&&d.insert!=null&&(m-=1,y=this.ops[m-1],typeof y!="object"))return this.ops.unshift(d),this;if(s(d.attributes,y.attributes)){if(typeof d.insert=="string"&&typeof y.insert=="string")return this.ops[m-1]={insert:y.insert+d.insert},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof y.retain=="number")return this.ops[m-1]={retain:y.retain+d.retain},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this}}return m===this.ops.length?this.ops.push(d):this.ops.splice(m,0,d),this}chop(){const d=this.ops[this.ops.length-1];return d&&typeof d.retain=="number"&&!d.attributes&&this.ops.pop(),this}filter(d){return this.ops.filter(d)}forEach(d){this.ops.forEach(d)}map(d){return this.ops.map(d)}partition(d){const m=[],y=[];return this.forEach(w=>{(d(w)?m:y).push(w)}),[m,y]}reduce(d,m){return this.ops.reduce(d,m)}changeLength(){return this.reduce((d,m)=>m.insert?d+l.default.length(m):m.delete?d-m.delete:d,0)}length(){return this.reduce((d,m)=>d+l.default.length(m),0)}slice(d=0,m=1/0){const y=[],w=new o.default(this.ops);let A=0;for(;A<m&&w.hasNext();){let _;A<d?_=w.next(d-A):(_=w.next(m-A),y.push(_)),A+=l.default.length(_)}return new p(y)}compose(d){const m=new o.default(this.ops),y=new o.default(d.ops),w=[],A=y.peek();if(A!=null&&typeof A.retain=="number"&&A.attributes==null){let O=A.retain;for(;m.peekType()==="insert"&&m.peekLength()<=O;)O-=m.peekLength(),w.push(m.next());A.retain-O>0&&y.next(A.retain-O)}const _=new p(w);for(;m.hasNext()||y.hasNext();)if(y.peekType()==="insert")_.push(y.next());else if(m.peekType()==="delete")_.push(m.next());else{const O=Math.min(m.peekLength(),y.peekLength()),M=m.next(O),z=y.next(O);if(z.retain){const U={};if(typeof M.retain=="number")U.retain=typeof z.retain=="number"?O:z.retain;else if(typeof z.retain=="number")M.retain==null?U.insert=M.insert:U.retain=M.retain;else{const mt=M.retain==null?"insert":"retain",[bt,St,Ct]=h(M[mt],z.retain),f=p.getHandler(bt);U[mt]={[bt]:f.compose(St,Ct,mt==="retain")}}const ot=i.default.compose(M.attributes,z.attributes,typeof M.retain=="number");if(ot&&(U.attributes=ot),_.push(U),!y.hasNext()&&s(_.ops[_.ops.length-1],U)){const mt=new p(m.rest());return _.concat(mt).chop()}}else typeof z.delete=="number"&&(typeof M.retain=="number"||typeof M.retain=="object"&&M.retain!==null)&&_.push(z)}return _.chop()}concat(d){const m=new p(this.ops.slice());return d.ops.length>0&&(m.push(d.ops[0]),m.ops=m.ops.concat(d.ops.slice(1))),m}diff(d,m){if(this.ops===d.ops)return new p;const y=[this,d].map(M=>M.map(z=>{if(z.insert!=null)return typeof z.insert=="string"?z.insert:c;const U=M===d?"on":"with";throw new Error("diff() called "+U+" non-document")}).join("")),w=new p,A=e(y[0],y[1],m,!0),_=new o.default(this.ops),O=new o.default(d.ops);return A.forEach(M=>{let z=M[1].length;for(;z>0;){let U=0;switch(M[0]){case e.INSERT:U=Math.min(O.peekLength(),z),w.push(O.next(U));break;case e.DELETE:U=Math.min(z,_.peekLength()),_.next(U),w.delete(U);break;case e.EQUAL:U=Math.min(_.peekLength(),O.peekLength(),z);const ot=_.next(U),mt=O.next(U);s(ot.insert,mt.insert)?w.retain(U,i.default.diff(ot.attributes,mt.attributes)):w.push(mt).delete(U);break}z-=U}}),w.chop()}eachLine(d,m=`
`){const y=new o.default(this.ops);let w=new p,A=0;for(;y.hasNext();){if(y.peekType()!=="insert")return;const _=y.peek(),O=l.default.length(_)-y.peekLength(),M=typeof _.insert=="string"?_.insert.indexOf(m,O)-O:-1;if(M<0)w.push(y.next());else if(M>0)w.push(y.next(M));else{if(d(w,y.next(1).attributes||{},A)===!1)return;A+=1,w=new p}}w.length()>0&&d(w,{},A)}invert(d){const m=new p;return this.reduce((y,w)=>{if(w.insert)m.delete(l.default.length(w));else{if(typeof w.retain=="number"&&w.attributes==null)return m.retain(w.retain),y+w.retain;if(w.delete||typeof w.retain=="number"){const A=w.delete||w.retain;return d.slice(y,y+A).forEach(O=>{w.delete?m.push(O):w.retain&&w.attributes&&m.retain(l.default.length(O),i.default.invert(w.attributes,O.attributes))}),y+A}else if(typeof w.retain=="object"&&w.retain!==null){const A=d.slice(y,y+1),_=new o.default(A.ops).next(),[O,M,z]=h(w.retain,_.insert),U=p.getHandler(O);return m.retain({[O]:U.invert(M,z)},i.default.invert(w.attributes,_.attributes)),y+1}}return y},0),m.chop()}transform(d,m=!1){if(m=!!m,typeof d=="number")return this.transformPosition(d,m);const y=d,w=new o.default(this.ops),A=new o.default(y.ops),_=new p;for(;w.hasNext()||A.hasNext();)if(w.peekType()==="insert"&&(m||A.peekType()!=="insert"))_.retain(l.default.length(w.next()));else if(A.peekType()==="insert")_.push(A.next());else{const O=Math.min(w.peekLength(),A.peekLength()),M=w.next(O),z=A.next(O);if(M.delete)continue;if(z.delete)_.push(z);else{const U=M.retain,ot=z.retain;let mt=typeof ot=="object"&&ot!==null?ot:O;if(typeof U=="object"&&U!==null&&typeof ot=="object"&&ot!==null){const bt=Object.keys(U)[0];if(bt===Object.keys(ot)[0]){const St=p.getHandler(bt);St&&(mt={[bt]:St.transform(U[bt],ot[bt],m)})}}_.retain(mt,i.default.transform(M.attributes,z.attributes,m))}}return _.chop()}transformPosition(d,m=!1){m=!!m;const y=new o.default(this.ops);let w=0;for(;y.hasNext()&&w<=d;){const A=y.peekLength(),_=y.peekType();if(y.next(),_==="delete"){d-=Math.min(A,d-w);continue}else _==="insert"&&(w<d||!m)&&(d+=A);w+=A}return d}}p.Op=l.default,p.OpIterator=o.default,p.AttributeMap=i.default,p.handlers={},t.default=p,r.exports=p,r.exports.default=p})(fs,fs.exports)),fs.exports}var xe=Ip();const H=Ms(xe);class je extends de{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}je.blotName="break";je.tagName="BR";let ke=class extends ks{};const Rp={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Us(r){return r.replace(/[&<>"']/g,t=>Rp[t])}const Ge=class Ge extends Wi{static compare(t,e){const n=Ge.order.indexOf(t),s=Ge.order.indexOf(e);return n>=0||s>=0?n-s:t===e?0:t<e?-1:1}formatAt(t,e,n,s){if(Ge.compare(this.statics.blotName,n)<0&&this.scroll.query(n,V.BLOT)){const i=this.isolate(t,e);s&&i.wrap(n,s)}else super.formatAt(t,e,n,s)}optimize(t){if(super.optimize(t),this.parent instanceof Ge&&Ge.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}};R(Ge,"allowedChildren",[Ge,je,de,ke]),R(Ge,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);let Me=Ge;const Ja=1;class kt extends Zr{constructor(){super(...arguments);R(this,"cache",{})}delta(){return this.cache.delta==null&&(this.cache.delta=po(this)),this.cache.delta}deleteAt(e,n){super.deleteAt(e,n),this.cache={}}formatAt(e,n,s,i){n<=0||(this.scroll.query(s,V.BLOCK)?e+n===this.length()&&this.format(s,i):super.formatAt(e,Math.min(n,this.length()-e-1),s,i),this.cache={})}insertAt(e,n,s){if(s!=null){super.insertAt(e,n,s),this.cache={};return}if(n.length===0)return;const i=n.split(`
`),l=i.shift();l.length>0&&(e<this.length()-1||this.children.tail==null?super.insertAt(Math.min(e,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});let o=this;i.reduce((c,h)=>(o=o.split(c,!0),o.insertAt(0,h),h.length),e+l.length)}insertBefore(e,n){const{head:s}=this.children;super.insertBefore(e,n),s instanceof je&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Ja),this.cache.length}moveChildren(e,n){super.moveChildren(e,n),this.cache={}}optimize(e){super.optimize(e),this.cache={}}path(e){return super.path(e,!0)}removeChild(e){super.removeChild(e),this.cache={}}split(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n&&(e===0||e>=this.length()-Ja)){const i=this.clone();return e===0?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}const s=super.split(e,n);return this.cache={},s}}kt.blotName="block";kt.tagName="P";kt.defaultChild=je;kt.allowedChildren=[je,Me,de,ke];class se extends de{attach(){super.attach(),this.attributes=new Ps(this.domNode)}delta(){return new H().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,V.BLOCK_ATTRIBUTE);n!=null&&this.attributes.attribute(n,e)}formatAt(t,e,n,s){this.format(n,s)}insertAt(t,e,n){if(n!=null){super.insertAt(t,e,n);return}const s=e.split(`
`),i=s.pop(),l=s.map(c=>{const h=this.scroll.create(kt.blotName);return h.insertAt(0,c),h}),o=this.split(t);l.forEach(c=>{this.parent.insertBefore(c,o)}),i&&this.parent.insertBefore(this.scroll.create("text",i),o)}}se.scope=V.BLOCK_BLOT;function po(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r.descendants(Wt).reduce((e,n)=>n.length()===0?e:e.insert(n.value(),Ee(n,{},t)),new H).insert(`
`,Ee(r))}function Ee(r){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return r==null||("formats"in r&&typeof r.formats=="function"&&(t={...t,...r.formats()},e&&delete t["code-token"]),r.parent==null||r.parent.statics.blotName==="scroll"||r.parent.statics.scope!==r.statics.scope)?t:Ee(r.parent,t,e)}const ve=class ve extends de{static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(ve.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(t,e){if(this.savedLength!==0){super.format(t,e);return}let n=this,s=0;for(;n!=null&&n.statics.scope!==V.BLOCK_BLOT;)s+=n.offset(n.parent),n=n.parent;n!=null&&(this.savedLength=ve.CONTENTS.length,n.optimize(),n.formatAt(s,ve.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const t=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof ke?this.prev:null,n=e?e.length():0,s=this.next instanceof ke?this.next:null,i=s?s.text:"",{textNode:l}=this,o=l.data.split(ve.CONTENTS).join("");l.data=ve.CONTENTS;let c;if(e)c=e,(o||s)&&(e.insertAt(e.length(),o+i),s&&s.remove());else if(s)c=s,s.insertAt(0,o);else{const h=document.createTextNode(o);c=this.scroll.create(h),this.parent.insertBefore(c,this)}if(this.remove(),t){const h=(d,m)=>e&&d===e.domNode?m:d===l?n+m-1:s&&d===s.domNode?n+o.length+m:null,p=h(t.start.node,t.start.offset),b=h(t.end.node,t.end.offset);if(p!==null&&b!==null)return{startNode:c.domNode,startOffset:p,endNode:c.domNode,endOffset:b}}return null}update(t,e){if(t.some(n=>n.type==="characterData"&&n.target===this.textNode)){const n=this.restore();n&&(e.range=n)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=ve.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}};R(ve,"blotName","cursor"),R(ve,"className","ql-cursor"),R(ve,"tagName","span"),R(ve,"CONTENTS","\uFEFF");let yr=ve;var ri={exports:{}},Qa;function kp(){return Qa||(Qa=1,(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(c,h,p){this.fn=c,this.context=h,this.once=p||!1}function i(c,h,p,b,d){if(typeof p!="function")throw new TypeError("The listener must be a function");var m=new s(p,b||c,d),y=e?e+h:h;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],m]:c._events[y].push(m):(c._events[y]=m,c._eventsCount++),c}function l(c,h){--c._eventsCount===0?c._events=new n:delete c._events[h]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var h=[],p,b;if(this._eventsCount===0)return h;for(b in p=this._events)t.call(p,b)&&h.push(e?b.slice(1):b);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(p)):h},o.prototype.listeners=function(h){var p=e?e+h:h,b=this._events[p];if(!b)return[];if(b.fn)return[b.fn];for(var d=0,m=b.length,y=new Array(m);d<m;d++)y[d]=b[d].fn;return y},o.prototype.listenerCount=function(h){var p=e?e+h:h,b=this._events[p];return b?b.fn?1:b.length:0},o.prototype.emit=function(h,p,b,d,m,y){var w=e?e+h:h;if(!this._events[w])return!1;var A=this._events[w],_=arguments.length,O,M;if(A.fn){switch(A.once&&this.removeListener(h,A.fn,void 0,!0),_){case 1:return A.fn.call(A.context),!0;case 2:return A.fn.call(A.context,p),!0;case 3:return A.fn.call(A.context,p,b),!0;case 4:return A.fn.call(A.context,p,b,d),!0;case 5:return A.fn.call(A.context,p,b,d,m),!0;case 6:return A.fn.call(A.context,p,b,d,m,y),!0}for(M=1,O=new Array(_-1);M<_;M++)O[M-1]=arguments[M];A.fn.apply(A.context,O)}else{var z=A.length,U;for(M=0;M<z;M++)switch(A[M].once&&this.removeListener(h,A[M].fn,void 0,!0),_){case 1:A[M].fn.call(A[M].context);break;case 2:A[M].fn.call(A[M].context,p);break;case 3:A[M].fn.call(A[M].context,p,b);break;case 4:A[M].fn.call(A[M].context,p,b,d);break;default:if(!O)for(U=1,O=new Array(_-1);U<_;U++)O[U-1]=arguments[U];A[M].fn.apply(A[M].context,O)}}return!0},o.prototype.on=function(h,p,b){return i(this,h,p,b,!1)},o.prototype.once=function(h,p,b){return i(this,h,p,b,!0)},o.prototype.removeListener=function(h,p,b,d){var m=e?e+h:h;if(!this._events[m])return this;if(!p)return l(this,m),this;var y=this._events[m];if(y.fn)y.fn===p&&(!d||y.once)&&(!b||y.context===b)&&l(this,m);else{for(var w=0,A=[],_=y.length;w<_;w++)(y[w].fn!==p||d&&!y[w].once||b&&y[w].context!==b)&&A.push(y[w]);A.length?this._events[m]=A.length===1?A[0]:A:l(this,m)}return this},o.prototype.removeAllListeners=function(h){var p;return h?(p=e?e+h:h,this._events[p]&&l(this,p)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=e,o.EventEmitter=o,r.exports=o})(ri)),ri.exports}var Mp=kp();const Dp=Ms(Mp),Ci=new WeakMap,Li=["error","warn","log","info"];let Oi="warn";function go(r){if(Oi&&Li.indexOf(r)<=Li.indexOf(Oi)){for(var t=arguments.length,e=new Array(t>1?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];console[r](...e)}}function gn(r){return Li.reduce((t,e)=>(t[e]=go.bind(console,e,r),t),{})}gn.level=r=>{Oi=r};go.level=gn.level;const si=gn("quill:events"),jp=["selectionchange","mousedown","mouseup","click"];jp.forEach(r=>{document.addEventListener(r,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach(s=>{const i=Ci.get(s);i&&i.emitter&&i.emitter.handleDOM(...e)})})});class $ extends Dp{constructor(){super(),this.domListeners={},this.on("error",si.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return si.log.call(si,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach(i=>{let{node:l,handler:o}=i;(t.target===l||l.contains(t.target))&&o(t,...n)})}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}}R($,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),R($,"sources",{API:"api",SILENT:"silent",USER:"user"});const ii=gn("quill:selection");class Kn{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=t,this.length=e}}class Bp{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Kn(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,$.sources.USER),1)}),this.emitter.on($.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const n=this.getNativeRange();n!=null&&n.start.node!==this.cursor.textNode&&this.emitter.once($.events.SCROLL_UPDATE,(s,i)=>{try{this.root.contains(n.start.node)&&this.root.contains(n.end.node)&&this.setNativeRange(n.start.node,n.start.offset,n.end.node,n.end.offset);const l=i.some(o=>o.type==="characterData"||o.type==="childList"||o.type==="attributes"&&o.target===this.root);this.update(l?$.sources.SILENT:s)}catch{}})}),this.emitter.on($.events.SCROLL_OPTIMIZE,(n,s)=>{if(s.range){const{startNode:i,startOffset:l,endNode:o,endOffset:c}=s.range;this.setNativeRange(i,l,o,c),this.update($.sources.SILENT)}}),this.update($.sources.SILENT)}handleComposition(){this.emitter.on($.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on($.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout(()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update($.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(!(n==null||!n.native.collapsed||this.scroll.query(t,V.BLOCK))){if(n.start.node!==this.cursor.textNode){const s=this.scroll.find(n.start.node,!1);if(s==null)return;if(s instanceof Wt){const i=s.split(n.start.offset);s.parent.insertBefore(this.cursor,i)}else s.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let s,[i,l]=this.scroll.leaf(t);if(i==null)return null;if(e>0&&l===i.length()){const[p]=this.scroll.leaf(t+1);if(p){const[b]=this.scroll.line(t),[d]=this.scroll.line(t+1);b===d&&(i=p,l=0)}}[s,l]=i.position(l,!0);const o=document.createRange();if(e>0)return o.setStart(s,l),[i,l]=this.scroll.leaf(t+e),i==null?null:([s,l]=i.position(l,!0),o.setEnd(s,l),o.getBoundingClientRect());let c="left",h;if(s instanceof Text){if(!s.data.length)return null;l<s.data.length?(o.setStart(s,l),o.setEnd(s,l+1)):(o.setStart(s,l-1),o.setEnd(s,l),c="right"),h=o.getBoundingClientRect()}else{if(!(i.domNode instanceof Element))return null;h=i.domNode.getBoundingClientRect(),l>0&&(c="right")}return{bottom:h.top+h.height,height:h.height,left:h[c],right:h[c],top:h.top,width:0}}getNativeRange(){const t=document.getSelection();if(t==null||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(e==null)return null;const n=this.normalizeNative(e);return ii.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&ai(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map(l=>{const[o,c]=l,h=this.scroll.find(o,!0),p=h.offset(this.scroll);return c===0?p:h instanceof Wt?p+h.index(o,c):p+h.length()}),s=Math.min(Math.max(...n),this.scroll.length()-1),i=Math.min(s,...n);return new Kn(i,s-i)}normalizeNative(t){if(!ai(this.root,t.startContainer)||!t.collapsed&&!ai(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach(n=>{let{node:s,offset:i}=n;for(;!(s instanceof Text)&&s.childNodes.length>0;)if(s.childNodes.length>i)s=s.childNodes[i],i=0;else if(s.childNodes.length===i)s=s.lastChild,s instanceof Text?i=s.data.length:s.childNodes.length>0?i=s.childNodes.length:i=s.childNodes.length+1;else break;n.node=s,n.offset=i}),e}rangeToNative(t){const e=this.scroll.length(),n=(s,i)=>{s=Math.min(e-1,s);const[l,o]=this.scroll.leaf(s);return l?l.position(o,i):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(ii.info("setNativeRange",t,e,n,s),t!=null&&(this.root.parentNode==null||t.parentNode==null||n.parentNode==null))return;const l=document.getSelection();if(l!=null)if(t!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(o==null||i||t!==o.startContainer||e!==o.startOffset||n!==o.endContainer||s!==o.endOffset){t instanceof Element&&t.tagName==="BR"&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&n.tagName==="BR"&&(s=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const c=document.createRange();c.setStart(t,e),c.setEnd(n,s),l.removeAllRanges(),l.addRange(c)}}else l.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.sources.API;if(typeof e=="string"&&(n=e,e=!1),ii.info("setRange",t),t!=null){const s=this.rangeToNative(t);this.setNativeRange(...s,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.sources.USER;const e=this.lastRange,[n,s]=this.getRange();if(this.lastRange=n,this.lastNative=s,this.lastRange!=null&&(this.savedRange=this.lastRange),!Cn(e,this.lastRange)){if(!this.composing&&s!=null&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const l=this.cursor.restore();l&&this.setNativeRange(l.startNode,l.startOffset,l.endNode,l.endOffset)}const i=[$.events.SELECTION_CHANGE,fr(this.lastRange),fr(e),t];this.emitter.emit($.events.EDITOR_CHANGE,...i),t!==$.sources.SILENT&&this.emitter.emit(...i)}}}function ai(r,t){try{t.parentNode}catch{return!1}return r.contains(t)}const Pp=/^[ -~]*$/;class $p{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=tl(t),s=new H;return Fp(n.ops.slice()).reduce((l,o)=>{const c=xe.Op.length(o);let h=o.attributes||{},p=!1,b=!1;if(o.insert!=null){if(s.retain(c),typeof o.insert=="string"){const y=o.insert;b=!y.endsWith(`
`)&&(e<=l||!!this.scroll.descendant(se,l)[0]),this.scroll.insertAt(l,y);const[w,A]=this.scroll.line(l);let _=qn({},Ee(w));if(w instanceof kt){const[O]=w.descendant(Wt,A);O&&(_=qn(_,Ee(O)))}h=xe.AttributeMap.diff(_,h)||{}}else if(typeof o.insert=="object"){const y=Object.keys(o.insert)[0];if(y==null)return l;const w=this.scroll.query(y,V.INLINE)!=null;if(w)(e<=l||this.scroll.descendant(se,l)[0])&&(b=!0);else if(l>0){const[A,_]=this.scroll.descendant(Wt,l-1);A instanceof ke?A.value()[_]!==`
`&&(p=!0):A instanceof de&&A.statics.scope===V.INLINE_BLOT&&(p=!0)}if(this.scroll.insertAt(l,y,o.insert[y]),w){const[A]=this.scroll.descendant(Wt,l);if(A){const _=qn({},Ee(A));h=xe.AttributeMap.diff(_,h)||{}}}}e+=c}else if(s.push(o),o.retain!==null&&typeof o.retain=="object"){const y=Object.keys(o.retain)[0];if(y==null)return l;this.scroll.updateEmbedAt(l,y,o.retain[y])}Object.keys(h).forEach(y=>{this.scroll.formatAt(l,c,y,h[y])});const d=p?1:0,m=b?1:0;return e+=d+m,s.retain(d),s.delete(m),l+c+d+m},0),s.reduce((l,o)=>typeof o.delete=="number"?(this.scroll.deleteAt(l,o.delete),l):l+xe.Op.length(o),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update(new H().retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach(i=>{this.scroll.lines(t,Math.max(e,1)).forEach(l=>{l.format(i,n[i])})}),this.scroll.optimize();const s=new H().retain(t).retain(e,fr(n));return this.update(s)}formatText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(n).forEach(i=>{this.scroll.formatAt(t,e,i,n[i])});const s=new H().retain(t).retain(e,fr(n));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce((t,e)=>t.concat(e.delta()),new H)}getFormat(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=[],s=[];e===0?this.scroll.path(t).forEach(o=>{const[c]=o;c instanceof kt?n.push(c):c instanceof Wt&&s.push(c)}):(n=this.scroll.lines(t,e),s=this.scroll.descendants(Wt,t,e));const[i,l]=[n,s].map(o=>{const c=o.shift();if(c==null)return{};let h=Ee(c);for(;Object.keys(h).length>0;){const p=o.shift();if(p==null)return h;h=Up(Ee(p),h)}return h});return{...i,...l}}getHTML(t,e){const[n,s]=this.scroll.line(t);if(n){const i=n.length();return n.length()>=s+e&&!(s===0&&e===i)?Yr(n,s,e,!0):Yr(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter(n=>typeof n.insert=="string").map(n=>n.insert).join("")}insertContents(t,e){const n=tl(e),s=new H().retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(s)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update(new H().retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(t,e),Object.keys(n).forEach(s=>{this.scroll.formatAt(t,e.length,s,n[s])}),this.update(new H().retain(t).insert(e,fr(n)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if((t==null?void 0:t.statics.blotName)!==kt.blotName)return!1;const e=t;return e.children.length>1?!1:e.children.head instanceof je}removeFormat(t,e){const n=this.getText(t,e),[s,i]=this.scroll.line(t+e);let l=0,o=new H;s!=null&&(l=s.length()-i,o=s.delta().slice(i,i+l-1).insert(`
`));const h=this.getContents(t,e+l).diff(new H().insert(n).concat(o)),p=new H().retain(t).concat(h);return this.applyDelta(p)}update(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const s=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(Pp)&&this.scroll.find(e[0].target)){const i=this.scroll.find(e[0].target),l=Ee(i),o=i.offset(this.scroll),c=e[0].oldValue.replace(yr.CONTENTS,""),h=new H().insert(c),p=new H().insert(i.value()),b=n&&{oldRange:el(n.oldRange,-o),newRange:el(n.newRange,-o)};t=new H().retain(o).concat(h.diff(p,b)).reduce((m,y)=>y.insert?m.insert(y.insert,l):m.push(y),new H),this.delta=s.compose(t)}else this.delta=this.getDelta(),(!t||!Cn(s.compose(t),this.delta))&&(t=s.diff(this.delta,n));return t}}function hr(r,t,e){if(r.length===0){const[m]=li(e.pop());return t<=0?`</li></${m}>`:`</li></${m}>${hr([],t-1,e)}`}const[{child:n,offset:s,length:i,indent:l,type:o},...c]=r,[h,p]=li(o);if(l>t)return e.push(o),l===t+1?`<${h}><li${p}>${Yr(n,s,i)}${hr(c,l,e)}`:`<${h}><li>${hr(r,t+1,e)}`;const b=e[e.length-1];if(l===t&&o===b)return`</li><li${p}>${Yr(n,s,i)}${hr(c,l,e)}`;const[d]=li(e.pop());return`</li></${d}>${hr(r,t-1,e)}`}function Yr(r,t,e){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in r&&typeof r.html=="function")return r.html(t,e);if(r instanceof ke)return Us(r.value().slice(t,t+e)).replaceAll(" ","&nbsp;");if(r instanceof Re){if(r.statics.blotName==="list-container"){const h=[];return r.children.forEachAt(t,e,(p,b,d)=>{const m="formats"in p&&typeof p.formats=="function"?p.formats():{};h.push({child:p,offset:b,length:d,indent:m.indent||0,type:m.list})}),hr(h,-1,[])}const s=[];if(r.children.forEachAt(t,e,(h,p,b)=>{s.push(Yr(h,p,b))}),n||r.statics.blotName==="list")return s.join("");const{outerHTML:i,innerHTML:l}=r.domNode,[o,c]=i.split(`>${l}<`);return o==="<table"?`<table style="border: 1px solid #000;">${s.join("")}<${c}`:`${o}>${s.join("")}<${c}`}return r.domNode instanceof Element?r.domNode.outerHTML:""}function Up(r,t){return Object.keys(t).reduce((e,n)=>{if(r[n]==null)return e;const s=t[n];return s===r[n]?e[n]=s:Array.isArray(s)?s.indexOf(r[n])<0?e[n]=s.concat([r[n]]):e[n]=s:e[n]=[s,r[n]],e},{})}function li(r){const t=r==="ordered"?"ol":"ul";switch(r){case"checked":return[t,' data-list="checked"'];case"unchecked":return[t,' data-list="unchecked"'];default:return[t,""]}}function tl(r){return r.reduce((t,e)=>{if(typeof e.insert=="string"){const n=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return t.insert(n,e.attributes)}return t.push(e)},new H)}function el(r,t){let{index:e,length:n}=r;return new Kn(e+t,n)}function Fp(r){const t=[];return r.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((s,i)=>{i&&t.push({insert:`
`,attributes:e.attributes}),s&&t.push({insert:s,attributes:e.attributes})}):t.push(e)}),t}class Be{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=t,this.options=e}}R(Be,"DEFAULTS",{});const bs="\uFEFF";class Yi extends de{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(n=>{this.contentNode.appendChild(n)}),this.leftGuard=document.createTextNode(bs),this.rightGuard=document.createTextNode(bs),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e=null,n;const s=t.data.split(bs).join("");if(t===this.leftGuard)if(this.prev instanceof ke){const i=this.prev.length();this.prev.insertAt(i,s),e={startNode:this.prev.domNode,startOffset:i+s.length}}else n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this),e={startNode:n,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof ke?(this.next.insertAt(0,s),e={startNode:this.next.domNode,startOffset:s.length}):(n=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(n),this.next),e={startNode:n,startOffset:s.length}));return t.data=bs,e}update(t,e){t.forEach(n=>{if(n.type==="characterData"&&(n.target===this.leftGuard||n.target===this.rightGuard)){const s=this.restore(n.target);s&&(e.range=s)}})}}class Hp{constructor(t,e){R(this,"isComposing",!1);this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",t=>{this.isComposing||this.handleCompositionStart(t)}),this.scroll.domNode.addEventListener("compositionend",t=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(t)})})}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;e&&!(e instanceof Yi)&&(this.emitter.emit($.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit($.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit($.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit($.events.COMPOSITION_END,t),this.isComposing=!1}}const zr=class zr{constructor(t,e){R(this,"modules",{});this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach(t=>{this.modules[t]==null&&this.addModule(t)})}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}};R(zr,"DEFAULTS",{modules:{}}),R(zr,"themes",{default:zr});let vr=zr;const zp=r=>r.parentElement||r.getRootNode().host||null,Vp=r=>{const t=r.getBoundingClientRect(),e="offsetWidth"in r&&Math.abs(t.width)/r.offsetWidth||1,n="offsetHeight"in r&&Math.abs(t.height)/r.offsetHeight||1;return{top:t.top,right:t.left+r.clientWidth*e,bottom:t.top+r.clientHeight*n,left:t.left}},ys=r=>{const t=parseInt(r,10);return Number.isNaN(t)?0:t},nl=(r,t,e,n,s,i)=>r<e&&t>n?0:r<e?-(e-r+s):t>n?t-r>n-e?r+s-e:t-n+i:0,Kp=(r,t)=>{var i,l,o;const e=r.ownerDocument;let n=t,s=r;for(;s;){const c=s===e.body,h=c?{top:0,right:((i=window.visualViewport)==null?void 0:i.width)??e.documentElement.clientWidth,bottom:((l=window.visualViewport)==null?void 0:l.height)??e.documentElement.clientHeight,left:0}:Vp(s),p=getComputedStyle(s),b=nl(n.left,n.right,h.left,h.right,ys(p.scrollPaddingLeft),ys(p.scrollPaddingRight)),d=nl(n.top,n.bottom,h.top,h.bottom,ys(p.scrollPaddingTop),ys(p.scrollPaddingBottom));if(b||d)if(c)(o=e.defaultView)==null||o.scrollBy(b,d);else{const{scrollLeft:m,scrollTop:y}=s;d&&(s.scrollTop+=d),b&&(s.scrollLeft+=b);const w=s.scrollLeft-m,A=s.scrollTop-y;n={left:n.left-w,top:n.top-A,right:n.right-w,bottom:n.bottom-A}}s=c||p.position==="fixed"?null:zp(s)}},Gp=100,Wp=["block","break","cursor","inline","scroll","text"],Zp=(r,t,e)=>{const n=new br;return Wp.forEach(s=>{const i=t.query(s);i&&n.register(i)}),r.forEach(s=>{let i=t.query(s);i||e.error(`Cannot register "${s}" specified in "formats" config. Are you sure it was registered?`);let l=0;for(;i;)if(n.register(i),i="blotName"in i?i.requiredContainer??null:null,l+=1,l>Gp){e.error(`Cycle detected in registering blot requiredContainer: "${s}"`);break}}),n},gr=gn("quill"),vs=new br;Re.uiClass="ql-ui";const Oe=class Oe{static debug(t){t===!0&&(t="log"),gn.level(t)}static find(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Ci.get(t)||vs.find(t,e)}static import(t){return this.imports[t]==null&&gr.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const t=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),n="attrName"in t?t.attrName:t.blotName;typeof n=="string"?this.register(`formats/${n}`,t,e):Object.keys(t).forEach(s=>{this.register(s,t[s],e)})}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(!(arguments.length<=2)&&arguments[2]);this.imports[t]!=null&&!n&&gr.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&vs.register(e),typeof e.register=="function"&&e.register(vs)}}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=Yp(t,e),this.container=this.options.container,this.container==null){gr.error("Invalid Quill container",t);return}this.options.debug&&Oe.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",Ci.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new $;const s=Zi.blotName,i=this.options.registry.query(s);if(!i||!("blotName"in i))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new i(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new $p(this.scroll),this.selection=new Bp(this.scroll,this.emitter),this.composition=new Hp(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on($.events.EDITOR_CHANGE,l=>{l===$.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on($.events.SCROLL_UPDATE,(l,o)=>{const c=this.selection.lastRange,[h]=this.selection.getRange(),p=c&&h?{oldRange:c,newRange:h}:void 0;Le.call(this,()=>this.editor.update(null,o,p),l)}),this.emitter.on($.events.SCROLL_EMBED_UPDATE,(l,o)=>{const c=this.selection.lastRange,[h]=this.selection.getRange(),p=c&&h?{oldRange:c,newRange:h}:void 0;Le.call(this,()=>{const b=new H().retain(l.offset(this)).retain({[l.statics.blotName]:o});return this.editor.update(b,[],p)},Oe.sources.USER)}),n){const l=this.clipboard.convert({html:`${n}<p><br></p>`,text:`
`});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof t=="string"){const n=t;t=document.createElement("div"),t.classList.add(n)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=cn(t,e,n),Le.call(this,()=>this.editor.deleteText(t,e),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$.sources.API;return Le.call(this,()=>{const s=this.getSelection(!0);let i=new H;if(s==null)return i;if(this.scroll.query(t,V.BLOCK))i=this.editor.formatLine(s.index,s.length,{[t]:e});else{if(s.length===0)return this.selection.format(t,e),i;i=this.editor.formatText(s.index,s.length,{[t]:e})}return this.setSelection(s,$.sources.SILENT),i},n)}formatLine(t,e,n,s,i){let l;return[t,e,l,i]=cn(t,e,n,s,i),Le.call(this,()=>this.editor.formatLine(t,e,l),i,t,0)}formatText(t,e,n,s,i){let l;return[t,e,l,i]=cn(t,e,n,s,i),Le.call(this,()=>this.editor.formatText(t,e,l),i,t,0)}getBounds(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=null;if(typeof t=="number"?n=this.selection.getBounds(t,e):n=this.selection.getBounds(t.index,t.length),!n)return null;const s=this.container.getBoundingClientRect();return{bottom:n.bottom-s.top,height:n.height,left:n.left-s.left,right:n.right-s.left,top:n.top-s.top,width:n.width}}getContents(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-t;return[t,e]=cn(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof t=="number"?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof t!="number"?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=cn(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof t=="number"&&(e=e??this.getLength()-t),[t,e]=cn(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Oe.sources.API;return Le.call(this,()=>this.editor.insertEmbed(t,e,n),s,t)}insertText(t,e,n,s,i){let l;return[t,,l,i]=cn(t,0,n,s,i),Le.call(this,()=>this.editor.insertText(t,e,l),i,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=cn(t,e,n),Le.call(this,()=>this.editor.removeFormat(t,e),n,t)}scrollRectIntoView(t){Kp(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.sources.API;return Le.call(this,()=>{t=new H(t);const n=this.getLength(),s=this.editor.deleteText(0,n),i=this.editor.insertContents(0,t),l=this.editor.deleteText(this.getLength()-1,1);return s.compose(i).compose(l)},e)}setSelection(t,e,n){t==null?this.selection.setRange(null,e||Oe.sources.API):([t,e,,n]=cn(t,e,n),this.selection.setRange(new Kn(Math.max(0,t),e),n),n!==$.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.sources.API;const n=new H().insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:$.sources.API;return Le.call(this,()=>(t=new H(t),this.editor.applyDelta(t)),e,!0)}};R(Oe,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:vs,theme:"default"}),R(Oe,"events",$.events),R(Oe,"sources",$.sources),R(Oe,"version","2.0.3"),R(Oe,"imports",{delta:H,parchment:Cp,"core/module":Be,"core/theme":vr});let T=Oe;function rl(r){return typeof r=="string"?document.querySelector(r):r}function oi(r){return Object.entries(r??{}).reduce((t,e)=>{let[n,s]=e;return{...t,[n]:s===!0?{}:s}},{})}function sl(r){return Object.fromEntries(Object.entries(r).filter(t=>t[1]!==void 0))}function Yp(r,t){const e=rl(r);if(!e)throw new Error("Invalid Quill container");const s=!t.theme||t.theme===T.DEFAULTS.theme?vr:T.import(`themes/${t.theme}`);if(!s)throw new Error(`Invalid theme ${t.theme}. Did you register it?`);const{modules:i,...l}=T.DEFAULTS,{modules:o,...c}=s.DEFAULTS;let h=oi(t.modules);h!=null&&h.toolbar&&h.toolbar.constructor!==Object&&(h={...h,toolbar:{container:h.toolbar}});const p=qn({},oi(i),oi(o),h),b={...l,...sl(c),...sl(t)};let d=t.registry;return d?t.formats&&gr.warn('Ignoring "formats" option because "registry" is specified'):d=t.formats?Zp(t.formats,b.registry,gr):b.registry,{...b,registry:d,container:e,theme:s,modules:Object.entries(p).reduce((m,y)=>{let[w,A]=y;if(!A)return m;const _=T.import(`modules/${w}`);return _==null?(gr.error(`Cannot load ${w} module. Are you sure you registered it?`),m):{...m,[w]:qn({},_.DEFAULTS||{},A)}},{}),bounds:rl(b.bounds)}}function Le(r,t,e,n){if(!this.isEnabled()&&t===$.sources.USER&&!this.allowReadOnlyEdits)return new H;let s=e==null?null:this.getSelection();const i=this.editor.delta,l=r();if(s!=null&&(e===!0&&(e=s.index),n==null?s=il(s,l,t):n!==0&&(s=il(s,e,n,t)),this.setSelection(s,$.sources.SILENT)),l.length()>0){const o=[$.events.TEXT_CHANGE,l,i,t];this.emitter.emit($.events.EDITOR_CHANGE,...o),t!==$.sources.SILENT&&this.emitter.emit(...o)}return l}function cn(r,t,e,n,s){let i={};return typeof r.index=="number"&&typeof r.length=="number"?typeof t!="number"?(s=n,n=e,e=t,t=r.length,r=r.index):(t=r.length,r=r.index):typeof t!="number"&&(s=n,n=e,e=t,t=0),typeof e=="object"?(i=e,s=n):typeof e=="string"&&(n!=null?i[e]=n:s=e),s=s||$.sources.API,[r,t,i,s]}function il(r,t,e,n){const s=typeof e=="number"?e:0;if(r==null)return null;let i,l;return t&&typeof t.transformPosition=="function"?[i,l]=[r.index,r.index+r.length].map(o=>t.transformPosition(o,n!==$.sources.USER)):[i,l]=[r.index,r.index+r.length].map(o=>o<t||o===t&&n===$.sources.USER?o:s>=0?o+s:Math.max(t,o+s)),new Kn(i,l-i)}class Yn extends $s{}function al(r){return r instanceof kt||r instanceof se}function ll(r){return typeof r.updateContent=="function"}class dr extends Zi{constructor(t,e,n){let{emitter:s}=n;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",i=>this.handleDragStart(i))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit($.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit($.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit($.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,s]=this.line(t),[i]=this.line(t+e);if(super.deleteAt(t,e),i!=null&&n!==i&&s>0){if(n instanceof se||i instanceof se){this.optimize();return}const l=i.children.head instanceof je?null:i.children.head;n.moveChildren(i,l),n.remove()}this.optimize()}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,s){super.formatAt(t,e,n,s),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(n==null||this.scroll.query(e,V.BLOCK)==null){const s=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(s),n==null&&e.endsWith(`
`)?s.insertAt(0,e.slice(0,-1),n):s.insertAt(0,e,n)}else{const s=this.scroll.create(e,n);this.appendChild(s)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===V.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat(new H().insert(`
`))),s=n.pop();if(s==null)return;this.batchStart();const i=n.shift();if(i){const c=i.type==="block"&&(i.delta.length()===0||!this.descendant(se,t)[0]&&t<this.length()),h=i.type==="block"?i.delta:new H().insert({[i.key]:i.value});ci(this,t,h);const p=i.type==="block"?1:0,b=t+h.length()+p;c&&this.insertAt(b-1,`
`);const d=Ee(this.line(t)[0]),m=xe.AttributeMap.diff(d,i.attributes)||{};Object.keys(m).forEach(y=>{this.formatAt(b-1,1,y,m[y])}),t=b}let[l,o]=this.children.find(t);if(n.length&&(l&&(l=l.split(o),o=0),n.forEach(c=>{if(c.type==="block"){const h=this.createBlock(c.attributes,l||void 0);ci(h,0,c.delta)}else{const h=this.create(c.key,c.value);this.insertBefore(h,l||void 0),Object.keys(c.attributes).forEach(p=>{h.format(p,c.attributes[p])})}})),s.type==="block"&&s.delta.length()){const c=l?l.offset(l.scroll)+o:this.length();ci(this,c,s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,s]=e;return n instanceof Wt?[n,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(al,t)}lines(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const n=(s,i,l)=>{let o=[],c=l;return s.children.forEachAt(i,l,(h,p,b)=>{al(h)?o.push(h):h instanceof $s&&(o=o.concat(n(h,p,c))),c-=b}),o};return n(this,t,e)}optimize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit($.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch){Array.isArray(t)&&(this.batch=this.batch.concat(t));return}let e=$.sources.USER;typeof t=="string"&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),t=t.filter(n=>{let{target:s}=n;const i=this.find(s,!0);return i&&!ll(i)}),t.length>0&&this.emitter.emit($.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit($.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[s]=this.descendant(i=>i instanceof se,t);s&&s.statics.blotName===e&&ll(s)&&s.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new H;return t.forEach(s=>{const i=s==null?void 0:s.insert;if(i)if(typeof i=="string"){const l=i.split(`
`);l.slice(0,-1).forEach(c=>{n.insert(c,s.attributes),e.push({type:"block",delta:n,attributes:s.attributes??{}}),n=new H});const o=l[l.length-1];o&&n.insert(o,s.attributes)}else{const l=Object.keys(i)[0];if(!l)return;this.query(l,V.INLINE)?n.push(s):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new H,e.push({type:"blockEmbed",key:l,value:i[l],attributes:s.attributes??{}}))}}),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const s={};Object.entries(t).forEach(o=>{let[c,h]=o;this.query(c,V.BLOCK&V.BLOT)!=null?n=c:s[c]=h});const i=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(i,e||void 0);const l=i.length();return Object.entries(s).forEach(o=>{let[c,h]=o;i.formatAt(0,l,c,h)}),i}}R(dr,"blotName","scroll"),R(dr,"className","ql-editor"),R(dr,"tagName","DIV"),R(dr,"defaultChild",kt),R(dr,"allowedChildren",[kt,se,Yn]);function ci(r,t,e){e.reduce((n,s)=>{const i=xe.Op.length(s);let l=s.attributes||{};if(s.insert!=null){if(typeof s.insert=="string"){const o=s.insert;r.insertAt(n,o);const[c]=r.descendant(Wt,n),h=Ee(c);l=xe.AttributeMap.diff(h,l)||{}}else if(typeof s.insert=="object"){const o=Object.keys(s.insert)[0];if(o==null)return n;if(r.insertAt(n,o,s.insert[o]),r.scroll.query(o,V.INLINE)!=null){const[h]=r.descendant(Wt,n),p=Ee(h);l=xe.AttributeMap.diff(p,l)||{}}}}return Object.keys(l).forEach(o=>{r.formatAt(n,i,o,l[o])}),n+i},t)}const Xi={scope:V.BLOCK,whitelist:["right","center","justify"]},Xp=new Ye("align","align",Xi),Ji=new De("align","ql-align",Xi),mo=new kn("align","text-align",Xi);class bo extends kn{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(s=>`00${parseInt(s,10).toString(16)}`.slice(-2)).join("")}`):e}}const Jp=new De("color","ql-color",{scope:V.INLINE}),Qi=new bo("color","color",{scope:V.INLINE}),Qp=new De("background","ql-bg",{scope:V.INLINE}),ta=new bo("background","background-color",{scope:V.INLINE});class Xn extends Yn{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map(n=>n.length()<=1?"":n.domNode.innerText).join(`
`).slice(t,t+e)}html(t,e){return`<pre>
${Us(this.code(t,e))}
</pre>`}}class Zt extends kt{static register(){T.register(Xn)}}R(Zt,"TAB","  ");class ea extends Me{}ea.blotName="code";ea.tagName="CODE";Zt.blotName="code-block";Zt.className="ql-code-block";Zt.tagName="DIV";Xn.blotName="code-block-container";Xn.className="ql-code-block-container";Xn.tagName="DIV";Xn.allowedChildren=[Zt];Zt.allowedChildren=[ke,je,yr];Zt.requiredContainer=Xn;const na={scope:V.BLOCK,whitelist:["rtl"]},yo=new Ye("direction","dir",na),vo=new De("direction","ql-direction",na),Eo=new kn("direction","direction",na),wo={scope:V.INLINE,whitelist:["serif","monospace"]},ra=new De("font","ql-font",wo);class tg extends kn{value(t){return super.value(t).replace(/["']/g,"")}}const xo=new tg("font","font-family",wo),sa=new De("size","ql-size",{scope:V.INLINE,whitelist:["small","large","huge"]}),Ao=new kn("size","font-size",{scope:V.INLINE,whitelist:["10px","18px","32px"]}),eg=gn("quill:keyboard"),ng=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Fs extends Be{static match(t,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(n=>!!e[n]!==t[n]&&e[n]!==null)?!1:e.key===t.key||e.key===t.which}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach(n=>{this.options.bindings[n]&&this.addBinding(this.options.bindings[n])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=sg(t);if(s==null){eg.warn("Attempted to add invalid keyboard binding",s);return}typeof e=="function"&&(e={handler:e}),typeof n=="function"&&(n={handler:n}),(Array.isArray(s.key)?s.key:[s.key]).forEach(l=>{const o={...s,key:l,...e,...n};this.bindings[o.key]=this.bindings[o.key]||[],this.bindings[o.key].push(o)})}listen(){this.quill.root.addEventListener("keydown",t=>{if(t.defaultPrevented||t.isComposing||t.keyCode===229&&(t.key==="Enter"||t.key==="Backspace"))return;const s=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter(_=>Fs.match(t,_));if(s.length===0)return;const i=T.find(t.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const l=this.quill.getSelection();if(l==null||!this.quill.hasFocus())return;const[o,c]=this.quill.getLine(l.index),[h,p]=this.quill.getLeaf(l.index),[b,d]=l.length===0?[h,p]:this.quill.getLeaf(l.index+l.length),m=h instanceof ks?h.value().slice(0,p):"",y=b instanceof ks?b.value().slice(d):"",w={collapsed:l.length===0,empty:l.length===0&&o.length()<=1,format:this.quill.getFormat(l),line:o,offset:c,prefix:m,suffix:y,event:t};s.some(_=>{if(_.collapsed!=null&&_.collapsed!==w.collapsed||_.empty!=null&&_.empty!==w.empty||_.offset!=null&&_.offset!==w.offset)return!1;if(Array.isArray(_.format)){if(_.format.every(O=>w.format[O]==null))return!1}else if(typeof _.format=="object"&&!Object.keys(_.format).every(O=>_.format[O]===!0?w.format[O]!=null:_.format[O]===!1?w.format[O]==null:Cn(_.format[O],w.format[O])))return!1;return _.prefix!=null&&!_.prefix.test(w.prefix)||_.suffix!=null&&!_.suffix.test(w.suffix)?!1:_.handler.call(this,l,w,_)!==!0})&&t.preventDefault()})}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(t.index===0||this.quill.getLength()<=1)return;let s={};const[i]=this.quill.getLine(t.index);let l=new H().retain(t.index-n).delete(n);if(e.offset===0){const[o]=this.quill.getLine(t.index-1);if(o&&!(o.statics.blotName==="block"&&o.length()<=1)){const h=i.formats(),p=this.quill.getFormat(t.index-1,1);if(s=xe.AttributeMap.diff(h,p)||{},Object.keys(s).length>0){const b=new H().retain(t.index+i.length()-2).retain(1,s);l=l.compose(b)}}}this.quill.updateContents(l,T.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let s={};const[i]=this.quill.getLine(t.index);let l=new H().retain(t.index).delete(n);if(e.offset>=i.length()-1){const[o]=this.quill.getLine(t.index+1);if(o){const c=i.formats(),h=this.quill.getFormat(t.index,1);s=xe.AttributeMap.diff(c,h)||{},Object.keys(s).length>0&&(l=l.retain(o.length()-1).retain(1,s))}}this.quill.updateContents(l,T.sources.USER),this.quill.focus()}handleDeleteRange(t){ia({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce((i,l)=>(this.quill.scroll.query(l,V.BLOCK)&&!Array.isArray(e.format[l])&&(i[l]=e.format[l]),i),{}),s=new H().retain(t.index).delete(t.length).insert(`
`,n);this.quill.updateContents(s,T.sources.USER),this.quill.setSelection(t.index+1,T.sources.SILENT),this.quill.focus()}}const rg={bindings:{bold:ui("bold"),italic:ui("italic"),underline:ui("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","+1",T.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(r,t){return t.collapsed&&t.offset!==0?!0:(this.quill.format("indent","-1",T.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(r,t){t.format.indent!=null?this.quill.format("indent","-1",T.sources.USER):t.format.list!=null&&this.quill.format("list",!1,T.sources.USER)}},"indent code-block":ol(!0),"outdent code-block":ol(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(r){this.quill.deleteText(r.index-1,1,T.sources.USER)}},tab:{key:"Tab",handler(r,t){if(t.format.table)return!0;this.quill.history.cutoff();const e=new H().retain(r.index).delete(r.length).insert("	");return this.quill.updateContents(e,T.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index+1,T.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,T.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(r,t){const e={list:!1};t.format.indent&&(e.indent=!1),this.quill.formatLine(r.index,r.length,e,T.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(r){const[t,e]=this.quill.getLine(r.index),n={...t.formats(),list:"checked"},s=new H().retain(r.index).insert(`
`,n).retain(t.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(s,T.sources.USER),this.quill.setSelection(r.index+1,T.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(r,t){const[e,n]=this.quill.getLine(r.index),s=new H().retain(r.index).insert(`
`,t.format).retain(e.length()-n-1).retain(1,{header:null});this.quill.updateContents(s,T.sources.USER),this.quill.setSelection(r.index+1,T.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(r){const t=this.quill.getModule("table");if(t){const[e,n,s,i]=t.getTable(r),l=ig(e,n,s,i);if(l==null)return;let o=e.offset();if(l<0){const c=new H().retain(o).insert(`
`);this.quill.updateContents(c,T.sources.USER),this.quill.setSelection(r.index+1,r.length,T.sources.SILENT)}else if(l>0){o+=e.length();const c=new H().retain(o).insert(`
`);this.quill.updateContents(c,T.sources.USER),this.quill.setSelection(o,T.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(r,t){const{event:e,line:n}=t,s=n.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(s-1,T.sources.USER):this.quill.setSelection(s+n.length(),T.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(r,t){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=t.prefix,[n,s]=this.quill.getLine(r.index);if(s>e)return!0;let i;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(r.index," ",T.sources.USER),this.quill.history.cutoff();const l=new H().retain(r.index-s).delete(e+1).retain(n.length()-2-s).retain(1,{list:i});return this.quill.updateContents(l,T.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(r.index-e,T.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(r){const[t,e]=this.quill.getLine(r.index);let n=2,s=t;for(;s!=null&&s.length()<=1&&s.formats()["code-block"];)if(s=s.prev,n-=1,n<=0){const i=new H().retain(r.index+t.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,T.sources.USER),this.quill.setSelection(r.index-1,T.sources.SILENT),!1}return!0}},"embed left":Es("ArrowLeft",!1),"embed left shift":Es("ArrowLeft",!0),"embed right":Es("ArrowRight",!1),"embed right shift":Es("ArrowRight",!0),"table down":cl(!1),"table up":cl(!0)}};Fs.DEFAULTS=rg;function ol(r){return{key:"Tab",shiftKey:!r,format:{"code-block":!0},handler(t,e){let{event:n}=e;const s=this.quill.scroll.query("code-block"),{TAB:i}=s;if(t.length===0&&!n.shiftKey){this.quill.insertText(t.index,i,T.sources.USER),this.quill.setSelection(t.index+i.length,T.sources.SILENT);return}const l=t.length===0?this.quill.getLines(t.index,1):this.quill.getLines(t);let{index:o,length:c}=t;l.forEach((h,p)=>{r?(h.insertAt(0,i),p===0?o+=i.length:c+=i.length):h.domNode.textContent.startsWith(i)&&(h.deleteAt(0,i.length),p===0?o-=i.length:c-=i.length)}),this.quill.update(T.sources.USER),this.quill.setSelection(o,c,T.sources.SILENT)}}}function Es(r,t){return{key:r,shiftKey:t,altKey:null,[r==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(n){let{index:s}=n;r==="ArrowRight"&&(s+=n.length+1);const[i]=this.quill.getLeaf(s);return i instanceof de?(r==="ArrowLeft"?t?this.quill.setSelection(n.index-1,n.length+1,T.sources.USER):this.quill.setSelection(n.index-1,T.sources.USER):t?this.quill.setSelection(n.index,n.length+1,T.sources.USER):this.quill.setSelection(n.index+n.length+1,T.sources.USER),!1):!0}}}function ui(r){return{key:r[0],shortKey:!0,handler(t,e){this.quill.format(r,!e.format[r],T.sources.USER)}}}function cl(r){return{key:r?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(t,e){const n=r?"prev":"next",s=e.line,i=s.parent[n];if(i!=null){if(i.statics.blotName==="table-row"){let l=i.children.head,o=s;for(;o.prev!=null;)o=o.prev,l=l.next;const c=l.offset(this.quill.scroll)+Math.min(e.offset,l.length()-1);this.quill.setSelection(c,0,T.sources.USER)}}else{const l=s.table()[n];l!=null&&(r?this.quill.setSelection(l.offset(this.quill.scroll)+l.length()-1,0,T.sources.USER):this.quill.setSelection(l.offset(this.quill.scroll),0,T.sources.USER))}return!1}}}function sg(r){if(typeof r=="string"||typeof r=="number")r={key:r};else if(typeof r=="object")r=fr(r);else return null;return r.shortKey&&(r[ng]=r.shortKey,delete r.shortKey),r}function ia(r){let{quill:t,range:e}=r;const n=t.getLines(e);let s={};if(n.length>1){const i=n[0].formats(),l=n[n.length-1].formats();s=xe.AttributeMap.diff(l,i)||{}}t.deleteText(e,T.sources.USER),Object.keys(s).length>0&&t.formatLine(e.index,1,s,T.sources.USER),t.setSelection(e.index,T.sources.SILENT)}function ig(r,t,e,n){return t.prev==null&&t.next==null?e.prev==null&&e.next==null?n===0?-1:1:e.prev==null?-1:1:t.prev==null?-1:t.next==null?1:null}const ag=/font-weight:\s*normal/,lg=["P","OL","UL"],ul=r=>r&&lg.includes(r.tagName),og=r=>{Array.from(r.querySelectorAll("br")).filter(t=>ul(t.previousElementSibling)&&ul(t.nextElementSibling)).forEach(t=>{var e;(e=t.parentNode)==null||e.removeChild(t)})},cg=r=>{Array.from(r.querySelectorAll('b[style*="font-weight"]')).filter(t=>{var e;return(e=t.getAttribute("style"))==null?void 0:e.match(ag)}).forEach(t=>{var n;const e=r.createDocumentFragment();e.append(...t.childNodes),(n=t.parentNode)==null||n.replaceChild(e,t)})};function ug(r){r.querySelector('[id^="docs-internal-guid-"]')&&(cg(r),og(r))}const hg=/\bmso-list:[^;]*ignore/i,dg=/\bmso-list:[^;]*\bl(\d+)/i,fg=/\bmso-list:[^;]*\blevel(\d+)/i,pg=(r,t)=>{const e=r.getAttribute("style"),n=e==null?void 0:e.match(dg);if(!n)return null;const s=Number(n[1]),i=e==null?void 0:e.match(fg),l=i?Number(i[1]):1,o=new RegExp(`@list l${s}:level${l}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=t.match(o),h=c&&c[1]==="bullet"?"bullet":"ordered";return{id:s,indent:l,type:h,element:r}},gg=r=>{var l,o;const t=Array.from(r.querySelectorAll("[style*=mso-list]")),e=[],n=[];t.forEach(c=>{(c.getAttribute("style")||"").match(hg)?e.push(c):n.push(c)}),e.forEach(c=>{var h;return(h=c.parentNode)==null?void 0:h.removeChild(c)});const s=r.documentElement.innerHTML,i=n.map(c=>pg(c,s)).filter(c=>c);for(;i.length;){const c=[];let h=i.shift();for(;h;)c.push(h),h=i.length&&((l=i[0])==null?void 0:l.element)===h.element.nextElementSibling&&i[0].id===h.id?i.shift():null;const p=document.createElement("ul");c.forEach(m=>{const y=document.createElement("li");y.setAttribute("data-list",m.type),m.indent>1&&y.setAttribute("class",`ql-indent-${m.indent-1}`),y.innerHTML=m.element.innerHTML,p.appendChild(y)});const b=(o=c[0])==null?void 0:o.element,{parentNode:d}=b??{};b&&(d==null||d.replaceChild(p,b)),c.slice(1).forEach(m=>{let{element:y}=m;d==null||d.removeChild(y)})}};function mg(r){r.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&gg(r)}const bg=[mg,ug],yg=r=>{r.documentElement&&bg.forEach(t=>{t(r)})},vg=gn("quill:clipboard"),Eg=[[Node.TEXT_NODE,Ig],[Node.TEXT_NODE,dl],["br",Ng],[Node.ELEMENT_NODE,dl],[Node.ELEMENT_NODE,Tg],[Node.ELEMENT_NODE,Ag],[Node.ELEMENT_NODE,Og],["li",Cg],["ol, ul",Lg],["pre",Sg],["tr",qg],["b",hi("bold")],["i",hi("italic")],["strike",hi("strike")],["style",_g]],wg=[Xp,yo].reduce((r,t)=>(r[t.keyName]=t,r),{}),hl=[mo,ta,Qi,Eo,xo,Ao].reduce((r,t)=>(r[t.keyName]=t,r),{});class To extends Be{constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",n=>this.onCaptureCopy(n,!1)),this.quill.root.addEventListener("cut",n=>this.onCaptureCopy(n,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],Eg.concat(this.options.matchers??[]).forEach(n=>{let[s,i]=n;this.addMatcher(s,i)})}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s[Zt.blotName])return new H().insert(n||"",{[Zt.blotName]:s[Zt.blotName]});if(!e)return new H().insert(n||"",s);const i=this.convertHTML(e);return ts(i,`
`)&&(i.ops[i.ops.length-1].attributes==null||s.table)?i.compose(new H().retain(i.length()-1).delete(1)):i}normalizeHTML(t){yg(t)}convertHTML(t){const e=new DOMParser().parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,s=new WeakMap,[i,l]=this.prepareMatching(n,s);return aa(this.quill.scroll,n,i,l,s)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:T.sources.API;if(typeof t=="string"){const s=this.convert({html:t,text:""});this.quill.setContents(s,e),this.quill.setSelection(0,T.sources.SILENT)}else{const s=this.convert({html:e,text:""});this.quill.updateContents(new H().retain(t).concat(s),n),this.quill.setSelection(t+s.length(),T.sources.SILENT)}}onCaptureCopy(t){var l,o;let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(n==null)return;const{html:s,text:i}=this.onCopy(n,e);(l=t.clipboardData)==null||l.setData("text/plain",i),(o=t.clipboardData)==null||o.setData("text/html",s),e&&ia({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(t){var l,o,c,h,p;if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const n=(l=t.clipboardData)==null?void 0:l.getData("text/html");let s=(o=t.clipboardData)==null?void 0:o.getData("text/plain");if(!n&&!s){const b=(c=t.clipboardData)==null?void 0:c.getData("text/uri-list");b&&(s=this.normalizeURIList(b))}const i=Array.from(((h=t.clipboardData)==null?void 0:h.files)||[]);if(!n&&i.length>0){this.quill.uploader.upload(e,i);return}if(n&&i.length>0){const b=new DOMParser().parseFromString(n,"text/html");if(b.body.childElementCount===1&&((p=b.body.firstElementChild)==null?void 0:p.tagName)==="IMG"){this.quill.uploader.upload(e,i);return}}this.onPaste(e,{html:n,text:s})}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:s}=e;const i=this.quill.getFormat(t.index),l=this.convert({text:n,html:s},i);vg.log("onPaste",l,{text:n,html:s});const o=new H().retain(t.index).delete(t.length).concat(l);this.quill.updateContents(o,T.sources.USER),this.quill.setSelection(o.length()-t.length,T.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],s=[];return this.matchers.forEach(i=>{const[l,o]=i;switch(l){case Node.TEXT_NODE:s.push(o);break;case Node.ELEMENT_NODE:n.push(o);break;default:Array.from(t.querySelectorAll(l)).forEach(c=>{if(e.has(c)){const h=e.get(c);h==null||h.push(o)}else e.set(c,[o])});break}}),[n,s]}}R(To,"DEFAULTS",{matchers:[]});function Jn(r,t,e,n){return n.query(t)?r.reduce((s,i)=>{if(!i.insert)return s;if(i.attributes&&i.attributes[t])return s.push(i);const l=e?{[t]:e}:{};return s.insert(i.insert,{...l,...i.attributes})},new H):r}function ts(r,t){let e="";for(let n=r.ops.length-1;n>=0&&e.length<t.length;--n){const s=r.ops[n];if(typeof s.insert!="string")break;e=s.insert+e}return e.slice(-1*t.length)===t}function On(r,t){if(!(r instanceof Element))return!1;const e=t.query(r);return e&&e.prototype instanceof de?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(r.tagName.toLowerCase())}function xg(r,t){return r.previousElementSibling&&r.nextElementSibling&&!On(r.previousElementSibling,t)&&!On(r.nextElementSibling,t)}const ws=new WeakMap;function No(r){return r==null?!1:(ws.has(r)||(r.tagName==="PRE"?ws.set(r,!0):ws.set(r,No(r.parentNode))),ws.get(r))}function aa(r,t,e,n,s){return t.nodeType===t.TEXT_NODE?n.reduce((i,l)=>l(t,i,r),new H):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((i,l)=>{let o=aa(r,l,e,n,s);return l.nodeType===t.ELEMENT_NODE&&(o=e.reduce((c,h)=>h(l,c,r),o),o=(s.get(l)||[]).reduce((c,h)=>h(l,c,r),o)),i.concat(o)},new H):new H}function hi(r){return(t,e,n)=>Jn(e,r,!0,n)}function Ag(r,t,e){const n=Ye.keys(r),s=De.keys(r),i=kn.keys(r),l={};return n.concat(s).concat(i).forEach(o=>{let c=e.query(o,V.ATTRIBUTE);c!=null&&(l[c.attrName]=c.value(r),l[c.attrName])||(c=wg[o],c!=null&&(c.attrName===o||c.keyName===o)&&(l[c.attrName]=c.value(r)||void 0),c=hl[o],c!=null&&(c.attrName===o||c.keyName===o)&&(c=hl[o],l[c.attrName]=c.value(r)||void 0))}),Object.entries(l).reduce((o,c)=>{let[h,p]=c;return Jn(o,h,p,e)},t)}function Tg(r,t,e){const n=e.query(r);if(n==null)return t;if(n.prototype instanceof de){const s={},i=n.value(r);if(i!=null)return s[n.blotName]=i,new H().insert(s,n.formats(r,e))}else if(n.prototype instanceof Zr&&!ts(t,`
`)&&t.insert(`
`),"blotName"in n&&"formats"in n&&typeof n.formats=="function")return Jn(t,n.blotName,n.formats(r,e),e);return t}function Ng(r,t){return ts(t,`
`)||t.insert(`
`),t}function Sg(r,t,e){const n=e.query("code-block"),s=n&&"formats"in n&&typeof n.formats=="function"?n.formats(r,e):!0;return Jn(t,"code-block",s,e)}function _g(){return new H}function Cg(r,t,e){const n=e.query(r);if(n==null||n.blotName!=="list"||!ts(t,`
`))return t;let s=-1,i=r.parentNode;for(;i!=null;)["OL","UL"].includes(i.tagName)&&(s+=1),i=i.parentNode;return s<=0?t:t.reduce((l,o)=>o.insert?o.attributes&&typeof o.attributes.indent=="number"?l.push(o):l.insert(o.insert,{indent:s,...o.attributes||{}}):l,new H)}function Lg(r,t,e){const n=r;let s=n.tagName==="OL"?"ordered":"bullet";const i=n.getAttribute("data-checked");return i&&(s=i==="true"?"checked":"unchecked"),Jn(t,"list",s,e)}function dl(r,t,e){if(!ts(t,`
`)){if(On(r,e)&&(r.childNodes.length>0||r instanceof HTMLParagraphElement))return t.insert(`
`);if(t.length()>0&&r.nextSibling){let n=r.nextSibling;for(;n!=null;){if(On(n,e))return t.insert(`
`);const s=e.query(n);if(s&&s.prototype instanceof se)return t.insert(`
`);n=n.firstChild}}}return t}function Og(r,t,e){var i;const n={},s=r.style||{};return s.fontStyle==="italic"&&(n.italic=!0),s.textDecoration==="underline"&&(n.underline=!0),s.textDecoration==="line-through"&&(n.strike=!0),((i=s.fontWeight)!=null&&i.startsWith("bold")||parseInt(s.fontWeight,10)>=700)&&(n.bold=!0),t=Object.entries(n).reduce((l,o)=>{let[c,h]=o;return Jn(l,c,h,e)},t),parseFloat(s.textIndent||0)>0?new H().insert("	").concat(t):t}function qg(r,t,e){var s,i;const n=((s=r.parentElement)==null?void 0:s.tagName)==="TABLE"?r.parentElement:(i=r.parentElement)==null?void 0:i.parentElement;if(n!=null){const o=Array.from(n.querySelectorAll("tr")).indexOf(r)+1;return Jn(t,"table",o,e)}return t}function Ig(r,t,e){var s;let n=r.data;if(((s=r.parentElement)==null?void 0:s.tagName)==="O:P")return t.insert(n.trim());if(!No(r)){if(n.trim().length===0&&n.includes(`
`)&&!xg(r,e))return t;n=n.replace(/[^\S\u00a0]/g," "),n=n.replace(/ {2,}/g," "),(r.previousSibling==null&&r.parentElement!=null&&On(r.parentElement,e)||r.previousSibling instanceof Element&&On(r.previousSibling,e))&&(n=n.replace(/^ /,"")),(r.nextSibling==null&&r.parentElement!=null&&On(r.parentElement,e)||r.nextSibling instanceof Element&&On(r.nextSibling,e))&&(n=n.replace(/ $/,"")),n=n.replaceAll(""," ")}return t.insert(n)}class So extends Be{constructor(e,n){super(e,n);R(this,"lastRecorded",0);R(this,"ignoreChange",!1);R(this,"stack",{undo:[],redo:[]});R(this,"currentRange",null);this.quill.on(T.events.EDITOR_CHANGE,(s,i,l,o)=>{s===T.events.SELECTION_CHANGE?i&&o!==T.sources.SILENT&&(this.currentRange=i):s===T.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||o===T.sources.USER?this.record(i,l):this.transform(i)),this.currentRange=qi(this.currentRange,i))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(e,n){if(this.stack[e].length===0)return;const s=this.stack[e].pop();if(!s)return;const i=this.quill.getContents(),l=s.delta.invert(i);this.stack[n].push({delta:l,range:qi(s.range,l)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,T.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(e,n){if(e.ops.length===0)return;this.stack.redo=[];let s=e.invert(n),i=this.currentRange;const l=Date.now();if(this.lastRecorded+this.options.delay>l&&this.stack.undo.length>0){const o=this.stack.undo.pop();o&&(s=s.compose(o.delta),i=o.range)}else this.lastRecorded=l;s.length()!==0&&(this.stack.undo.push({delta:s,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(e){fl(this.stack.undo,e),fl(this.stack.redo,e)}undo(){this.change("undo","redo")}restoreSelection(e){if(e.range)this.quill.setSelection(e.range,T.sources.USER);else{const n=kg(this.quill.scroll,e.delta);this.quill.setSelection(n,T.sources.USER)}}}R(So,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});function fl(r,t){let e=t;for(let n=r.length-1;n>=0;n-=1){const s=r[n];r[n]={delta:e.transform(s.delta,!0),range:s.range&&qi(s.range,e)},e=s.delta.transform(e),r[n].delta.length()===0&&r.splice(n,1)}}function Rg(r,t){const e=t.ops[t.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(n=>r.query(n,V.BLOCK)!=null):!1}function kg(r,t){const e=t.reduce((s,i)=>s+(i.delete||0),0);let n=t.length()-e;return Rg(r,t)&&(n-=1),n}function qi(r,t){if(!r)return r;const e=t.transformPosition(r.index),n=t.transformPosition(r.index+r.length);return{index:e,length:n-e}}class _o extends Be{constructor(t,e){super(t,e),t.root.addEventListener("drop",n=>{var l;n.preventDefault();let s=null;if(document.caretRangeFromPoint)s=document.caretRangeFromPoint(n.clientX,n.clientY);else if(document.caretPositionFromPoint){const o=document.caretPositionFromPoint(n.clientX,n.clientY);s=document.createRange(),s.setStart(o.offsetNode,o.offset),s.setEnd(o.offsetNode,o.offset)}const i=s&&t.selection.normalizeNative(s);if(i){const o=t.selection.normalizedToRange(i);(l=n.dataTransfer)!=null&&l.files&&this.upload(o,n.dataTransfer.files)}})}upload(t,e){const n=[];Array.from(e).forEach(s=>{var i;s&&((i=this.options.mimetypes)!=null&&i.includes(s.type))&&n.push(s)}),n.length>0&&this.options.handler.call(this,t,n)}}_o.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(r,t){if(!this.quill.scroll.query("image"))return;const e=t.map(n=>new Promise(s=>{const i=new FileReader;i.onload=()=>{s(i.result)},i.readAsDataURL(n)}));Promise.all(e).then(n=>{const s=n.reduce((i,l)=>i.insert({image:l}),new H().retain(r.index).delete(r.length));this.quill.updateContents(s,$.sources.USER),this.quill.setSelection(r.index+n.length,$.sources.SILENT)})}};const Mg=["insertText","insertReplacementText"];class Dg extends Be{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",n=>{this.handleBeforeInput(n)}),/Android/i.test(navigator.userAgent)||t.on(T.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(t){ia({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t.length===0)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents(new H().retain(t.index).insert(e,n),T.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,T.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!Mg.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const n=jg(t);if(n==null)return;const s=this.quill.selection.normalizeNative(e),i=s?this.quill.selection.normalizedToRange(s):null;i&&this.replaceText(i,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}}function jg(r){var t;return typeof r.data=="string"?r.data:(t=r.dataTransfer)!=null&&t.types.includes("text/plain")?r.dataTransfer.getData("text/plain"):null}const Bg=/Mac/i.test(navigator.platform),Pg=100,$g=r=>!!(r.key==="ArrowLeft"||r.key==="ArrowRight"||r.key==="ArrowUp"||r.key==="ArrowDown"||r.key==="Home"||Bg&&r.key==="a"&&r.ctrlKey===!0);class Ug extends Be{constructor(e,n){super(e,n);R(this,"isListening",!1);R(this,"selectionChangeDeadline",0);this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(e,n){let{line:s,event:i}=n;if(!(s instanceof Re)||!s.uiNode)return!0;const l=getComputedStyle(s.domNode).direction==="rtl";return l&&i.key!=="ArrowRight"||!l&&i.key!=="ArrowLeft"?!0:(this.quill.setSelection(e.index-1,e.length+(i.shiftKey?1:0),T.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",e=>{!e.defaultPrevented&&$g(e)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Pg,this.isListening)return;this.isListening=!0;const e=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",e,{once:!0})}handleSelectionChange(){const e=document.getSelection();if(!e)return;const n=e.getRangeAt(0);if(n.collapsed!==!0||n.startOffset!==0)return;const s=this.quill.scroll.find(n.startContainer);if(!(s instanceof Re)||!s.uiNode)return;const i=document.createRange();i.setStartAfter(s.uiNode),i.setEndAfter(s.uiNode),e.removeAllRanges(),e.addRange(i)}}T.register({"blots/block":kt,"blots/block/embed":se,"blots/break":je,"blots/container":Yn,"blots/cursor":yr,"blots/embed":Yi,"blots/inline":Me,"blots/scroll":dr,"blots/text":ke,"modules/clipboard":To,"modules/history":So,"modules/keyboard":Fs,"modules/uploader":_o,"modules/input":Dg,"modules/uiNode":Ug});class Fg extends De{add(t,e){let n=0;if(e==="+1"||e==="-1"){const s=this.value(t)||0;n=e==="+1"?s+1:s-1}else typeof e=="number"&&(n=e);return n===0?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}const Hg=new Fg("indent","ql-indent",{scope:V.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Ii extends kt{}R(Ii,"blotName","blockquote"),R(Ii,"tagName","blockquote");class Ri extends kt{static formats(t){return this.tagName.indexOf(t.tagName)+1}}R(Ri,"blotName","header"),R(Ri,"tagName",["H1","H2","H3","H4","H5","H6"]);class es extends Yn{}es.blotName="list-container";es.tagName="OL";class ns extends kt{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){T.register(es)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const l=this.statics.formats(e,t);l==="checked"?(this.format("list","unchecked"),i.preventDefault()):l==="unchecked"&&(this.format("list","checked"),i.preventDefault())};n.addEventListener("mousedown",s),n.addEventListener("touchstart",s),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}ns.blotName="list";ns.tagName="LI";es.allowedChildren=[ns];ns.requiredContainer=es;class Xr extends Me{static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}R(Xr,"blotName","bold"),R(Xr,"tagName",["STRONG","B"]);class ki extends Xr{}R(ki,"blotName","italic"),R(ki,"tagName",["EM","I"]);class un extends Me{static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Co(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t!==this.statics.blotName||!e?super.format(t,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}R(un,"blotName","link"),R(un,"tagName","A"),R(un,"SANITIZED_URL","about:blank"),R(un,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);function Co(r,t){const e=document.createElement("a");e.href=r;const n=e.href.slice(0,e.href.indexOf(":"));return t.indexOf(n)>-1}class Mi extends Me{static create(t){return t==="super"?document.createElement("sup"):t==="sub"?document.createElement("sub"):super.create(t)}static formats(t){if(t.tagName==="SUB")return"sub";if(t.tagName==="SUP")return"super"}}R(Mi,"blotName","script"),R(Mi,"tagName",["SUB","SUP"]);class Di extends Xr{}R(Di,"blotName","strike"),R(Di,"tagName",["S","STRIKE"]);class ji extends Me{}R(ji,"blotName","underline"),R(ji,"tagName","U");class Ss extends Yi{static create(t){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return typeof t=="string"&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}}R(Ss,"blotName","formula"),R(Ss,"className","ql-formula"),R(Ss,"tagName","SPAN");const pl=["alt","height","width"];class Bi extends de{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return pl.reduce((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Co(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){pl.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}}R(Bi,"blotName","image"),R(Bi,"tagName","IMG");const gl=["height","width"];class _s extends se{static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return gl.reduce((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e),{})}static sanitize(t){return un.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){gl.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}}R(_s,"blotName","video"),R(_s,"className","ql-video"),R(_s,"tagName","IFRAME");const Ur=new De("code-token","hljs",{scope:V.INLINE});class dn extends Me{static formats(t,e){for(;t!=null&&t!==e.domNode;){if(t.classList&&t.classList.contains(Zt.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),Ur.add(this.domNode,n)}format(t,e){t!==dn.blotName?super.format(t,e):e?Ur.add(this.domNode,e):(Ur.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Ur.value(this.domNode)||this.unwrap()}}dn.blotName="code-token";dn.className="ql-token";class we extends Zt{static create(t){const e=super.create(t);return typeof t=="string"&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),dn.blotName,!1),super.replaceWith(t,e)}}class Hr extends Xn{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===we.blotName&&(this.forceNext=!0,this.children.forEach(n=>{n.format(t,e)}))}formatAt(t,e,n,s){n===we.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,s)}highlight(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const s=`${Array.from(this.domNode.childNodes).filter(l=>l!==this.uiNode).map(l=>l.textContent).join(`
`)}
`,i=we.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==s){if(s.trim().length>0||this.cachedText==null){const l=this.children.reduce((c,h)=>c.concat(po(h,!1)),new H),o=t(s,i);l.diff(o).reduce((c,h)=>{let{retain:p,attributes:b}=h;return p?(b&&Object.keys(b).forEach(d=>{[we.blotName,dn.blotName].includes(d)&&this.formatAt(c,p,d,b[d])}),c+p):c},0)}this.cachedText=s,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?we.formats(n.domNode):"plain"}">
${Us(this.code(t,e))}
</pre>`}optimize(t){if(super.optimize(t),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=we.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Hr.allowedChildren=[we];we.requiredContainer=Hr;we.allowedChildren=[dn,yr,ke,je];const zg=(r,t,e)=>{if(typeof r.versionString=="string"){const n=r.versionString.split(".")[0];if(parseInt(n,10)>=11)return r.highlight(e,{language:t}).value}return r.highlight(t,e).value};class Lo extends Be{static register(){T.register(dn,!0),T.register(we,!0),T.register(Hr,!0)}constructor(t,e){if(super(t,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((n,s)=>{let{key:i}=s;return n[i]=!0,n},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(T.events.SCROLL_BLOT_MOUNT,t=>{if(!(t instanceof Hr))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(n=>{let{key:s,label:i}=n;const l=e.ownerDocument.createElement("option");l.textContent=i,l.setAttribute("value",s),e.appendChild(l)}),e.addEventListener("change",()=>{t.format(we.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)}),t.uiNode==null&&(t.attachUI(e),t.children.head&&(e.value=we.formats(t.children.head.domNode)))})}initTimer(){let t=null;this.quill.on(T.events.SCROLL_OPTIMIZE,()=>{t&&clearTimeout(t),t=setTimeout(()=>{this.highlight(),t=null},this.options.interval)})}highlight(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(T.sources.USER);const n=this.quill.getSelection();(t==null?this.quill.scroll.descendants(Hr):[t]).forEach(i=>{i.highlight(this.highlightBlot,e)}),this.quill.update(T.sources.SILENT),n!=null&&this.quill.setSelection(n,T.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Us(t).split(`
`).reduce((s,i,l)=>(l!==0&&s.insert(`
`,{[Zt.blotName]:e}),s.insert(i)),new H);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Zt.className),n.innerHTML=zg(this.options.hljs,e,t),aa(this.quill.scroll,n,[(s,i)=>{const l=Ur.value(s);return l?i.compose(new H().retain(i.length(),{[dn.blotName]:l})):i}],[(s,i)=>s.data.split(`
`).reduce((l,o,c)=>(c!==0&&l.insert(`
`,{[Zt.blotName]:e}),l.insert(o)),i)],new WeakMap)}}Lo.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};const Vr=class Vr extends kt{static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",la()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Vr.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}};R(Vr,"blotName","table"),R(Vr,"tagName","TD");let Ie=Vr;class fn extends Yn{checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach(e=>{if(e.next==null)return;const n=e.formats(),s=e.next.formats();if(n.table!==s.table){const i=this.splitAfter(e);i&&i.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}R(fn,"blotName","table-row"),R(fn,"tagName","TR");class Ze extends Yn{}R(Ze,"blotName","table-body"),R(Ze,"tagName","TBODY");class Er extends Yn{balanceCells(){const t=this.descendants(fn),e=t.reduce((n,s)=>Math.max(s.children.length,n),0);t.forEach(n=>{new Array(e-n.children.length).fill(0).forEach(()=>{let s;n.children.head!=null&&(s=Ie.formats(n.children.head.domNode));const i=this.scroll.create(Ie.blotName,s);n.appendChild(i),i.optimize()})})}cells(t){return this.rows().map(e=>e.children.at(t))}deleteColumn(t){const[e]=this.descendant(Ze);e==null||e.children.head==null||e.children.forEach(n=>{const s=n.children.at(t);s!=null&&s.remove()})}insertColumn(t){const[e]=this.descendant(Ze);e==null||e.children.head==null||e.children.forEach(n=>{const s=n.children.at(t),i=Ie.formats(n.children.head.domNode),l=this.scroll.create(Ie.blotName,i);n.insertBefore(l,s)})}insertRow(t){const[e]=this.descendant(Ze);if(e==null||e.children.head==null)return;const n=la(),s=this.scroll.create(fn.blotName);e.children.head.children.forEach(()=>{const l=this.scroll.create(Ie.blotName,n);s.appendChild(l)});const i=e.children.at(t);e.insertBefore(s,i)}rows(){const t=this.children.head;return t==null?[]:t.children.map(e=>e)}}R(Er,"blotName","table-container"),R(Er,"tagName","TABLE");Er.allowedChildren=[Ze];Ze.requiredContainer=Er;Ze.allowedChildren=[fn];fn.requiredContainer=Ze;fn.allowedChildren=[Ie];Ie.requiredContainer=fn;function la(){return`row-${Math.random().toString(36).slice(2,6)}`}class Vg extends Be{static register(){T.register(Ie),T.register(fn),T.register(Ze),T.register(Er)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Er).forEach(t=>{t.balanceCells()})}deleteColumn(){const[t,,e]=this.getTable();e!=null&&(t.deleteColumn(e.cellOffset()),this.quill.update(T.sources.USER))}deleteRow(){const[,t]=this.getTable();t!=null&&(t.remove(),this.quill.update(T.sources.USER))}deleteTable(){const[t]=this.getTable();if(t==null)return;const e=t.offset();t.remove(),this.quill.update(T.sources.USER),this.quill.setSelection(e,T.sources.SILENT)}getTable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(t==null)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(e==null||e.statics.blotName!==Ie.blotName)return[null,null,null,-1];const s=e.parent;return[s.parent.parent,s,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,s,i]=this.getTable(e);if(i==null)return;const l=i.cellOffset();n.insertColumn(l+t),this.quill.update(T.sources.USER);let o=s.rowOffset();t===0&&(o+=1),this.quill.setSelection(e.index+o,e.length,T.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,s,i]=this.getTable(e);if(i==null)return;const l=s.rowOffset();n.insertRow(l+t),this.quill.update(T.sources.USER),t>0?this.quill.setSelection(e,T.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,T.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(n==null)return;const s=new Array(t).fill(0).reduce(i=>{const l=new Array(e).fill(`
`).join("");return i.insert(l,{table:la()})},new H().retain(n.index));this.quill.updateContents(s,T.sources.USER),this.quill.setSelection(n.index,T.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(T.events.SCROLL_OPTIMIZE,t=>{t.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(T.events.TEXT_CHANGE,(n,s,i)=>{i===T.sources.USER&&this.balanceTables()}),!0):!1)})}}const ml=gn("quill:toolbar");class oa extends Be{constructor(t,e){var n,s;if(super(t,e),Array.isArray(this.options.container)){const i=document.createElement("div");i.setAttribute("role","toolbar"),Kg(i,this.options.container),(s=(n=t.container)==null?void 0:n.parentNode)==null||s.insertBefore(i,t.container),this.container=i}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){ml.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(i=>{var o;const l=(o=this.options.handlers)==null?void 0:o[i];l&&this.addHandler(i,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(i=>{this.attach(i)}),this.quill.on(T.events.EDITOR_CHANGE,()=>{const[i]=this.quill.selection.getRange();this.update(i)})}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find(s=>s.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),t.tagName==="BUTTON"&&t.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){ml.warn("ignoring attaching to nonexistent format",e,t);return}const n=t.tagName==="SELECT"?"change":"click";t.addEventListener(n,s=>{let i;if(t.tagName==="SELECT"){if(t.selectedIndex<0)return;const o=t.options[t.selectedIndex];o.hasAttribute("selected")?i=!1:i=o.value||!1}else t.classList.contains("ql-active")?i=!1:i=t.value||!t.hasAttribute("value"),s.preventDefault();this.quill.focus();const[l]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof de){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents(new H().retain(l.index).delete(l.length).insert({[e]:i}),T.sources.USER)}else this.quill.format(e,i,T.sources.USER);this.update(l)}),this.controls.push([e,t])}update(t){const e=t==null?{}:this.quill.getFormat(t);this.controls.forEach(n=>{const[s,i]=n;if(i.tagName==="SELECT"){let l=null;if(t==null)l=null;else if(e[s]==null)l=i.querySelector("option[selected]");else if(!Array.isArray(e[s])){let o=e[s];typeof o=="string"&&(o=o.replace(/"/g,'\\"')),l=i.querySelector(`option[value="${o}"]`)}l==null?(i.value="",i.selectedIndex=-1):l.selected=!0}else if(t==null)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){const l=e[s],o=l===i.getAttribute("value")||l!=null&&l.toString()===i.getAttribute("value")||l==null&&!i.getAttribute("value");i.classList.toggle("ql-active",o),i.setAttribute("aria-pressed",o.toString())}else{const l=e[s]!=null;i.classList.toggle("ql-active",l),i.setAttribute("aria-pressed",l.toString())}})}}oa.DEFAULTS={};function bl(r,t,e){const n=document.createElement("button");n.setAttribute("type","button"),n.classList.add(`ql-${t}`),n.setAttribute("aria-pressed","false"),e!=null?(n.value=e,n.setAttribute("aria-label",`${t}: ${e}`)):n.setAttribute("aria-label",t),r.appendChild(n)}function Kg(r,t){Array.isArray(t[0])||(t=[t]),t.forEach(e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach(s=>{if(typeof s=="string")bl(n,s);else{const i=Object.keys(s)[0],l=s[i];Array.isArray(l)?Gg(n,i,l):bl(n,i,l)}}),r.appendChild(n)})}function Gg(r,t,e){const n=document.createElement("select");n.classList.add(`ql-${t}`),e.forEach(s=>{const i=document.createElement("option");s!==!1?i.setAttribute("value",String(s)):i.setAttribute("selected","selected"),n.appendChild(i)}),r.appendChild(n)}oa.DEFAULTS={container:null,handlers:{clean(){const r=this.quill.getSelection();if(r!=null)if(r.length===0){const t=this.quill.getFormat();Object.keys(t).forEach(e=>{this.quill.scroll.query(e,V.INLINE)!=null&&this.quill.format(e,!1,T.sources.USER)})}else this.quill.removeFormat(r.index,r.length,T.sources.USER)},direction(r){const{align:t}=this.quill.getFormat();r==="rtl"&&t==null?this.quill.format("align","right",T.sources.USER):!r&&t==="right"&&this.quill.format("align",!1,T.sources.USER),this.quill.format("direction",r,T.sources.USER)},indent(r){const t=this.quill.getSelection(),e=this.quill.getFormat(t),n=parseInt(e.indent||0,10);if(r==="+1"||r==="-1"){let s=r==="+1"?1:-1;e.direction==="rtl"&&(s*=-1),this.quill.format("indent",n+s,T.sources.USER)}},link(r){r===!0&&(r=prompt("Enter link URL:")),this.quill.format("link",r,T.sources.USER)},list(r){const t=this.quill.getSelection(),e=this.quill.getFormat(t);r==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,T.sources.USER):this.quill.format("list","unchecked",T.sources.USER):this.quill.format("list",r,T.sources.USER)}}};const Wg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',Zg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',Yg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',Xg='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',Jg='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',Qg='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',tm='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',em='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',yl='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',nm='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',rm='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',sm='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',im='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',am='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',lm='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',om='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',cm='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',um='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hm='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',dm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',fm='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',pm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',gm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',mm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',bm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',ym='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',vm='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Em='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',wm='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',xm='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',Am='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Tm='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Nm='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>',Jr={align:{"":Wg,center:Zg,right:Yg,justify:Xg},background:Jg,blockquote:Qg,bold:tm,clean:em,code:yl,"code-block":yl,color:nm,direction:{"":rm,rtl:sm},formula:im,header:{1:am,2:lm,3:om,4:cm,5:um,6:hm},italic:dm,image:fm,indent:{"+1":pm,"-1":gm},link:mm,list:{bullet:bm,check:ym,ordered:vm},script:{sub:Em,super:wm},strike:xm,table:Am,underline:Tm,video:Nm},Sm='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let vl=0;function El(r,t){r.setAttribute(t,`${r.getAttribute(t)!=="true"}`)}class Hs{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),El(this.label,"aria-expanded"),El(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",s=>{switch(s.key){case"Enter":this.selectItem(e,!0),s.preventDefault();break;case"Escape":this.escape(),s.preventDefault();break}}),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=Sm,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${vl}`,vl+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach(e=>{const n=this.buildItem(e);t.appendChild(n),e.selected===!0&&this.selectItem(n)}),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach(t=>{this.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const n=this.container.querySelector(".ql-selected");t!==n&&(n!=null&&n.classList.remove("ql-selected"),t!=null&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const n=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(n)}else this.selectItem(null);const e=t!=null&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class Oo extends Hs{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(n=>{n.classList.add("ql-primary")})}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";n&&(n.tagName==="line"?n.style.stroke=s:n.style.fill=s)}}class qo extends Hs{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(n=>{n.innerHTML=e[n.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(n!=null){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}}const _m=r=>{const{overflowY:t}=getComputedStyle(r,null);return t!=="visible"&&t!=="clip"};class Io{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,_m(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect();let l=0;if(i.right>s.right&&(l=s.right-i.right,this.root.style.left=`${e+l}px`),i.left<s.left&&(l=s.left-i.left,this.root.style.left=`${e+l}px`),i.bottom>s.bottom){const o=i.bottom-i.top,c=t.bottom-t.top+o;this.root.style.top=`${n-c}px`,this.root.classList.add("ql-flip")}return l}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Cm=[!1,"center","right","justify"],Lm=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Om=[!1,"serif","monospace"],qm=["1","2","3",!1],Im=["small",!1,"large","huge"];class rs extends vr{constructor(t,e){super(t,e);const n=s=>{if(!document.body.contains(t.root)){document.body.removeEventListener("click",n);return}this.tooltip!=null&&!this.tooltip.root.contains(s.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(i=>{i.container.contains(s.target)||i.close()})};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return t==="toolbar"&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach(n=>{(n.getAttribute("class")||"").split(/\s+/).forEach(i=>{if(i.startsWith("ql-")&&(i=i.slice(3),e[i]!=null))if(i==="direction")n.innerHTML=e[i][""]+e[i].rtl;else if(typeof e[i]=="string")n.innerHTML=e[i];else{const l=n.value||"";l!=null&&e[i][l]&&(n.innerHTML=e[i][l])}})})}buildPickers(t,e){this.pickers=Array.from(t).map(s=>{if(s.classList.contains("ql-align")&&(s.querySelector("option")==null&&Br(s,Cm),typeof e.align=="object"))return new qo(s,e.align);if(s.classList.contains("ql-background")||s.classList.contains("ql-color")){const i=s.classList.contains("ql-background")?"background":"color";return s.querySelector("option")==null&&Br(s,Lm,i==="background"?"#ffffff":"#000000"),new Oo(s,e[i])}return s.querySelector("option")==null&&(s.classList.contains("ql-font")?Br(s,Om):s.classList.contains("ql-header")?Br(s,qm):s.classList.contains("ql-size")&&Br(s,Im)),new Hs(s)});const n=()=>{this.pickers.forEach(s=>{s.update()})};this.quill.on($.events.EDITOR_CHANGE,n)}}rs.DEFAULTS=qn({},vr.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let r=this.container.querySelector("input.ql-image[type=file]");r==null&&(r=document.createElement("input"),r.setAttribute("type","file"),r.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),r.classList.add("ql-image"),r.addEventListener("change",()=>{const t=this.quill.getSelection(!0);this.quill.uploader.upload(t,r.files),r.value=""}),this.container.appendChild(r)),r.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class Ro extends Io{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",t=>{t.key==="Enter"?(this.save(),t.preventDefault()):t.key==="Escape"&&(this.cancel(),t.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);n!=null&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,$.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,$.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=Rm(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(e!=null){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,$.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(n+1," ",$.sources.USER),this.quill.setSelection(n+2,$.sources.USER)}break}}this.textbox.value="",this.hide()}}function Rm(r){let t=r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||r.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?`${t[1]||"https"}://www.youtube.com/embed/${t[2]}?showinfo=0`:(t=r.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${t[1]||"https"}://player.vimeo.com/video/${t[2]}/`:r}function Br(r,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;t.forEach(n=>{const s=document.createElement("option");n===e?s.setAttribute("selected","selected"):s.setAttribute("value",String(n)),r.appendChild(s)})}const km=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class ko extends Ro{constructor(t,e){super(t,e),this.quill.on($.events.EDITOR_CHANGE,(n,s,i,l)=>{if(n===$.events.SELECTION_CHANGE)if(s!=null&&s.length>0&&l===$.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const o=this.quill.getLines(s.index,s.length);if(o.length===1){const c=this.quill.getBounds(s);c!=null&&this.position(c)}else{const c=o[o.length-1],h=this.quill.getIndex(c),p=Math.min(c.length()-1,s.index+s.length-h),b=this.quill.getBounds(new Kn(h,p));b!=null&&this.position(b)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on($.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(t!=null){const e=this.quill.getBounds(t);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",e!==0&&(n.style.marginLeft=`${-1*e-n.offsetWidth/2}px`),e}}R(ko,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));class Mo extends rs{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=km),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new ko(this.quill,this.options.bounds),t.container!=null&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Jr),this.buildPickers(t.container.querySelectorAll("select"),Jr))}}Mo.DEFAULTS=qn({},rs.DEFAULTS,{modules:{toolbar:{handlers:{link(r){r?this.quill.theme.tooltip.edit():this.quill.format("link",!1,T.sources.USER)}}}}});const Mm=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Do extends Ro{constructor(){super(...arguments);R(this,"preview",this.root.querySelector("a.ql-preview"))}listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",e=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),e.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",e=>{if(this.linkRange!=null){const n=this.linkRange;this.restoreFocus(),this.quill.formatText(n,"link",!1,$.sources.USER),delete this.linkRange}e.preventDefault(),this.hide()}),this.quill.on($.events.SELECTION_CHANGE,(e,n,s)=>{if(e!=null){if(e.length===0&&s===$.sources.USER){const[i,l]=this.quill.scroll.descendant(un,e.index);if(i!=null){this.linkRange=new Kn(e.index-l,i.length());const o=un.formats(i.domNode);this.preview.textContent=o,this.preview.setAttribute("href",o),this.show();const c=this.quill.getBounds(this.linkRange);c!=null&&this.position(c);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}R(Do,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));class jo extends rs{constructor(t,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Mm),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){t.container!=null&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Jr),this.buildPickers(t.container.querySelectorAll("select"),Jr),this.tooltip=new Do(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,n)=>{t.handlers.link.call(t,!n.format.link)}))}}jo.DEFAULTS=qn({},rs.DEFAULTS,{modules:{toolbar:{handlers:{link(r){if(r){const t=this.quill.getSelection();if(t==null||t.length===0)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,T.sources.USER)}}}}});T.register({"attributors/attribute/direction":yo,"attributors/class/align":Ji,"attributors/class/background":Qp,"attributors/class/color":Jp,"attributors/class/direction":vo,"attributors/class/font":ra,"attributors/class/size":sa,"attributors/style/align":mo,"attributors/style/background":ta,"attributors/style/color":Qi,"attributors/style/direction":Eo,"attributors/style/font":xo,"attributors/style/size":Ao},!0);T.register({"formats/align":Ji,"formats/direction":vo,"formats/indent":Hg,"formats/background":ta,"formats/color":Qi,"formats/font":ra,"formats/size":sa,"formats/blockquote":Ii,"formats/code-block":Zt,"formats/header":Ri,"formats/list":ns,"formats/bold":Xr,"formats/code":ea,"formats/italic":ki,"formats/link":un,"formats/script":Mi,"formats/strike":Di,"formats/underline":ji,"formats/formula":Ss,"formats/image":Bi,"formats/video":_s,"modules/syntax":Lo,"modules/table":Vg,"modules/toolbar":oa,"themes/bubble":Mo,"themes/snow":jo,"ui/icons":Jr,"ui/picker":Hs,"ui/icon-picker":qo,"ui/color-picker":Oo,"ui/tooltip":Io},!0);class zs extends Nt.Component{constructor(t){super(t),this.editingAreaRef=B.createRef(),this.containerRef=B.createRef(),this.dirtyProps=["modules","formats","bounds","theme","children"],this.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],this.state={generation:0},this.selection=null,this.onEditorChange=(n,s,i,l)=>{var o,c;n==="text-change"?(o=this.onEditorChangeText)==null||o.call(this,this.editor.getSemanticHTML(),s,l,this.unprivilegedEditor):n==="selection-change"&&((c=this.onEditorChangeSelection)==null||c.call(this,s,l,this.unprivilegedEditor))};const e=this.isControlled()?t.value:t.defaultValue;this.value=e??""}validateProps(t){if(Nt.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Nt.Children.count(t.children)){const e=Nt.Children.only(t.children);if((e==null?void 0:e.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")}shouldComponentUpdate(t,e){if(this.validateProps(t),!this.editor||this.state.generation!==e.generation)return!0;if("value"in t){const n=this.getEditorContents(),s=t.value??"";this.isEqualValue(s,n)||this.setEditorContents(this.editor,s)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),[...this.cleanProps,...this.dirtyProps].some(n=>!Cn(t[n],this.props[n]))}shouldComponentRegenerate(t){return this.dirtyProps.some(e=>!Cn(t[e],this.props[e]))}componentDidMount(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())}componentWillUnmount(){this.destroyEditor()}componentDidUpdate(t,e){if(this.editor&&this.shouldComponentRegenerate(t)){const n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.editor&&t.placeholder!==this.props.placeholder&&(this.editor.root.dataset.placeholder=this.props.placeholder||""),this.state.generation!==e.generation){const{delta:n,selection:s}=this.regenerationSnapshot;delete this.regenerationSnapshot,this.instantiateEditor();const i=this.editor;i.setContents(n),wl(()=>this.setEditorSelection(i,s))}}instantiateEditor(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())}destroyEditor(){var n,s;if(!this.editor)return;this.unhookEditor(this.editor);const t=(n=this.props.modules)==null?void 0:n.toolbar;if(!(typeof t=="object"&&t&&"container"in t&&typeof t.container=="string"||typeof t=="string")){const i=(s=this.containerRef.current)==null?void 0:s.querySelector(".ql-toolbar");i&&i.remove()}delete this.editor}isControlled(){return"value"in this.props}getEditorConfig(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,tabIndex:this.props.tabIndex,theme:this.props.theme}}getEditor(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor}createEditor(t,e){const n=new T(t,e);return e.tabIndex!=null&&this.setEditorTabIndex(n,e.tabIndex),this.hookEditor(n),n}hookEditor(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)}unhookEditor(t){t.off("editor-change",this.onEditorChange)}getEditorContents(){return this.value}getEditorSelection(){return this.selection}isDelta(t){return t&&t.ops}isEqualValue(t,e){return this.isDelta(t)&&this.isDelta(e)?Cn(t.ops,e.ops):Cn(t,e)}setEditorContents(t,e){this.value=e;const n=this.getEditorSelection();typeof e=="string"?t.setContents(t.clipboard.convert({html:e})):t.setContents(e),wl(()=>this.setEditorSelection(t,n))}setEditorSelection(t,e){if(this.selection=e,e){const n=t.getLength();e.index=Math.max(0,Math.min(e.index,n-1)),e.length=Math.max(0,Math.min(e.length,n-1-e.index)),t.setSelection(e)}}setEditorTabIndex(t,e){var n;(n=t==null?void 0:t.scroll)!=null&&n.domNode&&(t.scroll.domNode.tabIndex=e)}setEditorReadOnly(t,e){e?t.disable():t.enable()}makeUnprivilegedEditor(t){const e=t;return{getHTML:()=>e.root.innerHTML,getSemanticHTML:e.getSemanticHTML.bind(e),getLength:e.getLength.bind(e),getText:e.getText.bind(e),getContents:e.getContents.bind(e),getSelection:e.getSelection.bind(e),getBounds:e.getBounds.bind(e)}}getEditingArea(){const t=this.editingAreaRef.current;if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t}renderEditingArea(){const{children:t,preserveWhitespace:e}=this.props,{generation:n}=this.state,s={key:n,ref:this.editingAreaRef};return Nt.Children.count(t)?Nt.cloneElement(Nt.Children.only(t),s):e?Nt.createElement("pre",{...s}):Nt.createElement("div",{...s})}render(){return Nt.createElement("div",{ref:this.containerRef,id:this.props.id,style:this.props.style,key:this.state.generation,className:`quill ${this.props.className??""}`,onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())}onEditorChangeText(t,e,n,s){var l,o;if(!this.editor)return;const i=this.isDelta(this.value)?s.getContents():s.getSemanticHTML();i!==this.getEditorContents()&&(this.lastDeltaChangeSet=e,this.value=i,(o=(l=this.props).onChange)==null||o.call(l,t,e,n,s))}onEditorChangeSelection(t,e,n){var o,c,h,p,b,d;if(!this.editor)return;const s=this.getEditorSelection(),i=!s&&t,l=s&&!t;Cn(t,s)||(this.selection=t,(c=(o=this.props).onChangeSelection)==null||c.call(o,t,e,n),i?(p=(h=this.props).onFocus)==null||p.call(h,t,e,n):l&&((d=(b=this.props).onBlur)==null||d.call(b,s,e,n)))}focus(){this.editor&&this.editor.focus()}blur(){this.editor&&(this.selection=null,this.editor.blur())}}zs.displayName="React Quill";zs.Quill=T;zs.defaultProps={theme:"snow",modules:{},readOnly:!1};function wl(r){Promise.resolve().then(r)}const Dm=()=>L.jsx("div",{style:{border:"2px dashed #007bff",padding:"10px",backgroundColor:"#f0f8ff",textAlign:"center",margin:"1em 0",userSelect:"none"},children:L.jsx("p",{style:{margin:0,fontWeight:"bold",color:"#007bff"},children:" Advertisement Placeholder"})});var jm=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function Bm(r){var t=r.defaultOptions,e=t===void 0?!1:t,n=r.cacheOptions,s=n===void 0?!1:n,i=r.loadOptions;r.options;var l=r.isLoading,o=l===void 0?!1:l,c=r.onInputChange,h=r.filterOption,p=h===void 0?null:h,b=ec(r,jm),d=b.inputValue,m=B.useRef(void 0),y=B.useRef(!1),w=B.useState(Array.isArray(e)?e:void 0),A=on(w,2),_=A[0],O=A[1],M=B.useState(typeof d<"u"?d:""),z=on(M,2),U=z[0],ot=z[1],mt=B.useState(e===!0),bt=on(mt,2),St=bt[0],Ct=bt[1],f=B.useState(void 0),C=on(f,2),v=C[0],I=C[1],N=B.useState([]),S=on(N,2),q=S[0],j=S[1],D=B.useState(!1),k=on(D,2),X=k[0],W=k[1],et=B.useState({}),nt=on(et,2),P=nt[0],ht=nt[1],pt=B.useState(void 0),Q=on(pt,2),ct=Q[0],lt=Q[1],tt=B.useState(void 0),it=on(tt,2),at=it[0],Et=it[1];s!==at&&(ht({}),Et(s)),e!==ct&&(O(Array.isArray(e)?e:void 0),lt(e)),B.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var xt=B.useCallback(function(wt,te){if(!i)return te();var Lt=i(wt,te);Lt&&typeof Lt.then=="function"&&Lt.then(te,function(){return te()})},[i]);B.useEffect(function(){e===!0&&xt(U,function(wt){y.current&&(O(wt||[]),Ct(!!m.current))})},[]);var Yt=B.useCallback(function(wt,te){var Lt=nc(wt,te,c);if(!Lt){m.current=void 0,ot(""),I(""),j([]),Ct(!1),W(!1);return}if(s&&P[Lt])ot(Lt),I(Lt),j(P[Lt]),Ct(!1),W(!1);else{var ie=m.current={};ot(Lt),Ct(!0),W(!v),xt(Lt,function(ee){y&&ie===m.current&&(m.current=void 0,Ct(!1),I(Lt),j(ee||[]),W(!1),ht(ee?us(us({},P),{},Qo({},Lt,ee)):P))})}},[s,xt,v,P,c]),Mt=X?[]:U&&v?q:_||[];return us(us({},b),{},{options:Mt,isLoading:St||o,onInputChange:Yt,filterOption:p})}var Pm=B.forwardRef(function(r,t){var e=Bm(r),n=rc(e);return B.createElement(sc,_n({ref:t},n))}),$m=Pm;const Um=({onSave:r})=>{const[t,e]=B.useState([]),n=i=>{e(i.map(l=>l.value))},s=async i=>{try{let l=[];if(i&&i.length>3){const o=await Ko({keyword:i,limit:99});o!=null&&o.articles&&(l=o.articles)}else{const o=await Go({limit:99});o!=null&&o.articles&&(l=o.articles)}return l.map(o=>({label:o.title,value:o}))}catch{return[]}};return L.jsxs("div",{className:"w-max-1/2",children:[L.jsx($m,{onChange:i=>{n(i)},cacheOptions:!0,defaultOptions:!0,isMulti:!0,loadOptions:s,placeholder:"Search article..."}),L.jsx(As,{onClick:()=>r(t),children:"Embed Article"})]})};class Cs extends kt{static create(t){const e=super.create(t);return e.classList.add("pl-8","py-2","border-l-[5px]","border-front-red","text-front-body-big"),e}}R(Cs,"blotName","highlight"),R(Cs,"tagName","div"),R(Cs,"className","quill-highlight");class Ls extends Me{static create(t){const e=super.create(t);return e.classList.add("float-left","text-5xl","font-bold","mr-2","!leading-none"),e}}R(Ls,"blotName","drop-cap"),R(Ls,"tagName","big"),R(Ls,"className","quill-drop-cap");class Os extends se{static create(t){const e=super.create(t);return e.setAttribute("data-ad-placeholder","true"),e.setAttribute("contenteditable","false"),e}static value(){return!0}}R(Os,"blotName","advertisement"),R(Os,"tagName","div"),R(Os,"className","quill-ad-embed");class Fm extends un{static create(t){const e=super.create(t);return t=this.sanitize(t),e.setAttribute("href",t),(t.startsWith("https://2poiuy.gaiada.com")||t.startsWith("http://localhost:5173")||t.startsWith("/"))&&e.removeAttribute("target"),e}}class Pi extends kt{static create(t){const e=super.create();e.setAttribute("data-custom-image","true");const n=document.createElement("img");t!=null&&t.url&&(n.src=t.url);const s=document.createElement("figcaption");return s.setAttribute("contenteditable","true"),s.innerText=(t==null?void 0:t.caption)||"caption here",e.appendChild(n),e.appendChild(s),e}static value(t){var e,n;return{url:((e=t.querySelector("img"))==null?void 0:e.getAttribute("src"))||"",caption:((n=t.querySelector("figcaption"))==null?void 0:n.innerText)||""}}}R(Pi,"blotName","custom-image"),R(Pi,"tagName","figure");class $i extends se{static create(t){const e=super.create(),n=document.createElement("img");return n.src=t.src,e.appendChild(n),e}static value(t){var e;return{src:(e=t.querySelector("img"))==null?void 0:e.src}}}R($i,"blotName","figure"),R($i,"tagName","figure");const Hm=r=>{r.register($i),!r.imports["blots/highlight"]&&(r.register(Pi),r.register(Cs),r.register(Ls),r.register(Os),r.register(Fm),r.register(sa,!0),r.register(ra,!0),r.register(Ji,!0))},xl="http://34.124.244.233/essentialbali";Hm(T);let Al=null,Qt=null;const zm=()=>{const{closeModal:r,isOpen:t,openModal:e}=Il(),[n,s]=B.useState(!1),i=o=>{if(Al=o,r(),Qt){const c=Qt.getSelection(!0);Qt.insertEmbed(c.index,"image",`${xl}/${Al.path}`),Qt.setSelection(c.index+1,0)}},l=o=>{if(s(!1),Qt){let h=Qt.getSelection(!0).index;o.forEach(p=>{const b=`${p.title}
`,d=`${xl}/${p.featured_image_url}`;Qt.insertText(h,b,"bold",!0),h+=b.length,Qt.insertEmbed(h,"image",d),h+=1;const m=Qt.getLength();Qt.clipboard.dangerouslyPasteHTML(h,p.article_post);const w=Qt.getLength()-m;h+=w,Qt.insertText(h,`

`),h+=2}),Qt.setSelection(h,0,"user")}};return L.jsxs(L.Fragment,{children:[L.jsx(ha,{isOpen:t,onClose:r,children:L.jsx(Jo,{onSave:o=>{i(o)}})}),L.jsx(ha,{isOpen:n,isFullscreen:!1,onClose:()=>{s(!1)},children:L.jsx(Um,{onSave:l})}),L.jsx("button",{className:"hidden",onClick:e,id:"editor-image-modal",children:"Add Image"}),L.jsx("button",{className:"hidden",onClick:()=>{s(!0)},id:"editor-article-modal",children:"Article Embed"})]})};function Vm(){const r=this.quill;if(!r)return;const t=r.getSelection(!0);if(!t)return;const[e,n]=r.getLine(t.index),s=t.index-n,l=!!r.getFormat(s,1)["drop-cap"];e&&(r.formatText(s,e.length(),"drop-cap",!1),!l&&e.domNode.innerText.trim().length>0&&r.formatText(s,1,"drop-cap",!0))}function Km(){const r=this.quill;if(!r)return;const t=r.getSelection();if(!t)return;const e=r.getFormat(t.index,t.length);r.formatLine(t.index,t.length,"highlight",!e.highlight)}function Gm(){var r;Qt=this.quill,(r=document.querySelector("#editor-image-modal"))==null||r.click()}function Wm(){var r;Qt=this.quill,(r=document.querySelector("#editor-article-modal"))==null||r.click()}const Zm=["header","bold","italic","underline","strike","list","link","image","font","size","highlight","drop-cap","advertisement","align","embed-article","custom-image","figure"],Ym=[["bold","italic","underline","strike","link"],["blockquote","code-block","dropcap","highlight","custom-image","embed-article"],[{align:[]}],[{size:["small",!1,"large","larger","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:["sans","serif"]}]],Xm={toolbar:{container:Ym,handlers:{dropcap:Vm,highlight:Km,"custom-image":Gm,"embed-article":Wm}}},Tl=new Map,Jm=r=>{r.container.querySelectorAll(".quill-ad-embed").forEach(e=>{const n=e.getAttribute("data-key")||Math.random().toString(36).substring(2);if(e.setAttribute("data-key",n),Tl.has(n))return;const s=Uo.createRoot(e);s.render(L.jsx(Dm,{})),Tl.set(n,s)})},Qm=({value:r,onChange:t})=>{const e=B.useRef(null),n=B.useRef(null),{setNotification:s}=ql();B.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getEditor();if(!l)return;const o=(h,p,b)=>{if(b!=="user")return;const d=l.getText(),m="[ads]",y=d.indexOf(m);y!==-1&&(l.deleteText(y,m.length,"silent"),l.insertEmbed(y,"advertisement",!0,"silent"),l.insertText(y+1," ","silent"),setTimeout(()=>Jm(l),0))};return l.on("text-change",o),()=>{l.off("text-change",o)}},[]),B.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getEditor();if(!l)return;const o=(h,p,b)=>{var d;(d=h.ops)==null||d.forEach(m=>{if(m.insert&&m.insert.image&&b=="api"){const y=m.insert.image,w=l.getSelection(!0);l.deleteText(w.index,1),l.insertEmbed(w.index,"figure",{src:y},"user")}})};return l.on("text-change",o),()=>{l.off("text-change",o)}},[]),B.useEffect(()=>{var c;const l=(c=e.current)==null?void 0:c.getEditor();if(!l)return;l.clipboard.addMatcher("IMG",()=>new H);const o=h=>{var d;const p=h.clipboardData??h.dataTransfer;if(!((d=p==null?void 0:p.files)!=null&&d.length))return;Array.from(p.files).some(m=>m.type.startsWith("image/"))&&(s({message:"Please upload image to media library to put into article",type:"fail"}),h.preventDefault(),h.stopPropagation())};return l.root.addEventListener("paste",o,{capture:!0}),l.root.addEventListener("drop",o,{capture:!0}),()=>{l.root.removeEventListener("paste",o,{capture:!0}),l.root.removeEventListener("drop",o,{capture:!0})}},[]),B.useEffect(()=>{var h;const l=(h=e.current)==null?void 0:h.getEditor(),o=n.current;if(!l||!o)return;const c=p=>{const b=p.target.closest('div[data-custom-image="true"]');if(l.root.querySelectorAll('div[data-custom-image="true"]').forEach(m=>{m.removeAttribute("data-active"),m.style.outline=""}),!b){o.style.display="none";return}b.setAttribute("data-active","true"),b.style.outline="2px solid #4a90e2";const d=b.getBoundingClientRect();o.style.left=`${d.left+window.scrollX}px`,o.style.top=`${d.top+window.scrollY-40}px`,o.style.display="block"};return l==null||l.root.addEventListener("click",c),()=>{l.root.removeEventListener("click",c)}},[]);const i=(l,o,c)=>{var p;(p=e.current)!=null&&p.getEditor()&&t(l,o,c)};return L.jsxs(L.Fragment,{children:[L.jsx(zm,{}),L.jsx(zs,{id:"react-quill",ref:l=>{e.current=l},theme:"snow",defaultValue:r,onChange:i,modules:Xm,formats:Zm,style:{height:"800px",overflowY:"scroll"}}),L.jsx("div",{ref:n,id:"image-tooltip",style:{position:"absolute",display:"none",padding:"6px 12px",background:"#000",color:"#fff",borderRadius:"4px",zIndex:"99999",fontSize:"12px"},children:L.jsx("button",{onClick:()=>{},children:"+Add Caption"})})]})},ut={STRING:"String",DATE:"Date",IMAGE:"Image",NUMBER:"Number",ENUM:"Enum",MULTISELECT:"Multiselect",TRUE_FALSE:"TrueFalse",TIME:"Time"},di={events:{start_date:{type:ut.DATE},end_date:{type:ut.DATE},multi_day:{type:ut.MULTISELECT,options:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},start_time:{type:ut.TIME},end_time:{type:ut.TIME},whole_day:{type:ut.TRUE_FALSE},price:{type:ut.NUMBER,tooltip:"put 0 for free"},external_url:{type:ut.STRING}},housing:{Location:{type:ut.STRING},company_logo:{type:ut.IMAGE},company_name:{type:ut.STRING},price:{type:ut.NUMBER},currency:{type:ut.ENUM,options:["USD","SGD","IDR"]},property_type:{type:ut.STRING},status:{type:ut.ENUM,options:["For Sale","For Rent","Sold Out"]},rentaltype:{type:ut.ENUM,options:["daily","monthly","yearly"]}},"job-listing":{company_name:{type:ut.STRING},company_logo:{type:ut.IMAGE},company_location:{type:ut.STRING},company_email:{type:ut.STRING,tooltip:"This will use for automatic email if user send their cv and email ... if no email provided input field for user will disable"},job_type:{type:ut.ENUM,options:["Fulltime","Part-Time","Internship","Freelance"]},salary_range:{type:ut.NUMBER,tooltip:"input only the amount, use field below for currency and whether salary per hour, month or year"},salary_time:{type:ut.ENUM,options:["hour","month","year"]},salary_currency:{type:ut.STRING,tooltip:"use 3 digit letter example = USD IDR SGD"},experience:{type:ut.NUMBER}},deals:{multi_day:{type:ut.MULTISELECT,options:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]},start_date:{type:ut.DATE},end_date:{type:ut.DATE}}};var fi,Nl;function t1(){if(Nl)return fi;Nl=1;var r=lc(),t=oc(),e=cc();function n(s,i){var l={};return i=e(i,3),t(s,function(o,c,h){r(l,c,i(o,c,h))}),l}return fi=n,fi}var e1=t1();const n1=Ms(e1);function r1(r,t,e){return t in r?Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):r[t]=e,r}function s1(r){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{},n=Object.keys(e);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(e).filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable}))),n.forEach(function(s){r1(r,s,e[s])})}return r}var i1=function(r,t){return B.createElement("svg",s1({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 16 16",fill:"currentColor",ref:t},r),B.createElement("path",{d:"M4.5 0a.5.5 0 0 1 .5.5V2h6V.5a.5.5 0 0 1 1 0V2h1.5A1.5 1.5 0 0 1 15 3.5V6H2v7.5a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 1 0v3a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 13.5v-10A1.5 1.5 0 0 1 2.5 2H4V.5a.5.5 0 0 1 .5-.5M14 5V3.5a.5.5 0 0 0-.5-.5H12v2zm-3 0V3H5v2zM4 5V3H2.5a.5.5 0 0 0-.5.5V5z"}),B.createElement("path",{d:"M5 8v1H4V8zM8 8H7v1h1zM10 8h1v1h-1zM5 12v-1H4v1zM7 11h1v1H7zM11 11h-1v1h1z"}))},a1=B.forwardRef(i1),l1=uc({as:a1,ariaLabel:"calender simple",category:"time",displayName:"CalenderSimple"}),o1=function(t,e){var n,s=B.useRef(t),i=B.useState((n=t??e)!==null&&n!==void 0?n:Ts()),l=i[0],o=i[1],c=B.useCallback(function(p){p&&(p==null?void 0:p.valueOf())!==(l==null?void 0:l.valueOf())&&o(p)},[l]),h=B.useCallback(function(p){var b,d;p===void 0&&(p=t),o((b=(d=p)!==null&&d!==void 0?d:e)!==null&&b!==void 0?b:Ts())},[e,t]);return hc(function(){var p;if((t==null?void 0:t.valueOf())!==((p=s.current)===null||p===void 0?void 0:p.valueOf())){var b;c((b=t??e)!==null&&b!==void 0?b:Ts()),s.current=t}},[t,e]),{calendarDate:l,setCalendarDate:c,resetCalendarDate:h}};function c1(r){var t=r.onToggleMonthDropdown,e=B.useState(!1),n=e[0],s=e[1],i=Dt(function(l){t==null||t(l),s(l)});return{monthView:n,setMonthView:s,toggleMonthView:i}}var pi,Sl;function u1(){if(Sl)return pi;Sl=1;var r="Expected a function";function t(e,n,s){if(typeof e!="function")throw new TypeError(r);return setTimeout(function(){e.apply(void 0,s)},n)}return pi=t,pi}var gi,_l;function h1(){if(_l)return gi;_l=1;var r=u1(),t=dc(),e=fc(),n=t(function(s,i,l){return r(s,e(i)||0,l)});return gi=n,gi}var d1=h1();const Cl=Ms(d1);function f1(r){var t=r.target,e=r.showMonth,n=r.id,s=r.locale,i=Ui(),l=i.getLocale,o=i.formatDate,c=l("DateTimeFormats",s),h=c.formattedMonthPattern,p=c.formattedDayPattern,b=function(){return e?document.getElementById(n+"-calendar-month-dropdown"):document.getElementById(n+"-calendar-table")},d=function(_){var O=e?h:p,M=mc(_,O,o),z=b(),U=z==null?void 0:z.querySelector('[aria-label="'+M+'"]');return(U==null?void 0:U.getAttribute("aria-disabled"))!=="true"},m=function(){Cl(function(){var _=b(),O=_==null?void 0:_.querySelector('[aria-selected="true"]');O==null||O.focus()},1)},y=Dt(function(){Cl(function(){var A;return(A=t.current)===null||A===void 0?void 0:A.focus()},1)}),w=Dt(function(A,_){var O=_.date,M=_.callback,z=0,U=e?6:7,ot=e?pc:gc;Rl(A,{down:function(){z=U},up:function(){z=-U},right:function(){z=1},left:function(){z=-1}});var mt=ot(O,z);d(mt)&&(M(mt),m())});return{focusInput:y,focusSelectedDate:m,onKeyFocusEvent:w}}var Ll,Ol,p1=["as","className","classPrefix","calendarDefaultDate","cleanable","caretAs","editable","defaultValue","disabled","readOnly","plaintext","format","id","isoWeek","weekStart","limitEndYear","limitStartYear","locale","loading","label","menuClassName","menuStyle","appearance","placement","oneTap","placeholder","ranges","value","showMeridian","showMeridiem","showWeekNumbers","style","size","monthDropdownProps","shouldDisableDate","shouldDisableHour","shouldDisableMinute","shouldDisableSecond","onChange","onChangeCalendarDate","onClean","onEnter","onExit","onNextMonth","onOk","onPrevMonth","onSelect","onToggleMonthDropdown","onToggleTimeDropdown","onShortcutClick","renderCell","renderValue","disabledDate","disabledHours","disabledMinutes","disabledSeconds"],Vs=Nt.forwardRef(function(r,t){var e,n=Ui("DatePicker",r),s=n.propsWithDefaults,i=s.as,l=i===void 0?"div":i,o=s.className,c=s.classPrefix,h=c===void 0?"picker":c,p=s.calendarDefaultDate,b=s.cleanable,d=b===void 0?!0:b,m=s.caretAs,y=s.editable,w=y===void 0?!0:y,A=s.defaultValue,_=s.disabled,O=s.readOnly,M=s.plaintext,z=s.format,U=s.id,ot=s.isoWeek,mt=s.weekStart,bt=s.limitEndYear,St=bt===void 0?1e3:bt,Ct=s.limitStartYear,f=s.locale,C=s.loading,v=s.label,I=s.menuClassName,N=s.menuStyle,S=s.appearance,q=S===void 0?"default":S,j=s.placement,D=j===void 0?"bottomStart":j,k=s.oneTap,X=s.placeholder,W=X===void 0?"":X,et=s.ranges,nt=s.value,P=s.showMeridian,ht=s.showMeridiem,pt=ht===void 0?P:ht,Q=s.showWeekNumbers,ct=s.style,lt=s.size,tt=s.monthDropdownProps,it=s.shouldDisableDate,at=s.shouldDisableHour,Et=s.shouldDisableMinute,xt=s.shouldDisableSecond,Yt=s.onChange,Mt=s.onChangeCalendarDate,wt=s.onClean,te=s.onEnter,Lt=s.onExit,ie=s.onNextMonth,ee=s.onOk,Pe=s.onPrevMonth,Ft=s.onSelect,$e=s.onToggleMonthDropdown,Mn=s.onToggleTimeDropdown,ae=s.onShortcutClick,Ue=s.renderCell,Je=s.renderValue,jt=s.disabledDate,mn=s.disabledHours,bn=s.disabledMinutes,Dn=s.disabledSeconds,Qe=tc(s,p1),Xt=bc("rs-",U),fe=yc(t),ne=fe.trigger,Ae=fe.root,Bt=fe.target,Te=fe.overlay,Jt=z||(f==null?void 0:f.shortDateFormat)||"yyyy-MM-dd",le=vc(h),Ne=le.merge,Ht=le.prefix,Se=Ec(nt,A),Pt=Se[0],Fe=Se[1],E=o1(Pt,p),K=E.calendarDate,yt=E.setCalendarDate,Z=E.resetCalendarDate,rt=c1({onToggleMonthDropdown:$e}),oe=rt.setMonthView,ce=rt.monthView,He=rt.toggleMonthView,qt=wc(Jt),pe=qt.mode,yn=pe===hs.Month||ce,ze=f1({target:Bt,showMonth:yn,id:Xt,locale:f}),Ve=ze.focusInput,vn=ze.focusSelectedDate,Y=ze.onKeyFocusEvent,$t=function(J){return typeof it=="function"?it(J):typeof jt=="function"?jt(J):!1},tn=function(J){return($t==null?void 0:$t(J))||Uc(r,J)},en=function(J){return Hc(J.getFullYear(),J.getMonth(),$t)},jn=function(J){return pe===hs.Month?en(J):tn(J)},Qn=function(J){if(Xs(J)){if(J&&$t(J))return!0}else return!0;return!1},zt=Dt(function(F){yt(F),ie==null||ie(F),Mt==null||Mt(F)}),xr=Dt(function(F){yt(F),Pe==null||Pe(F),Mt==null||Mt(F)}),En=Dt(function(F,J){Ft==null||Ft(F,J),Mt==null||Mt(F,J)}),Ar=Dt(function(F){yt(F),En(F)}),tr=Dt(function(){var F,J;(F=ne.current)===null||F===void 0||(J=F.close)===null||J===void 0||J.call(F)}),_e=function(J,dt,Ot){Ot===void 0&&(Ot=!0);var he=typeof dt<"u"?dt:K;yt(he||Ts()),Fe(he),he!==Pt&&(Yt==null||Yt(he,J)),Ot!==!1&&tr()},nn=Dt(function(F,J,dt){var Ot=F.value;_e(dt,Ot,J),En(Ot,dt),ae==null||ae(F,dt)}),Bn=Dt(function(F){_e(F),ee==null||ee(K,F),Ve()}),wn=Dt(function(F){F==null||F.stopPropagation(),_e(F,null),Z(null),wt==null||wt(F)}),ge=Dt(function(F){Y(F,{date:K,callback:yt}),F.key==="Enter"&&Bn(F)}),Pn=Dt(function(){w||vn()}),er=Dt(function(F,J,dt){dt===void 0&&(dt=!0);var Ot=Fc({from:K,to:F});yt(Ot),En(Ot),k&&dt&&(_e(J,Ot),Ve())}),Tr=Dt(function(F,J){yt(F),En(F),vn(),k&&pe===hs.Month&&(_e(J,F),Ve())}),Nr=Dt(function(F,J){Qn(F)||er(F,J),_e(J,F,!1)}),Sr=Dt(function(F){Rl(F,{esc:tr,enter:function(){var dt,Ot=((dt=ne.current)===null||dt===void 0?void 0:dt.getState())||{},he=Ot.open;if(he)Xs(K)&&!$t(K)&&(_e(F),Ve());else{var ye;(ye=ne.current)===null||ye===void 0||ye.open()}}})}),_r=n1(pa(r,xc),function(F){return function(J,dt){var Ot;return(Ot=F==null?void 0:F(J,dt))!==null&&Ot!==void 0?Ot:!1}}),rn=Ac(et),xn=rn.sideRanges,sn=rn.bottomRanges,nr=function(J,dt){var Ot=J.left,he=J.top,ye=J.className,Fn=Ne(I,ye,Ht("popup-date")),Tn=_n({},N,{left:Ot,top:he});return Nt.createElement(Mc,{role:"dialog","aria-labelledby":v?Xt+"-label":void 0,tabIndex:-1,className:Fn,ref:Dc(Te,dt),style:Tn,target:ne,onKeyDown:ge},Nt.createElement(ba,{alignItems:"flex-start"},xn.length>0&&Nt.createElement(jc,{direction:"column",spacing:0,className:Ht("date-predefined"),ranges:xn,calendarDate:K,locale:f,disableShortcut:tn,onShortcutClick:nn}),Nt.createElement(ba.Item,null,Nt.createElement(Bc,_n({},_r,{targetId:Xt,locale:f,showWeekNumbers:Q,showMeridiem:pt,disabledDate:$t,disabledHours:at??mn,disabledMinutes:Et??bn,disabledSeconds:xt??Dn,limitEndYear:St,limitStartYear:Ct,format:Jt,isoWeek:ot,weekStart:mt,calendarDate:K,monthDropdownProps:tt,renderCellOnPicker:Ue,onMoveForward:zt,onMoveBackward:xr,onSelect:er,onToggleMonthDropdown:He,onToggleTimeDropdown:Mn,onChangeMonth:Tr,onChangeTime:Ar})),Nt.createElement(Pc,{locale:f,ranges:sn,calendarDate:K,disableOkBtn:jn,disableShortcut:tn,onShortcutClick:nn,onOk:Bn,hideOkBtn:k}))))},$n=Xs(Pt),rr=Tc(_n({},r,{className:o,classPrefix:h,name:"date",appearance:q,hasValue:$n,cleanable:d})),Cr=rr[0],Lr=rr[1],Or=B.useMemo(function(){return m===null?null:m||(pe===hs.Time?Nc:l1)},[m,pe]),Un=Dt(function(F){var J;F!==$c.ImperativeHandle&&Z(),oe(!1),(J=r.onClose)===null||J===void 0||J.call(r)}),qr=d&&$n&&!O,sr=Sc(Qe,{htmlProps:[],includeAria:!0}),an=sr[0],ue=sr[1],me=Pt&&Qn(Pt),Ce={value:Pt,formatStr:Jt,renderValue:Je,readOnly:O,editable:w,loading:C},An=_c(Ce),be=An.customValue,Ir=An.inputReadOnly,Rr=An.Input,ir=An.events;return Nt.createElement(Cc,{trigger:"active",pickerProps:pa(r,Lc),ref:ne,placement:D,onClose:Un,onEnter:ga(ir.onActive,te),onExit:ga(ir.onInactive,Lt),speaker:nr},Nt.createElement(l,{className:Ne(Cr,(e={},e[Ht("error")]=me,e)),style:ct,ref:Ae},M?Nt.createElement(Oc,{value:Pt,format:Jt,plaintext:M}):Nt.createElement(qc,_n({},Ic(ue,Lr),{inside:!0,size:lt,disabled:_,className:Ht(Ll||(Ll=ma(["input-group"]))),onClick:Pn}),Nt.createElement(Rc,{className:Ht(Ol||(Ol=ma(["label"]))),id:Xt+"-label"},v),Nt.createElement(Rr,_n({"aria-haspopup":"dialog","aria-invalid":me,"aria-labelledby":v?Xt+"-label":void 0},an,{ref:Bt,id:Xt,value:be||Pt,format:Jt,placeholder:W||Jt,disabled:_,readOnly:Ir,onChange:Nr,onKeyDown:Sr})),Nt.createElement(kc,{loading:C,caretAs:Or,onClose:wn,showCleanButton:qr}))))});Vs.displayName="DatePicker";Vs.propTypes=_n({},zc,Vc,{calendarDefaultDate:At.instanceOf(Date),defaultValue:At.instanceOf(Date),shouldDisableDate:At.func,shouldDisableHour:At.func,shouldDisableMinute:At.func,shouldDisableSecond:At.func,format:At.string,hideHours:At.func,hideMinutes:At.func,hideSeconds:At.func,isoWeek:At.bool,weekStart:At.oneOf([0,1,2,3,4,5,6]),limitEndYear:At.number,limitStartYear:At.number,onChange:At.func,onChangeCalendarDate:At.func,onNextMonth:At.func,onOk:At.func,onPrevMonth:At.func,onSelect:At.func,onToggleMonthDropdown:At.func,onToggleTimeDropdown:At.func,oneTap:At.bool,ranges:At.array,showMeridiem:At.bool,showWeekNumbers:At.bool,value:At.instanceOf(Date)});var Bo=Nt.forwardRef(function(r,t){var e=Ui("TimePicker",r),n=e.propsWithDefaults,s=e.getLocale,i=s("DateTimeFormats"),l=B.useMemo(function(){return[{label:i==null?void 0:i.now,value:function(){return new Date}}]},[i]);return Nt.createElement(Vs,_n({ref:t,format:i==null?void 0:i.shortTimeFormat,ranges:l},n))});Bo.displayName="TimePicker";const xs="http://34.124.244.233/essentialbali",Gt=({label:r,children:t,tooltip:e})=>L.jsxs("div",{className:"input-wrapper",children:[L.jsxs("div",{className:"label-wrapper mb-4 flex gap-x-2 items-center",children:[L.jsx("p",{className:"text-xl",children:r}),e&&L.jsx(g1,{message:e})]}),t]}),g1=({message:r})=>L.jsxs("div",{className:"relative inline-block group",children:[L.jsx(Kc,{}),L.jsx("div",{className:"invisible absolute w-48 text-wrap z-50 bottom-full left-1/2 mb-2.5 border border-black -translate-x-1/2 opacity-0 transition-opacity duration-300 group-hover:visible group-hover:opacity-100",children:L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"drop-shadow-4xl whitespace-nowrap rounded-lg bg-white px-3 py-2 text-md font-medium text-gray-700 dark:bg-[#1E2634] dark:text-white",children:r}),L.jsx("div",{className:"absolute -bottom-1 left-1/2 h-3 w-4 -translate-x-1/2 rotate-45 bg-white dark:bg-[#1E2634]"})]})})]}),m1=r=>{if(!r)return;const t=new Map,e=[];for(const n of r)t.set(n.id,{label:n.title,value:n.id,children:[]});for(const n of r){const s=t.get(n.id);if(n.id_parent===0||n.id_parent===null)e.push(s);else{const i=t.get(n.id_parent);i&&i.children.push(s)}}return e.map(n=>n.children.length>0?{label:n.label,options:[{label:n.label,value:n.value,level:0},...n.children.map(s=>({label:s.label,value:s.value,level:1}))]}:{label:n.label,value:n.value,level:0})},X1=({action:r})=>{var Bt,Te,Jt,le,Ne,Ht,Se,Pt,Fe;const[t,e]=B.useState(0),[n,s]=B.useState(void 0),[i,l]=B.useState(),[o,c]=B.useState(),[h,p]=B.useState(),[b,d]=B.useState(""),[m,y]=B.useState(""),[w,A]=B.useState(0),[_,O]=B.useState([]),[M,z]=B.useState("draft"),[U,ot]=B.useState(""),[mt,bt]=B.useState(!1),[St,Ct]=B.useState(0),[f,C]=B.useState(0),[v,I]=B.useState(0),[N,S]=B.useState(),[q,j]=B.useState(0),[D,k]=B.useState(),[X,W]=B.useState([]),[et,nt]=B.useState([]),[P,ht]=B.useState([]),[pt,Q]=B.useState([]),{setPageAdminButtonText:ct}=Fo(),{setNotification:lt}=ql(),{taxonomies:tt,adminTaxonomies:it}=Ho(),{id:at}=ua(),Et=ua(),{closeModal:xt,openModal:Yt}=Il(!1),Mt=zo(),{setBlock:wt}=Xo();console.log(Et),B.useEffect(()=>{try{if(at){if(!at)throw new Error("Article Id is not provided for edit");e(parseInt(at))}else ct("");(async()=>{try{const E=await ic();E.data&&E.status_code==200&&Q(E.data)}catch(E){console.log(E)}})();return}catch(E){console.log(E)}},[Et]),B.useEffect(()=>{var E;if(it)try{W(((E=it.countries)==null?void 0:E.map(K=>({value:K.id,label:K.name})))??[])}catch(K){console.log(K)}},[it]),B.useEffect(()=>{if(!at){s("");return}(async()=>{const E=await Wo(parseInt(at));E&&(s(E.article_post??""),l({id:E==null?void 0:E.featured_image_id,url:E==null?void 0:E.featured_image_url}),p({id:E==null?void 0:E.featured_image_4_3_id,url:E==null?void 0:E.featured_image_4_3_url}),c({id:E==null?void 0:E.featured_image_16_9_id,url:E==null?void 0:E.featured_image_16_9_url}),d(E.title),y(E.sub_title),z(E.status),A(E.category_id),typeof E.tags=="string"?O(JSON.parse(E.tags)):O(E.tags??[]),ot(E.slug),bt(!0),Ct(E.id_country),C(E.id_city??0),I(E.id_region??0),j(E.pinned??0),typeof(E==null?void 0:E.meta_data)=="string"?S(JSON.parse(E.meta_data)):S((E==null?void 0:E.meta_data)??void 0))})()},[t]),B.useEffect(()=>{(async()=>{var E,K,yt;if(St&&!et.length)try{nt(((K=(E=it.cities)==null?void 0:E.filter(Z=>Z.id_parent==St))==null?void 0:K.map(Z=>({value:Z.id,label:Z.name})))??[])}catch(Z){console.log(Z)}if(f&&!P.length)try{ht(((yt=it.regions)==null?void 0:yt.filter(Z=>Z.id_parent==f).map(Z=>({value:Z.id,label:Z.name})))??[])}catch(Z){console.log(Z)}})()},[St,f]),B.useEffect(()=>{if(tt.categories&&w){const E=[],K=tt.categories.find(Z=>Z.id==w);let yt=null;if(!K)return;if(K!=null&&K.id_parent){const Z=tt.categories.find(rt=>rt.id==K.id_parent);Z&&(yt=di[Z==null?void 0:Z.slug_title])}else E.push(K),E.push(...tt.categories.filter(Z=>Z.id_parent==K.id)),console.log(E),E.forEach(Z=>{Z.slug_title in di&&(yt=di[Z.slug_title])});k(yt||void 0)}},[w]);const te=()=>{if(!D)return;const E=(Z,rt)=>{rt=="whole_day"&&Z&&(console.log(rt,Z),S(ce=>({...ce,start_time:"00:00",end_time:"23:59"})));const oe=typeof Z=="boolean"?Number(Z):Z;S(ce=>({...ce,[rt]:oe}))},K=()=>!!(N&&N.whole_day),yt=(Z,rt)=>{var oe,ce,He,qt,pe,yn;switch(console.log(N),Z){case ut.STRING:return L.jsx(ar,{onChange:Y=>E(Y.target.value,rt),value:N?N[rt]??"":""});case ut.DATE:const ze=N&&N[rt]?`${N[rt]}`:null;return L.jsx(Vs,{onChange:Y=>{E(Y==null?void 0:Y.toISOString().split("T")[0],rt)},value:ze?new Date(ze):null});case ut.NUMBER:return L.jsx(ar,{type:"number",onChange:Y=>E(Number(Y.target.value),rt),value:N?N[rt]??void 0:void 0});case ut.MULTISELECT:return L.jsx(Zs,{isMulti:!0,placeholder:rt,onChange:Y=>E(Y.map($t=>$t.value),rt),options:(oe=D[rt])!=null&&oe.options?(ce=D[rt])==null?void 0:ce.options.map(Y=>({value:Y,label:Y})):[],value:N?(He=N[rt])==null?void 0:He.map(Y=>({value:Y,label:Y})):void 0});case ut.ENUM:return(qt=D[rt].options)!=null&&qt.length?L.jsx(Dr,{options:(yn=(pe=D[rt])==null?void 0:pe.options)==null?void 0:yn.map(Y=>({value:Y,label:Y})),onChange:Y=>E(Y,rt),value:N?N[rt]??"":""}):L.jsx(L.Fragment,{children:"Something wrong with the select"});case ut.IMAGE:const Ve=N&&N[rt]?`${N[rt]}`:"";return L.jsx(cs,{url:Ve,onSave:Y=>E(`${xs}/${Y.path}`,rt),ratio:"100%",width:"250px"});case ut.TRUE_FALSE:return L.jsx(da,{label:rt,defaultChecked:N?!!N[rt]:!1,onChange:Y=>{E(Y,rt)}});case ut.TIME:const vn=N?new Date(new Date().setHours(Number(`${N[rt]}`.split(":")[0]),Number(`${N[rt]}`.split(":")[1]))):null;return L.jsx(Bo,{label:rt,className:`time-input ${rt}`,onChange:Y=>{const $t=Y==null?void 0:Y.getHours(),tn=`${$t}`.length==1?`0${$t}`:$t,en=Y==null?void 0:Y.getMinutes(),jn=`${en}`.length==1?`0${en}`:en;E(`${tn}:${jn}`,rt)},value:vn,disabled:K()});default:return L.jsx(L.Fragment,{})}};return D?Object.keys(D).map(Z=>{var rt,oe;return L.jsx(L.Fragment,{children:L.jsx(Gt,{label:`Metadata ${Z}`,tooltip:(rt=D[Z])==null?void 0:rt.tooltip,children:L.jsx(L.Fragment,{children:yt((oe=D[Z])==null?void 0:oe.type,Z)})},`metadata-${Z}`)})}):L.jsx(L.Fragment,{})},Lt=()=>{if(et.length&&St)return L.jsx(Gt,{label:"City",children:L.jsx(Dr,{options:et,defaultValue:f?`${f}`:void 0,placeholder:"Select City",onChange:Ue})})},ie=()=>{if(P.length&&f)return L.jsx(Gt,{label:"Region",children:L.jsx(Dr,{options:P,defaultValue:v?`${v}`:void 0,placeholder:"Select Region",onChange:Je})})},ee=(E,K,yt)=>{s(E),yt=="user"&&wt(!0)},Pe=E=>{if(d(E.target.value),!mt){const K=fa(E.target.value);ot(K)}wt(!0)},Ft=E=>{new RegExp(/[*+~.,()'"!:@]/g).test(E.target.value)&&mt&&lt({message:`slug cannot contains these characters * + ~ . , ( ) ' " ! : @`,type:"fail"});const K=fa(E.target.value);ot(K),bt(!0),wt(!0)},$e=E=>{z(E),wt(!0)},Mn=E=>{E.value&&(A(typeof E.value=="string"?parseInt(E.value):E.value),wt(!0))},ae=E=>{E!=St&&(Ct(typeof E=="string"?parseInt(E):E),C(0),I(0),nt([]),ht([]),wt(!0))},Ue=E=>{E!==f&&(C(typeof E=="string"?parseInt(E):E),I(0),ht([]),wt(!0))},Je=E=>{E!==v&&(I(typeof E=="string"?parseInt(E):E),wt(!0))},jt=E=>{l({url:`${xs}/${E.path}`,id:E.id}),xt(),wt(!0)},mn=E=>{p({url:`${xs}/${E.path}`,id:E.id}),xt(),wt(!0)},bn=E=>{c({url:`${xs}/${E.path}`,id:E.id}),xt(),wt(!0)},Dn=E=>{y(E.target.value),wt(!0)},Qe=E=>{S(K=>({...K,meta_title:E.target.value})),wt(!0)},Xt=E=>{S(K=>({...K,meta_description:E})),wt(!0)},fe=async(E=!1)=>{E&&z("published");const K={article_post:n,featured_image:i==null?void 0:i.id,featured_image_id:i==null?void 0:i.id,featured_image_url:i==null?void 0:i.url,featured_image_4_3:h==null?void 0:h.id,featured_image_4_3_id:h==null?void 0:h.id,featured_image_4_3_url:h==null?void 0:h.url,featured_image_16_9:o==null?void 0:o.id,featured_image_16_9_id:o==null?void 0:o.id,featured_image_16_9_url:o==null?void 0:o.url,title:b,sub_title:m,category_id:w,tags:_,status:E?"published":M,slug:U,id_country:St,meta_data:N,pinned:q};f?K.id_city=f:K.id_city=null,v?K.id_region=v:K.id_region=null,(D?!!D.whole_day:!1)&&(K.meta_data||(K.meta_data={}),K.meta_data.whole_day=K.meta_data.whole_day?+!!K.meta_data.whole_day:0);try{if(r=="edit")if(await Zo(t,{...K,id:t}))lt({message:"Success Edit Article",type:"neutral"});else throw Error();if(r=="add"){const Z=await Yo(K);if(Z)lt({message:"Success Edit Article",type:"neutral"}),ct("Add Article"),setTimeout(()=>{Mt(`/admin/mst_article/edit/${Z.id}`)},2e3);else throw Error()}wt(!1);return}catch(Z){lt({message:`Failed to ${r} article`,type:"fail"}),console.log(Z)}},ne=E=>{O(E.map(K=>K.value))},Ae=()=>{if(pt.length)return L.jsx(Gt,{label:"Tags",children:L.jsx(Zs,{options:pt.map(E=>({label:E.name,value:E.id})),isMulti:!0,onChange:ne,value:pt.filter(E=>_.includes(E.id)).map(E=>({value:E.id,label:E.name}))})})};return L.jsx(L.Fragment,{children:L.jsxs("div",{className:"grid grid-cols-12 gap-x-12",children:[L.jsxs("div",{className:"col-span-8",children:[L.jsxs(Ys,{children:[L.jsx(Gt,{label:"Title *",children:L.jsx(ar,{required:!0,placeholder:"Title",value:b,onChange:Pe})}),L.jsx(Gt,{label:"Slug *",children:L.jsx(ar,{required:!0,placeholder:"Slug",value:U,onChange:Ft})}),L.jsx(Gt,{label:"Subtitle",children:L.jsx(ar,{placeholder:"Subtitle",value:m,onChange:Dn})}),L.jsx(Gt,{label:"Content *",children:L.jsx(L.Fragment,{children:n!==void 0&&L.jsx(L.Fragment,{children:L.jsx(Qm,{onChange:ee,value:n})})})}),L.jsx("div",{className:"spacer py-6"}),te()]}),L.jsx("br",{}),L.jsxs(Ys,{children:[L.jsx(Gt,{label:"Meta Title",children:L.jsx(ar,{placeholder:b,value:(N==null?void 0:N.meta_title)||"",onChange:Qe})}),L.jsx(Gt,{label:"Meta Description",children:L.jsx(ac,{value:(N==null?void 0:N.meta_description)||"",placeholder:"Meta Description",onChange:Xt})})]})]}),L.jsx("div",{className:"col-span-4",children:L.jsxs(Ys,{children:[L.jsx(Gt,{label:"Post Status",children:L.jsx(Dr,{value:M,options:[{value:"published",label:"Publish"},{value:"draft",label:"Draft"},{value:"archived",label:"Archive"},{value:"bin",label:"Bin"}],onChange:$e})}),L.jsx(Gt,{label:"Featured Image 1:1",children:L.jsx(cs,{url:i!=null&&i.url?`${i==null?void 0:i.url}`:"#",onClick:Yt,onSave:jt})}),L.jsx(Gt,{label:"Featured Image 16:9",children:L.jsx(cs,{url:o!=null&&o.url?`${o==null?void 0:o.url}`:"#",onClick:Yt,onSave:bn})}),L.jsx(Gt,{label:"Featured Image 4:3",children:L.jsx(cs,{url:h!=null&&h.url?`${h==null?void 0:h.url}`:"#",onClick:Yt,onSave:mn})}),L.jsx(Gt,{label:"Category *",children:L.jsx(Zs,{required:!0,options:m1(tt.categories),placeholder:"Select Category",value:{value:w,label:(Te=(Bt=tt.categories)==null?void 0:Bt.find(E=>E.id==w))==null?void 0:Te.title,level:(le=(Jt=tt.categories)==null?void 0:Jt.find(E=>E.id==w))!=null&&le.id_parent?1:0},onChange:E=>{Mn({...E})},classNames:{option:E=>{var K;return((K=E.data)==null?void 0:K.level)==1?"text-front-small ml-2 before-dash":""}}})}),L.jsx(Gt,{label:"Bali Area *",children:L.jsx(Dr,{required:!0,options:X,value:St?(Ne=X.find(E=>E.value==St))==null?void 0:Ne.value:void 0,placeholder:"Select Bali Area",onChange:ae})}),Lt(),ie(),Ae(),L.jsx(da,{checked:!!q,onChange:E=>{j(E?1:0)},label:"Pin Article"}),L.jsxs("div",{className:"justify-end flex gap-x-8 ",children:[M!=="published"&&L.jsx(As,{onClick:async()=>{fe(!0)},children:"Go Publish"}),L.jsx(As,{onClick:async()=>{fe()},children:"Save"}),!!at&&L.jsx(As,{children:L.jsx(Vo,{target:"_blank",to:`/${(Se=(Ht=tt==null?void 0:tt.countries)==null?void 0:Ht.find(E=>E.id==St))==null?void 0:Se.slug}/${(Fe=(Pt=tt.categories)==null?void 0:Pt.find(E=>E.id==w))==null?void 0:Fe.slug_title}/${U}`,children:"View Article"})})]})]})})]})})};export{X1 as default};
