import{q as B,r as i,j as e}from"./AdminApp-ChTaPRE2.js";import{g,e as h,c as f}from"./template.service-a9rTbIwN.js";import{C as b}from"./ComponentCard-BXAeiW9m.js";import{A as I}from"./FeaturedImage-C43VoFVu.js";import{u as L}from"./useNavigationPrompt-B_4aje__.js";import{B as y}from"./Button-BkWwhKN1.js";import{T as m}from"./TextArea-XtACzk4h.js";import"./index-BYKjDz3i.js";import"./media.service-DnMGUgve.js";import"./MediaForm-fju4iPXC.js";import"./index-BVEKCKPu.js";import"./index-C9kMmtqa.js";import"./PageBreadCrumb-DPyHZSFF.js";import"./PageMeta-B5tbE7tJ.js";import"./Alert-Cd3KaBGt.js";import"./useTimedMessage-D8LL_2fq.js";import"./useModal-B0ZwIyJt.js";import"./Badge-CwbRsx9y.js";import"./createLucideIcon-BRWjyiVq.js";const P="http://34.124.244.233/essentialbali",Y=()=>{const c={isAvailable:!1,isChanged:!1},{setNotification:S}=B(),[l,v]=i.useState({content:{id:0,url:""},...c}),[d,x]=i.useState({content:"",...c}),[p,j]=i.useState({content:"",...c}),[u,N]=i.useState({content:"",...c}),{setBlock:o,isDirty:C}=L();i.useEffect(()=>{(async()=>{try{const t=await g("/logo-header");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);v(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/head");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);x(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/prebody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);j(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})(),(async()=>{try{const t=await g("/script/postbody");if((t==null?void 0:t.status_code)==200&&t.data){const s=JSON.parse(t.data.content);N(n=>({...n,content:s,isAvailable:!0}))}}catch(t){console.log(t)}})()},[]);const A=t=>{v(s=>({...s,content:{id:t.id,url:t.path}})),o(!0)},r=(t="Unexpected Error")=>(S({message:t,type:"fail",isClosed:!1}),!1),a=(t="successfully change logo header")=>(S({message:t,type:"neutral",isClosed:!1}),o(!1),!0),w=async()=>{},J=async()=>{if(l.isAvailable)try{return await h("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}else try{return await f("/logo-header","Logo",JSON.stringify(l.content))?a():r()}catch(t){return console.log(t),r()}},O=async()=>{(async()=>{try{return d.isAvailable?await h("/script/head","Script",JSON.stringify(d.content))?a():r():await f("/script/head","Script",JSON.stringify(d.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return p.isAvailable?await h("/script/prebody","Script",JSON.stringify(p.content))?a():r():await f("/script/prebody","Script",JSON.stringify(p.content))?a():r()}catch(t){return console.log(t),r()}})(),(async()=>{try{return u.isAvailable?await h("/script/postbody","Script",JSON.stringify(u.content))?a():r():await f("/script/postbody","Script",JSON.stringify(u.content))?a():r()}catch(t){return console.log(t),r()}})()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-12",children:e.jsxs("div",{className:"col-span-6",children:[e.jsxs(b,{title:"Logo Image",children:[e.jsx("div",{children:e.jsx(I,{url:`${P}/${l.content.url}`,onSave:A})}),e.jsx(y,{onClick:J,children:"Save Logo"})]}),e.jsxs(b,{title:"Additional Scripts",children:[e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts inside ","<head>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:d.content,onChange:t=>{x(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right after ","<body>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:p.content,onChange:t=>{j(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:["Insert scripts right before closing ","</body>"," tag"]}),e.jsx(m,{placeholder:"<script>",value:u.content,onChange:t=>{N(s=>({...s,content:t,isChanged:!0})),o(!0)}})]}),e.jsx("div",{className:"spacer py-8"}),e.jsx(y,{onClick:O,children:"Save Scripts"})]})]})}),e.jsx("div",{className:"fixed bottom-6 right-6",children:C&&e.jsx(y,{onClick:w,children:"Save all settings"})})]})};export{Y as default};
