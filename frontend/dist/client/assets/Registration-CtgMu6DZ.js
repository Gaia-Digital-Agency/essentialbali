import{r as s,j as e,Y as de,t as me,K as ue}from"./AdminApp-ChTaPRE2.js";import{C as he}from"./ComponentCard-BXAeiW9m.js";import{I as x}from"./InputField-Btjg0xJq.js";import{L as l}from"./Label-Bw_W4V5I.js";import{S as pe}from"./download-D45ZpCqd.js";import{S as ge,a as ye}from"./eye-close-tVHic9x0.js";import{S as u}from"./Select-BrOugipn.js";import{B as ve}from"./Button-BkWwhKN1.js";import{u as L}from"./useTimedMessage-D8LL_2fq.js";import{A as U}from"./Alert-Cd3KaBGt.js";import{M as fe,g as Se}from"./ModalTimezoneTable-DpNs8PnS.js";import{B as xe}from"./Badge-CwbRsx9y.js";import{u as je}from"./useModal-B0ZwIyJt.js";import"./index-BYKjDz3i.js";import"./index-DxIT6uDb.js";function Ie(){const[j,b]=s.useState(!1),[R,C]=s.useState(""),[h,Z]=s.useState(!1),[D,E]=s.useState(!1),[F,w]=s.useState(""),[p,c]=s.useState(""),[g,N]=s.useState(""),[y,z]=s.useState(""),[v,k]=s.useState(""),[f,A]=s.useState(""),[m,T]=s.useState("admin_country"),[S,M]=s.useState(0),[d,P]=s.useState(0),[_,O]=s.useState(""),[J,K]=s.useState([]),[V,Y]=s.useState([]),[$,q]=s.useState([]),[G,H]=s.useState([]);L(g,N),L(p,c);const{isOpen:Q,openModal:W,closeModal:X}=je(),B=a=>{const t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(a);return b(!1),C(""),t||(b(!0),C("Please input a valid email address")),t},I=a=>(E(!1),w(""),a.length<8&&(E(!0),w("Minimum Length 8 Character")),a),ee=a=>{const t=a.target.value;A(t),I(t)},ae=a=>{const t=a.target.value;z(t),B(t)},se=[{key:"admin_country",value:"admin_country",label:"Admin Bali Area"},{key:"admin_city",value:"admin_city",label:"Admin Sub Area"}],te=a=>{T(String(a))},re=a=>{P(Number(a))},oe=a=>{M(Number(a))},ne=a=>{O(String(a))},ie=async a=>{var r,i;a.preventDefault();const t={email:y,name:v,password:f,user_level:m,id_country:d,id_city:S,timezone:_};try{if(!B(y))return;if(!v){c("Please Input Name");return}if(!I(f))return;if(!d){c("Please Select Bali Area");return}if(m!=="admin_country"&&!S){c("Please Select Sub Area");return}await de(t),N("Register Success"),ce()}catch(o){throw o instanceof Error&&c(o.message),typeof o=="object"&&o!==null&&"response"in o&&c(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)??"Something went wrong"),o}},le=()=>{W()},ce=()=>{z(""),k(""),A(""),T(""),P(0),M(0),O("")};return s.useEffect(()=>{(async()=>{var t;try{const r=await me("country"),i={key:0,value:0,label:"Select Bali Area"},o=((t=r.data)==null?void 0:t.map(n=>({key:n.id,value:n.id,label:n.name})))??[];K([i,...o])}catch(r){console.error(r)}})()},[]),s.useEffect(()=>{(async()=>{try{const r=(await Se()).data,i={key:0,value:0,label:"Select Timezone"},o=(r==null?void 0:r.map(n=>({key:n.id,value:n.timezone_name,label:n.timezone_name+" - ["+n.utc_offset+"]"})))??[];H([i,...o]),q(r)}catch(t){console.error(t)}})()},[]),s.useEffect(()=>{(async()=>{var t;try{const r=await ue("city",d),i={key:0,value:0,label:"Select Sub Area"},o=((t=r.data)==null?void 0:t.map(n=>({key:n.id,value:n.id,label:n.name})))??[];Y([i,...o])}catch(r){console.error(r)}})()},[d]),e.jsxs(e.Fragment,{children:[e.jsxs(he,{title:"Register New User",children:[e.jsx("div",{className:"mb-5",children:p&&e.jsx(U,{variant:"error",title:"Error",message:p})}),e.jsx("div",{className:"mb-5",children:g&&e.jsx(U,{variant:"success",title:"Success",message:g})}),e.jsxs("form",{onSubmit:ie,children:[e.jsxs("div",{className:"space-y-5 space-x-6 grid grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Name"}),e.jsx(x,{type:"text",value:v,placeholder:"John Doe",onChange:a=>k(a.target.value)})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Email"}),e.jsx(x,{type:"email",value:y,error:j,onChange:ae,placeholder:"Enter your email",hint:j?R:""})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx(l,{children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{type:h?"text":"password",placeholder:"Enter your password",value:f,onChange:ee,error:D,hint:D?F:""}),e.jsx("button",{onClick:()=>Z(!h),className:"absolute z-30 -translate-y-1/2 cursor-pointer right-4 top-1/2",children:h?e.jsx(ge,{className:"fill-gray-500 dark:fill-gray-400 size-5"}):e.jsx(ye,{className:"fill-gray-500 dark:fill-gray-400 size-5"})})]})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx(l,{children:"Select Input"}),e.jsx(u,{options:se,value:m,placeholder:"Select Option",onChange:te,className:"dark:bg-dark-900"},m)]}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 mb-5",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Bali Area"}),e.jsx(u,{options:J,value:d,placeholder:"Select Bali Area...",onChange:re,className:"dark:bg-dark-900"})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Sub Area"}),e.jsx(u,{options:V,value:S,placeholder:"Select Sub Area...",onChange:oe,className:"dark:bg-dark-900"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-5 mb-5",children:e.jsxs("div",{children:[e.jsxs(l,{children:[e.jsx("span",{className:"mr-2",children:"Time Zone"}),e.jsx(xe,{color:"info",onClick:le,children:"?"})]}),e.jsx(u,{options:G,value:_,placeholder:"Select Timezone...",onChange:ne,className:"dark:bg-dark-900"})]})}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ve,{startIcon:e.jsx(pe,{className:"size-5"}),className:"w-1/4",children:"Save"})})]})]}),e.jsx(fe,{isOpen:Q,onCLose:X,timezonesData:$})]})}export{Ie as default};
