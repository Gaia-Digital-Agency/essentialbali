import{r as n,j as e}from"./AdminApp-ChTaPRE2.js";import{C as g}from"./ComponentCard-BXAeiW9m.js";import{P as y}from"./PageBreadCrumb-DPyHZSFF.js";import{a as A,g as N}from"./media.service-DnMGUgve.js";import{M}from"./index-BYKjDz3i.js";import{L as m}from"./Label-Bw_W4V5I.js";import{I as j}from"./InputField-Btjg0xJq.js";import{B as f}from"./Button-BkWwhKN1.js";import{T as u}from"./TextArea-XtACzk4h.js";import{B as C}from"./Badge-CwbRsx9y.js";import{P as w}from"./PageMeta-B5tbE7tJ.js";const L="http://34.124.244.233/essentialbali";function T({asset:r,isOpen:o,onClose:d,onUpdated:x}){const[s,l]=n.useState(null);if(n.useEffect(()=>{r&&l(r)},[r]),!o)return null;const c=a=>{s&&l({...s,[a.target.name]:a.target.value})};function p(a){return{title:a.title??void 0,alt_text:a.alt_text??void 0,caption:a.caption??void 0,description:a.description??void 0,filename:a.filename??void 0}}const t=async()=>{if(!s)return;const a=await A(s.id,p(s));console.log("updated",a.data),x(a.data),d()},i=(a,v)=>{l(h=>h&&{...h,[a]:v})};return e.jsx(e.Fragment,{children:e.jsx("div",{children:e.jsx(g,{title:"Edit Asset",children:e.jsx(M,{isOpen:o,onClose:d,className:"max-w-[584px] p-5 lg:p-10",children:s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h5",{className:"mb-5 text-lg font-medium text-gray-800 dark:text-white/90 lg:mb-6",children:"Edit Asset Metadata"}),e.jsxs("div",{className:"custom-scrollbar overflow-y-auto h-[600px] px-2 pb-3",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5",children:[e.jsx("div",{className:"inline-flex rounded border border-gray-300 mb-2 mr-2 w-max-full h-50 p-1 box-border",children:e.jsx("img",{src:L+"/"+s.path,alt:s.alt_text||"",className:"w-full h-full object-cover"})}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Uploaded at :"," ",e.jsx(C,{size:"sm",color:"success",children:s.createdAt})]})]}),e.jsxs("div",{className:"col-span-1 pb-5",children:[e.jsx(m,{htmlFor:"title",children:"Title"}),e.jsx(j,{name:"title",value:s.title||"",onChange:c})]}),e.jsxs("div",{className:"col-span-1 pb-5",children:[e.jsx(m,{children:"Filename"}),e.jsx(j,{name:"filename",value:s.filename||"",onChange:c})]}),e.jsxs("div",{className:"col-span-1 pb-5",children:[e.jsx(m,{children:"Alt Text"}),e.jsx(j,{name:"alt_text",value:s.alt_text||"",onChange:c})]}),e.jsxs("div",{className:"col-span-1 pb-5",children:[e.jsx(m,{children:"Caption"}),e.jsx(u,{name:"caption",value:s.caption||"",onChange:a=>i("caption",a),rows:4})]}),e.jsxs("div",{className:"col-span-1 pb-5",children:[e.jsx(m,{children:"Description"}),e.jsx(u,{name:"description",value:s.description||"",onChange:a=>i("description",a),rows:4})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 px-2 mt-2 lg:justify-end",children:e.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[e.jsx(f,{onClick:d,children:"Cancel"}),e.jsx(f,{onClick:t,children:"Save"})]})})]})})})})})}const b="http://34.124.244.233/essentialbali";function O(){const[r,o]=n.useState([]),[d,x]=n.useState(null),[s,l]=n.useState(!1);n.useEffect(()=>{(async()=>{try{const i=await N();if(i){const a=i.data;o(a)}}catch(i){console.error(i)}})()},[]);const c=t=>{x(t),l(!0)},p=t=>{console.log("update handled =>",t),o(i=>i.map(a=>a.id===t.id?t:a))};return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"essentialbali Admin Dashboard | Media Library",description:"This is Media Library Dashboard page for essentialbali Admin Dashboard Template"}),e.jsx("div",{className:"pb-5 grid grid-cols-1 gap-6 xl:grid-cols-1",children:e.jsx("div",{className:"space-y-12",children:e.jsx(y,{pageTitle:"Media Library"})})}),e.jsx(g,{title:"Media Library",children:r.map(t=>e.jsx("div",{onClick:()=>c(t),className:"inline-flex rounded border border-gray-300 mb-2 mr-2 w-45 h-45 p-1 box-border",children:e.jsx("div",{className:"flex min-w-0 overflow-hidden items-center justify-center align-middle",children:e.jsx("img",{src:b+`/${t.path}`,className:"block w-auto h-full object-cover hover:scale-110 transition duration-500 ease-in-out",onLoad:()=>{URL.revokeObjectURL(b+"/"+t.path)}})})},t.id))}),e.jsx(T,{asset:d,isOpen:s,onClose:()=>l(!1),onUpdated:p})]})}export{O as default};
