import{a1 as N,u as b,r as l,H as A,j as e,a3 as y}from"./AdminApp-ChTaPRE2.js";import{A as P}from"./Advertisement-DB73lHDT.js";import{u as k}from"./useArticle-CClexQ19.js";import{I as F}from"./Image-XJ3LueYf.js";import{T as S}from"./TextLink-BENXq7ob.js";import{e as B}from"./article.service-DabQZ069.js";import{B as C}from"./Button-BSzMcp9L.js";import"./index-C0XMhpiw.js";const E=({article:s})=>{const{getPermalink:t,getFeaturedImageUrl:a}=k();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-12 mb-16 gap-6",children:[e.jsxs("div",{className:"md:col-span-6 col-span-12 order-2 md:order-1",children:[e.jsx("div",{className:"title-wrapper mb-6",children:e.jsx("p",{className:"text-front-article-title font-serif",children:s.title})}),e.jsx("div",{className:"subtitle-wrapper mb-6",children:e.jsx("p",{children:s.sub_title})}),e.jsx("div",{className:"button-wrapper",children:e.jsx(S,{link:t(s),color:"gray",text:"READ MORE"})})]}),e.jsx("div",{className:"md:col-span-6 col-span-12 order-1 md:order-2",children:e.jsx("div",{className:"image-wrapper",children:e.jsx(F,{link:t(s),url:a(s)})})})]})})},I=({content:s,q:t})=>{if(s&&s.length)return e.jsx(e.Fragment,{children:s==null?void 0:s.map(a=>e.jsx("div",{className:"article-card mb-8",children:e.jsx(E,{article:a})}))});if(t&&t.length<3)return e.jsx(e.Fragment,{children:"Keyword search need to have at least 3 characters"});if(t)return e.jsx(e.Fragment,{children:"Article not found"})},_=()=>{var d,m;const{initialData:s}=N(),{clientChange:t}=b(),[a,x]=l.useState((s==null?void 0:s.articles)??[]),[o,h]=l.useState(((d=s==null?void 0:s.pagination)==null?void 0:d.totalPages)??1),[n,u]=l.useState(((m=s==null?void 0:s.pagination)==null?void 0:m.page)??1),[g]=A(),i=g.get("q"),j=7;l.useEffect(()=>{!i||!t||(async()=>{const r=await B({keyword:i,page:n,limit:j});r!=null&&r.articles&&x(p=>{const v=r.articles.filter(c=>!p.some(w=>w.id===c.id)).map(c=>({...c}));return[...p,...v]}),r!=null&&r.pagination&&h(r.pagination.totalPages)})()},[n]);const f=()=>{n>o||u(r=>r+1)};return e.jsxs(e.Fragment,{children:[e.jsxs(y,{children:[e.jsxs("title",{children:[i??"Search"," - essentialbali"]}),e.jsx("meta",{name:"description",content:"essentialbali is the ultimate Bali area guide for travelers, expats, and locals, featuring the best dining, events, schools, wellness, and travel in Bali"})]}),e.jsxs("section",{className:"py-12",children:[e.jsx("div",{className:"container",children:e.jsx(P,{})}),e.jsxs("div",{className:"container py-12",children:[e.jsx(I,{content:a,q:i}),n<o&&e.jsx("div",{className:"button-wrapper text-center py-8",children:e.jsx(C,{text:"Load More",onClick:f})})]})]})]})};export{_ as default};
